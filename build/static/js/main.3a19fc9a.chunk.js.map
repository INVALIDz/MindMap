{"version":3,"sources":["statics/refer.js","customHooks/useMindmap.js","context/reducer/global/actionTypes.js","components/Popup/common/styledComponents.js","context/reducer/nodeStatus/actionCreator.js","context/reducer/mindmap/actionCreator.js","context/reducer/nodeStatus/actionTypes.js","context/reducer/history/actionTypes.js","statics/defaultMindmap.js","context/reducer/global/actionCreator.js","customHooks/useTheme.js","features/ThemeProvider/index.js","customHooks/useHistory.js","customHooks/useZoom.js","customHooks/useMove.js","components/ToolButton/index.js","components/MindmapTitle/index.js","components/Popup/subComponents/New.js","methods/mindmapParser.js","components/Popup/subComponents/Open.js","components/Popup/subComponents/Theme/ThemeListItem.js","components/Popup/subComponents/Theme/index.js","components/Popup/index.js","components/Popup/common/popupType.js","features/Nav/index.js","features/Register/index.js","methods/getKeydownEvent.js","methods/getMouseWheelEvent.js","context/reducer/editPanel/actionCreator.js","customHooks/useEditPanel.js","components/Node/subComponents/Toolbar.js","components/Node/subComponents/InputDiv.js","components/mdPreview/index.js","components/Node/index.js","components/SubNode/index.js","components/RootNode/index.js","methods/drawCanvas.js","methods/getDragEvents.js","components/DragCanvas/index.js","components/LineCanvas/index.js","features/Mindmap/index.js","components/mdEditor/index.js","features/EditPanel/index.js","features/Main/index.js","App.js","serviceWorker.js","index.js","context/reducer/editPanel/actionTypes.js","context/reducer/history/actionCreator.js","methods/assistFunctions.js","context/reducer/mindmap/index.js","context/reducer/nodeStatus/index.js","context/reducer/history/index.js","context/reducer/global/index.js","context/reducer/editPanel/index.js","context/index.js","methods/mindmapExporter.js","context/reducer/mindmap/actionTypes.js"],"names":["__webpack_require__","d","__webpack_exports__","LEFT_NODE","RIGHT_NODE","DROP_AREA","ROOT_PARENT","ROOT_NODE_ID","MINDMAP_ID","MINDMAP_MAIN","NEW_NODE_TEXT","DEFAULT_TITLE","THEME_MAIN","THEME_LIGHT","THEME_DARK","THEME_EX","THEME_ASSIST","id","children","react__WEBPACK_IMPORTED_MODULE_0__","_context__WEBPACK_IMPORTED_MODULE_1__","_context_reducer_mindmap_actionCreator__WEBPACK_IMPORTED_MODULE_2__","_context_reducer_nodeStatus_actionCreator_js__WEBPACK_IMPORTED_MODULE_3__","_context_reducer_history_actionCreator__WEBPACK_IMPORTED_MODULE_4__","md5__WEBPACK_IMPORTED_MODULE_5__","md5__WEBPACK_IMPORTED_MODULE_5___default","n","axios__WEBPACK_IMPORTED_MODULE_6__","axios__WEBPACK_IMPORTED_MODULE_6___default","useMindmap","_useContext","useContext","context","mDispatch","mindmap","dispatch","nDispatch","nodeStatus","hDispatch","history","toggleChildren","node_id","bool","mindmapAction","addChild","new_node_id","md5","Date","now","Math","random","nodeStatusAction","new_node","axios","post","then","alert","catch","err","addSibling","parent_id","moveNode","target_id","is_sibling","editNode","changeText","text","editNodeInfo","info","selectNode","select_by_click","deleteNode","clearNodeStatus","setMindmap","is_new_map","clearHistory","expandAll","SET_TITLE","SET_THEME","ZOOM_IN","ZOOM_OUT","ZOOM_RESET","MOVE_XY","MOVE_RESET","MOVE_XY_WHEN_ZOOM","ButtonSet","props","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","Object","assign","className","css","_templateObject","MainButton","_templateObject2","refer","Highlight","_templateObject3","Annotation","_templateObject4","Shortcut","_templateObject5","setSelect","type","actionTypes","data","cur_select","cur_edit","cur_node_info","setEdit","clearAll","getNodeInfo","node","parent","on_left","C_Users_12240_Downloads_RMind_develop_RMind_develop_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","changeInfo","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_statics_refer__WEBPACK_IMPORTED_MODULE_1__","showChildren","SET_SELECT","SET_EDIT","GET_NODE_INFO","CLEAR_ALL","SET_HISTORY","CLEAR_HISTORY","_refer__WEBPACK_IMPORTED_MODULE_0__","setTitle","title","useTheme","_useContext$global","global","_useContext$global$st","state","theme_index","theme_list","theme","useMemo","setTheme","index","ThemeProvider","_ref","react_default","main","light","assist","dark","ex","useHistory","applySnapshot","snapshot","cur_node","JSON","parse","undoHistory","undo","length","redoHistory","redo","useZoom","gDispatch","zoomIn","x","y","globalAction","zoomOut","zoomReset","zoomRate","useMove","moveXY","moveReset","ToolButton","icon","onClick","disabled","handlePropagation","cx","wrapper","defineProperty","disabled_style","ToolButton_templateObject","MindmapTitle","self","useRef","useEffect","document","concat","localStorage","setItem","ref","contentEditable","suppressContentEditableWarning","spellCheck","onKeyDown","event","key","toUpperCase","current","textContent","blur","onBlur","new_title","trim","slice","MindmapTitle_templateObject","New","handleClosePopup","handleDownload","styledComponents","defaultMindmap","getLayerAndText","line","format","layer","match","replace","buildNodeFromJSON","json","copyNodeData","target_node","source_node","is_root_node","expandState","map","child","root","mindmapParser","import_data","buildNodeFromText","data_array","cur_layer","cur_text","arguments","undefined","root_data","shift","_getLayerAndText","push","split","filter","Open","sub_title","list_wrapper","input","accept","addEventListener","file","target","files","file_name","name","dot_index","file_reader","FileReader","onload","str","result","readAsText","click","Open_templateObject","Open_templateObject2","ThemeListItem","is_current","current_style","style","backgroundColor","ThemeListItem_templateObject","ThemeListItem_templateObject2","Theme","_useTheme","Theme_ThemeListItem","Theme_templateObject","Popup","Content","lazy","e","bind","getContentComponent","content_wrapper","close_button","react","fallback","Fragment","overlay","Popup_templateObject","Popup_templateObject2","Nav","_useState","useState","_useState2","slicedToArray","popup","setPopup","_useZoom","_useMove","_useHistory","html2canvas","getElementById","canvas","url","toDataURL","downloadFile","content","mindmapExporter","handleZoom","zoom","console","log","handleMove","move","section","components_ToolButton","components_MindmapTitle","components_Popup","Nav_templateObject","Nav_templateObject2","Register","show","email","password","password2","formData","setFormData","div","display","onChange","objectSpread","value","onSubmit","preventDefault","autoFocus","placeholder","required","minLength","href","getKeydownEvent","mindmapHook","historyHook","navigator","platform","startsWith","metaKey","ctrlKey","shiftKey","trunc","cur_index","findIndex","handleKeyEventWithNode","mousemoveInfo","startX","startY","getMouseWheelEvent","propHook","normalizeXY","wheelDelta","stopPropagation","getWheelDelta","clientX","clientY","buttons","altKey","movedX","movedY","handleWhellEventWithkey","toggelPanelShow","isShow","useEditPanel","_useContext$editPanel","editPanel","epState","epDispatch","editPanelAction","savePanel","Toolbar","editPanelHook","Toolbar_templateObject","InputDiv","_useMindmap","focus","getSelection","selectAllChildren","InputDiv_templateObject","marked","setOptions","renderer","Renderer","highlight","code","hljs","highlightAuto","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","MdPreview","_props$mdtext","mdtext","querySelectorAll","forEach","block","highlightBlock","fontSize","dangerouslySetInnerHTML","__html","Node","node_refs","_useContext$nodeStatu","add","delete","scrollIntoView","behavior","inline","common_style","specific_style","seleted_style","draggable","data-tag","data-parent","data-show-children","subComponents_InputDiv","drop_area","onDoubleClick","components_mdPreview","toggle_button","button_left","button_right","subComponents_Toolbar","style_selected_border","Node_templateObject","Node_templateObject2","Node_templateObject3","Node_templateObject4","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","SubNode","left_style","components_Node","sub_node","SubNode_templateObject","SubNode_templateObject2","RootNode","root_node","total","half","components_SubNode","RootNode_templateObject","drawBezier","ctx","from_x","from_y","to_x","to_y","moveTo","bezierCurveTo","drawLineCanvas","beginPath","lineWidth","strokeStyle","drawLine","_map$get","get","_map$get2","parent_x_left","parent_x_right","parent_y","child_data","_child_data","child_x_left","child_x_right","child_y","stroke","closePath","drawDragCanvas","child_id","parent_offset","child_offset","child_left_of_parent","setLineDash","parent_x","child_x","top","bottom","left","right","strokeRect","virtual_rect_height","getDomOffset","dom","offsetLeft","offsetWidth","offsetTop","offsetHeight","getDragEvents","drag_canvas","container","drag","children_offset_left","children_offset_right","children_offset_vertical","parent_is_root","container_left","container_top","container_width","container_height","in_drop_area","handleContainerScroll","scrollLeft","scrollTop","listener","dataset","tag","findNode","children_offset","each","min","apply","toConsumableArray","offset","max","reduce","flat_arr","cur","getContext","clearRect","width","height","moveX","moveY","mouse_x","mouse_y","i","last_index","j","parentNode","classList","remove","removeEventListener","DragCanvas","parent_ref","container_ref","flag","setFlag","gState","handleWindowResize","window","handleDrag","querySelector","DragCanvas_templateObject","LineCanvas","Map","Array","from","LineCanvas_templateObject","Set","Mindmap","zoomHook","moveHook","FLAG","setFLAG","mindmap_json","stringify","handleResize","handleKeydown","clientWidth","clientHeight","handleMouseWheel","handleMapMove","debounce","setHistory","components_RootNode","components_DragCanvas","components_LineCanvas","Mindmap_templateObject","MdEditor","propText","setText","textarea","resize","EditPanel","_nState$cur_node_info","_nState$cur_node_info2","editPanleHook","close","mdEditor","EditPanel_templateObject","position","cursor","EditPanel_templateObject2","Main","features_Mindmap","features_EditPanel","Main_templateObject","App","react_router_dom","features_ThemeProvider","react_router","exact","path","component","withRouter","Boolean","location","hostname","ReactDOM","render","src_App","serviceWorker","ready","registration","unregister","TOGGLE_PANEL_SHOW","deepCopy","isArray","output","entries","_ref2","C_Users_12240_Downloads_RMind_develop_RMind_develop_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","search_id","find","item","setShowChildrenTrue","filename","link","download","func","wait","timer","_this","this","_arguments","clearTimeout","setTimeout","defaultValue_mindmap","getItem","reducer_mindmap","action","new_mindmap","node_found","insert_index","splice","node_index","node_copy","target_index","delete_index","defaultValue_nodeStatus","reducer_nodeStatus","defaultValue_history","last_snapshot","reducer_history","new_history","unshift","pop","defaultValue_global","Number","reducer_global","newGlobal","obj","defaultValue_editPanel","nodeId","panel","newPanel","React","createContext","WrappedProvider","_useReducer","useReducer","mindmapReducer","_useReducer2","mState","_useReducer3","nodeStatusReducer","_useReducer4","nState","_useReducer5","historyReducer","_useReducer6","hState","_useReducer7","globalReducer","_useReducer8","_useReducer9","editPanelReducer","_useReducer10","combined","Provider","created","export_data","lines","dfs","repeat","exportNodeToText","join","exportMindmapToText","km_mindmap","exportMindmapToJSON","TOGGLE_CHILDREN","ADD_CHILD","ADD_SIBLING","MOVE_NODE","CHANGE_TEXT","DELETE_NODE","EXPAND_ALL","SET_MINDMAP"],"mappings":"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","file":"static/js/main.3a19fc9a.chunk.js","sourcesContent":["// Node Type\nexport const LEFT_NODE = 'nodeLeft';\nexport const RIGHT_NODE = 'nodeRight';\nexport const DROP_AREA = 'dropArea';\n\n// DOM 操作相关\nexport const ROOT_PARENT = {id: '', children: []};\nexport const ROOT_NODE_ID = 'rmind_root_node';\nexport const MINDMAP_ID = 'rmind_mindmap_wrapper';\nexport const MINDMAP_MAIN = 'rmind_main'\n\n// 缺省文本\nexport const NEW_NODE_TEXT = '新建节点';\nexport const DEFAULT_TITLE = '未命名导图';\n\n// CSS 主题变量名\nexport const THEME_MAIN = '--theme-main';\nexport const THEME_LIGHT = '--theme-light';\nexport const THEME_DARK = '--theme-dark';\nexport const THEME_EX = '--theme-ex';\nexport const THEME_ASSIST = '--theme-assist';","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as mindmapAction from '../context/reducer/mindmap/actionCreator';\nimport * as nodeStatusAction from '../context/reducer/nodeStatus/actionCreator.js';\nimport {clearHistory} from '../context/reducer/history/actionCreator';\nimport md5 from 'md5';\nimport axios from 'axios';\nconst useMindmap = () => {\n    const {mindmap: {dispatch: mDispatch}, nodeStatus: {dispatch: nDispatch}, history: {dispatch: hDispatch}} = useContext(context);\n    return {\n        toggleChildren: (node_id, bool) => {\n            mDispatch(mindmapAction.toggleChildren(node_id, bool));\n        },\n        addChild: node_id => {\n            const new_node_id = md5('' + Date.now() + Math.random());\n            mDispatch(mindmapAction.toggleChildren(node_id, true));\n            mDispatch(mindmapAction.addChild(node_id, new_node_id));\n            nDispatch(nodeStatusAction.setEdit(new_node_id));\n            const new_node = {\n                node_id,\n                new_node_id,\n              };\n              axios.post(\"http://localhost:4000/create\", new_node).then(() => alert(`Node Created{$node_id}{$new_node_id}`))\n              .catch(err => {\n                alert(err);\n              });\n              \n        },\n        addSibling: (node_id, parent_id) => {\n            const new_node_id = md5('' + Date.now() + Math.random());\n            mDispatch(mindmapAction.addSibling(node_id, parent_id, new_node_id));\n            nDispatch(nodeStatusAction.setEdit(new_node_id));\n            const new_node = {\n                node_id,\n                parent_id,\n                new_node_id,\n              };\n              axios.post(\"http://localhost:4000/create\", new_node).then(() => alert(`Node Created{$node_id}{$new_node_id}`))\n              .catch(err => {\n                alert(err);\n              });\n        },\n        moveNode: (node_id, target_id, parent_id, is_sibling) => {\n            mDispatch(mindmapAction.moveNode(node_id, target_id, parent_id, is_sibling));\n            nDispatch(nodeStatusAction.setSelect(node_id));\n            const new_node = {\n                node_id,\n                target_id,\n                parent_id,\n                is_sibling,\n              };\n              axios.post('http://localhost:4000/move', new_node);\n        },\n        editNode: node_id => {\n            nDispatch(nodeStatusAction.setEdit(node_id));\n            const new_node = {\n                node_id\n              };\n             \n              axios.post('http://localhost:4000/edit', new_node);\n        },\n        changeText: (node_id, text) => {\n            mDispatch(mindmapAction.changeText(node_id, text));\n            const new_node = {\n                node_id,\n               text,\n              };\n            \n              axios.post('http://localhost:4000/changeText', new_node);\n        },\n        editNodeInfo:(node_id,info)=>{\n            mDispatch(mindmapAction.changeInfo(node_id, info));\n            const new_node = {\n                node_id,\n                info,\n              };\n             \n              axios.post('http://localhost:4000/editNodeInfo', new_node);                      \n          },\n        selectNode: (node_id, select_by_click) => {\n            nDispatch(nodeStatusAction.setSelect(node_id, select_by_click));\n           \n        },\n        deleteNode: (node_id, parent_id) => {\n            mDispatch(mindmapAction.deleteNode(node_id, parent_id));\n            nDispatch(nodeStatusAction.setSelect(parent_id));\n            const new_node = {\n                node_id,\n                parent_id,\n              };\n              axios.post('http://localhost:4000/delete', new_node);\n        },\n        clearNodeStatus: () => {\n            nDispatch(nodeStatusAction.clearAll());\n        },\n        setMindmap: (mindmap, is_new_map) => {\n            if (is_new_map) {\n                hDispatch(clearHistory());\n                nDispatch(nodeStatusAction.setSelect(mindmap.id));\n            }\n            mDispatch(mindmapAction.setMindmap(mindmap));\n        },\n        expandAll: node_id => {\n            mDispatch(mindmapAction.expandAll(node_id));\n            nDispatch(nodeStatusAction.setSelect(node_id));\n        }\n    }\n};\n\nexport default useMindmap;","export const SET_TITLE = 'global/setTitle';\nexport const SET_THEME = 'global/setTheme';\nexport const ADD_THEME = 'global/addTheme'; /// 主题增删改，将来实现\n\nexport const ZOOM_IN = 'global/zoomIn';\nexport const ZOOM_OUT = 'global/zoomOut';\nexport const ZOOM_RESET= 'global/zoomReset';\n\nexport const MOVE_XY= 'global/moveXY';\nexport const MOVE_RESET= 'global/moveReset';\nexport const MOVE_XY_WHEN_ZOOM= 'global/moveXYWhenZoom';\n","import React from 'react';\nimport {css} from 'emotion';\nimport * as refer from '../../../statics/refer';\n\nexport const ButtonSet = props => (<div {...props} className={css`\ndisplay: flex;\njustify-content: flex-end;\nmargin-top: 20px;\n\nbutton {\nmargin-left: 20px;\npadding: 10px 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\noutline: none;\n}\n\nbutton:active {\ntransform: scale(0.95);\n}\n`} />);\n\nexport const MainButton = props => (<button {...props} className={css` /* button& 用于提高 CSS 权重 */\nbutton& {\ncolor: #ffffff;\nbackground-color: var(${refer.THEME_DARK});\nborder: 1px solid var(${refer.THEME_MAIN});\n}\n`} />);\n\nexport const Highlight = props => (<p {...props} className={css`\nmargin-top: 0;\ncolor: var(${refer.THEME_ASSIST});\nfont-weight: 700;\n`} />);\n\nexport const Annotation = props => (<p {...props} className={css`\ncolor: #888888;\nfont-size: 90%;\n`} />);\n\nexport const Shortcut = props => (<a {...props} className={css`\ntext-decoration: underline;\ncursor: pointer;\n`} />);","import * as actionTypes from './actionTypes';\n\nexport const setSelect = (node_id, select_by_click) => ({\n    type: actionTypes.SET_SELECT,\n    data: {\n        cur_select: node_id,\n        select_by_click: select_by_click || false,\n        cur_edit: '',\n        cur_node_info: {}\n    }\n});\n\nexport const setEdit = node_id => ({\n    type: actionTypes.SET_EDIT,\n    data: {\n        cur_select: '',\n        cur_edit: node_id,\n        cur_node_info: {}\n    }\n});\n\nexport const clearAll = () => ({\n    type: actionTypes.CLEAR_ALL,\n    data: {\n        cur_select: '',\n        select_by_click: false,\n        cur_edit: '',\n        cur_node_info: {}\n    }\n});\n\nexport const getNodeInfo = (node, parent, on_left) => ({\n    type: actionTypes.GET_NODE_INFO,\n    data: {\n        cur_node_info: {\n            ...node,\n            parent,\n            on_left\n        }\n    }\n});\n","import * as actionTypes from './actionTypes';\nimport {NEW_NODE_TEXT} from '../../../statics/refer';\n\nexport const toggleChildren = (node_id, bool) => ({\n    type: actionTypes.TOGGLE_CHILDREN,\n    data: {\n        node_id,\n        node: {\n            showChildren: bool\n        }\n    }\n});\n\nexport const addChild = (node_id, new_node_id) => ({\n    type: actionTypes.ADD_CHILD,\n    data: {\n        node_id,\n        node: {\n            id: new_node_id,\n            text: NEW_NODE_TEXT,\n            showChildren: true,\n            children: []\n        }\n    }\n});\n\nexport const addSibling = (node_id, parent_id, new_node_id) => ({\n    type: actionTypes.ADD_SIBLING,\n    data: {\n        node_id,\n        parent_id,\n        node: {\n            id: new_node_id,\n            text: NEW_NODE_TEXT,\n            showChildren: true,\n            children: []\n        }\n    }\n});\n\nexport const moveNode = (node_id, target_id, parent_id, is_sibling) => ({\n    type: actionTypes.MOVE_NODE,\n    data: {\n        node_id,\n        target_id,\n        parent_id,\n        is_sibling\n    }\n});\n\nexport const changeText = (node_id, text) => ({\n    type: actionTypes.CHANGE_TEXT,\n    data: {\n        node_id,\n        node: {\n            text\n        }\n    }\n});\n\nexport const changeInfo = (node_id, info) => ({\n    type: actionTypes.CHANGE_TEXT,\n    data: {\n        node_id,\n        node: {\n            info\n        }\n    }\n});\n\nexport const deleteNode = (node_id, parent_id) => ({\n    type: actionTypes.DELETE_NODE,\n    data: {\n        node_id,\n        parent_id\n    }\n});\n\nexport const expandAll = node_id => ({\n    type: actionTypes.EXPAND_ALL,\n    data: {\n        node_id\n    }\n});\n\nexport const setMindmap = mindmap => ({\n    type: actionTypes.SET_MINDMAP,\n    data: {\n        mindmap\n    }\n});\n","export const SET_SELECT = 'nodeStatus/setSelect';\nexport const SET_EDIT = 'nodeStatus/setEdit';\nexport const GET_NODE_INFO = 'nodeStatus/getNodeInfo';\nexport const CLEAR_ALL = 'nodeStatus/clearAll';","export const SET_HISTORY = 'history/setHistory';\nexport const CLEAR_HISTORY = 'history/clearHistory';","import {ROOT_NODE_ID} from './refer';\n\nexport default {\n    id: ROOT_NODE_ID,\n    text: \"主题\",\n    showChildren: true,\n    children: [\n        {\n            id: \"Sub1\",\n            text: \"分支1\",\n            showChildren: true,\n            children: []\n        },\n        {\n            id: \"Sub2\",\n            text: \"分支2\",\n            showChildren: true,\n            children: []\n        },\n        {\n            id: \"Sub3\",\n            text: \"分支3\",\n            showChildren: true,\n            children: []\n        }\n    ]\n}","import * as actionTypes from './actionTypes';\n\nexport const setTitle = title => ({\n    type: actionTypes.SET_TITLE,\n    data: {\n        title\n    }\n});\n\nexport const setTheme = theme_index => ({\n    type: actionTypes.SET_THEME,\n    data: {\n        theme_index\n    }\n});\n\n\nexport const zoomIn = (x,y) => ({\n    type: actionTypes.ZOOM_IN,\n    data: {\n        x,y\n    }\n});\n\nexport const zoomOut = (x,y) => ({\n    type: actionTypes.ZOOM_OUT,\n    data: {\n        x,y\n    }\n});\n\nexport const zoomReset = zoomRate => ({\n    type: actionTypes.ZOOM_RESET,\n    data: {\n        zoomRate\n    }\n});\n\nexport const moveReset = () => ({\n    type: actionTypes.MOVE_RESET,\n    data: {\n    }\n});\n\nexport const moveXY = (x,y) => ({\n    type: actionTypes.MOVE_XY,\n    data: {\n        x,y\n    }\n});\n\nexport const moveXYWhenZoom = (x,y) => ({\n    type: actionTypes.MOVE_XY,\n    data: {\n        x,y\n    }\n});\n\n\n","import {useContext, useMemo} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\nexport default () => {\n    const {global: {state: {theme_index, theme_list}, dispatch}} = useContext(context);\n    const theme = useMemo(() => theme_list[theme_index], [theme_index]);\n    const setTheme = index => {\n        dispatch(globalAction.setTheme(index));\n    };\n\n    return {\n        theme,\n        theme_index,\n        theme_list,\n        setTheme\n    }\n}","import React from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../customHooks/useTheme';\nimport * as refer from '../../statics/refer';\n\nconst ThemeProvider = ({children}) => {\n    const {theme} = useTheme();\n\n    return (<div className={css`\n    ${refer.THEME_MAIN}: ${theme.main};\n    ${refer.THEME_LIGHT}: ${theme.light};\n    ${refer.THEME_ASSIST}: ${theme.assist};\n    ${refer.THEME_DARK}: ${theme.dark};\n    ${refer.THEME_EX}: ${theme.ex};\n    `}>\n        {children}\n    </div>);\n};\n\nexport default ThemeProvider;","import {useContext} from 'react';\nimport {context} from '../context';\nimport {setMindmap} from '../context/reducer/mindmap/actionCreator.js';\nimport {setSelect} from '../context/reducer/nodeStatus/actionCreator.js';\n\nexport default () => {\n    const {mindmap: {dispatch: mDispatch}, nodeStatus: {dispatch: nDispatch}, history: {state: history}} = useContext(context);\n\n    const applySnapshot = snapshot => {\n        if (snapshot) {\n            const {mindmap, cur_node} = snapshot;\n            mDispatch(setMindmap(JSON.parse(mindmap)));\n            nDispatch(setSelect(cur_node));\n        }\n    };\n\n    return {\n        undoHistory: () => {\n            applySnapshot(history.undo[history.undo.length - 1]);\n        },\n        redoHistory: () => {\n            applySnapshot(history.redo[0]);\n        }\n    }\n}\n\n","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\n\nconst useZoom = () => {\n    const {global: {dispatch: gDispatch}} = useContext(context);\n    return {\n        zoomIn: (x,y) => {\n            gDispatch(globalAction.zoomIn(x,y))          \n        },\n        zoomOut: (x,y) => {\n            gDispatch(globalAction.zoomOut(x,y))\n        },\n        zoomReset: () => {\n            gDispatch(globalAction.zoomReset())\n        },\n    }\n};\n\nexport default useZoom;","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\n\nconst useMove = () => {\n    const {global: {dispatch: gDispatch}} = useContext(context);\n    return {        \n        moveXY: (x,y) => {\n            gDispatch(globalAction.moveXY(x,y))\n        },\n        moveReset: () => {\n            gDispatch(globalAction.moveReset())\n        },\n    }\n};\n\nexport default useMove;","import React from 'react';\nimport {css, cx} from 'emotion';\nimport '../../statics/zwicon.css';\nimport * as refer from '../../statics/refer';\nimport {handlePropagation} from '../../methods/assistFunctions'; // 用于禁用按钮点击。如果使用 button 的 disable 属性实现，会由于点击事件冒泡导致 Toolbar 被隐藏\n\nconst ToolButton = ({icon, onClick, children, disabled}) => {\n    return (<button onClick={disabled ? handlePropagation : onClick} className={cx(wrapper, {[disabled_style]: disabled})}>\n            <i className={'zwicon-' + icon} />\n            <span>{children}</span>\n        </button>);\n};\n\nexport default ToolButton;\n\n// CSS\nconst wrapper = css`\nmargin: 0 0.12em;\npadding: 0 0.24em;\n/* margin 用于增加间隔，padding 用于增大可点击区域 */\nbackground-color: transparent;\nborder: none;\noutline: none;\ncursor: pointer;\n\ni {\ndisplay: block;\nmargin-bottom: 0.12em;\nfont-size: 100%;\n}\nspan {\ndisplay: block;\nfont-size: 25%;\n}\n\n&:active {\ntransform: scale(0.95);\n}\n\n&:hover {\ncolor: var(${refer.THEME_ASSIST});\n}\n`;\n\nconst disabled_style = css`\n&, &:hover {\ncolor: #cccccc;\n}\n\ncursor: not-allowed;\n`;","import React, {useEffect, useContext, useRef} from 'react';\nimport {css} from 'emotion';\nimport {context} from '../../context';\nimport {setTitle} from '../../context/reducer/global/actionCreator';\nimport * as refer from '../../statics/refer';\n\nconst MindmapTitle = () => {\n    const self = useRef();\n    const {global: {state: {title}, dispatch}} = useContext(context);\n\n    useEffect(() => {\n        document.title = `RMind - ${title}`;\n        localStorage.setItem('title', title);\n    }, [title]);\n\n    const handleKeydown = event => {\n        switch (event.key.toUpperCase()) {\n            case 'ESCAPE':\n                self.current.textContent = title;\n            case 'ENTER':\n                self.current.blur();\n                break;\n            default:\n                break;\n        }\n    };\n\n    const handleBlur = () => {\n        let new_title = self.current.textContent.trim();\n        if (new_title === '') {\n            new_title = title;\n        }\n        if (new_title.length > 30) {\n            new_title = new_title.slice(0, 30);\n        }\n        self.current.textContent = new_title; // contentEditable 组件内容不会被自动更新\n        dispatch(setTitle(new_title));\n    };\n\n    return (<span ref={self} className={wrapper} contentEditable=\"true\" suppressContentEditableWarning=\"true\"\n                  spellCheck=\"false\"\n                  onKeyDown={handleKeydown} onBlur={handleBlur}>{title}</span>);\n};\n\nexport default MindmapTitle;\n\n// CSS\nconst wrapper = css`\nalign-self: center;\npadding: 0 10px; /* 两侧 padding 用于增大组件点击区域，避免将光标定位至首尾处时意外 blur */\ncolor: var(${refer.THEME_DARK});\nfont-size: 20px;\nfont-weight: 700;\nborder-bottom: 2px solid transparent;\noutline: none;\ntransition: 0.2s;\n\n&:read-write {\ncursor: edit;\n}\n\n&:focus {\nborder-bottom: 2px solid var(${refer.THEME_ASSIST});\n}\n`;","import React, {useContext} from 'react';\nimport {context} from '../../../context';\nimport {setTitle} from '../../../context/reducer/global/actionCreator';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport defaultMindmap from '../../../statics/defaultMindmap';\nimport * as refer from '../../../statics/refer';\nimport {ButtonSet, MainButton, Shortcut, Highlight, Annotation} from '../common/styledComponents';\n\nconst New = ({handleClosePopup, handleDownload}) => {\n    const {global:{dispatch}} = useContext(context);\n    const {setMindmap} = useMindmap();\n\n    const handleNewFile = () => {\n        setMindmap(defaultMindmap, true);\n        dispatch(setTitle(refer.DEFAULT_TITLE));\n        handleClosePopup();\n    };\n\n    return (<div>\n        <Highlight>新建导图后，当前思维导图的数据将丢失。</Highlight>\n        <Annotation>要保存当前数据，请将思维导图<Shortcut onClick={handleDownload}>下载至本地</Shortcut>。</Annotation>\n        <ButtonSet>\n            <MainButton onClick={handleNewFile}>新建导图</MainButton>\n            <button onClick={handleClosePopup}>取消</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default New;","import md5 from 'md5';\nimport * as refer from '../statics/refer';\n\nconst getLayerAndText = (line, format) => {\n    let layer, text;\n    switch (format) {\n        case 'MD': {\n            if (line.match(/^#{1,6} /)) {\n                layer = line.match(/^#{1,6} /)[0].length - 2;\n                text = line.replace(/^#{1,6} /, '');\n            } else if (line.match(/^\\s*[-*] /)) {\n                layer = line.match(/^\\s*[-*] /)[0].length + 4;\n                text = line.replace(/^\\s*[-*] /, '');\n            }\n            return {layer, text};\n        }\n        case 'TXT': {\n            layer = line.match(/^\\s*/)[0].length;\n            text = line.replace(/^\\s*/, '');\n            return {layer, text};\n        }\n        default:\n            return {layer, text};\n    }\n};\n\nconst buildNodeFromText = (data_array, format, cur_layer, cur_text = '') => {\n    if (data_array.length === 0 && cur_layer === -1) {\n        return;\n    }\n    if (cur_layer === -1) {\n        const root_data = getLayerAndText(data_array.shift(), format);\n        cur_layer = root_data.layer || 0; // 一定的鲁棒性\n        cur_text = root_data.text || '未知数据';\n    }\n    const cur_node = {\n        id: cur_layer === 0 ? refer.ROOT_NODE_ID : md5('' + Date.now() + Math.random() + cur_text),\n        text: cur_text,\n        showChildren: true,\n        children: []\n    };\n    while (data_array.length > 0) {\n        const {layer, text} = getLayerAndText(data_array[0], format);\n        if (layer <= cur_layer) {\n            break;\n        }\n        data_array.shift();\n        if (layer) { // 排除掉无法匹配的情况\n            cur_node.children.push(buildNodeFromText(data_array, format, layer, text));\n        }\n    }\n    return cur_node;\n};\n\nconst copyNodeData = (format, target_node, source_node, is_root_node) => {\n    switch (format) {\n        case 'KM':\n            target_node.id = is_root_node ? refer.ROOT_NODE_ID : source_node.data.id;\n            target_node.text = source_node.data.text;\n            target_node.showChildren = source_node.data.expandState !== 'collapse';\n            target_node.children = source_node.children.map(child => copyNodeData(format, {}, child));\n            return target_node;\n        default:\n            return;\n    }\n};\n\nconst buildNodeFromJSON = (json, format) => {\n    switch (format) {\n        case 'RMF':\n            return JSON.parse(json);\n        case 'KM': {\n            let km_mindmap = JSON.parse(json);\n            return copyNodeData(format, {}, km_mindmap.root, true);\n        }\n        default:\n            return;\n    }\n};\n\nexport default (import_data, format) => {\n    let mindmap;\n    switch (format) {\n        case 'MD':\n        case 'TXT':\n            const data_array = import_data.split('\\n').filter(line => line);\n            mindmap = buildNodeFromText(data_array, format, -1);\n            break;\n        default:\n            mindmap = buildNodeFromJSON(import_data, format);\n            break;\n    }\n    return mindmap;\n}","import React, {useContext} from 'react';\nimport {css} from 'emotion';\nimport {context} from '../../../context';\nimport {setTitle} from '../../../context/reducer/global/actionCreator';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport {ROOT_NODE_ID} from '../../../statics/refer';\nimport mindmapParser from '../../../methods/mindmapParser';\nimport {ButtonSet, MainButton, Shortcut, Highlight, Annotation} from '../common/styledComponents';\n\nconst Open = ({handleClosePopup, handleDownload}) => {\n    const {global: {dispatch}} = useContext(context);\n    const {setMindmap} = useMindmap();\n\n    const handleOpenFile = () => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = '.rmf,.km,.txt,.md';\n        input.addEventListener('change', event => {\n            const file = event.target.files[0],\n                file_name = file.name;\n            let dot_index = file_name.length - 1;\n            while (dot_index > 0 && file_name[dot_index] !== '.') {\n                dot_index--;\n            }\n            const format = file_name.slice(dot_index + 1).toUpperCase(),\n                title = file_name.slice(0, dot_index);\n            const file_reader = new FileReader();\n            file_reader.onload = event => {\n                const str = event.target.result;\n                const mindmap = mindmapParser(str, format);\n                if (mindmap && mindmap.id === ROOT_NODE_ID) {\n                    setMindmap(mindmap, true);\n                    dispatch(setTitle(title));\n                    handleClosePopup();\n                } else {\n                    alert('不是有效的思维导图文件');\n                }\n            };\n            file_reader.readAsText(file);\n        });\n        input.click();\n    };\n\n    return (<div>\n        <Highlight>打开其他文件后，当前思维导图的数据将丢失。</Highlight>\n        <Annotation>要保存当前数据，请将思维导图<Shortcut onClick={handleDownload}>下载至本地</Shortcut>。</Annotation>\n        <p className={sub_title}>支持打开格式：</p>\n        <ul className={list_wrapper}>\n            <li>RMind（.rmf）</li>\n            <li>百度脑图（.km）</li>\n            <li>Markdown（.md）</li>\n            <li>文本文件（.txt）</li>\n        </ul>\n        <ButtonSet>\n            <MainButton onClick={handleOpenFile}>打开文件</MainButton>\n            <button onClick={handleClosePopup}>取消</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default Open;\n\n// CSS\nconst sub_title = css`\nmargin: 20px 0 5px;\npadding-bottom: 8px;\nborder-bottom: 1px solid #dddddd;\n`;\n\nconst list_wrapper = css`\nmargin: 0;\npadding: 0;\nfont-size: 90%;\nlist-style: circle inside;\n\nli {\nline-height: 2em;\n}\n`;","import React from 'react';\nimport {css, cx} from 'emotion';\n\nconst ThemeListItem = ({theme, index, is_current, setTheme}) => {\n    const handleSetTheme = () => {\n        setTheme(index);\n    };\n\n    return (<li className={cx(wrapper, {[current_style]: is_current})} onClick={handleSetTheme}>\n        <div style={{backgroundColor: theme.ex}} />\n        <div style={{backgroundColor: theme.dark}} />\n        <div style={{backgroundColor: theme.main}} />\n        <div style={{backgroundColor: theme.light}} />\n    </li>);\n};\n\nexport default ThemeListItem;\n\n// CSS\n\nconst wrapper = css`\ndisplay: flex;\nbox-sizing: border-box;\nwidth: 47%;\nheight: 25px;\nmargin: 8px 0;\nborder-radius: 18px;\ncursor: pointer;\noverflow: hidden;\n\ndiv {\nflex: 1;\nz-index: -1;\n}\n`;\n\nconst current_style = css`\nbox-shadow: 0 0 0 4px #ffffff, 0 0 0 6px #000000; /* 两层阴影实现框选效果，也可用 inset 阴影 + border-color 做 */\n`;\n","import React, {useEffect} from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../../../customHooks/useTheme';\nimport {ButtonSet, Highlight} from '../../common/styledComponents';\nimport ThemeListItem from './ThemeListItem';\n\nconst Theme = ({handleClosePopup}) => {\n    const {theme_index, theme_list, setTheme} = useTheme();\n\n    useEffect(() => {\n        localStorage.setItem('theme_index', theme_index);\n    }, [theme_index]);\n\n    return (<div>\n        <Highlight>请选择主题：</Highlight>\n        <ul className={list_wrapper}>\n            {theme_list.map((theme, index) => <ThemeListItem key={theme.main} theme={theme} index={index}\n                                                             is_current={theme_index === index} setTheme={setTheme} />)}\n        </ul>\n        <ButtonSet>\n            <button onClick={handleClosePopup}>完成</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default Theme;\n\n// CSS\nconst list_wrapper = css`\ndisplay: flex;\njustify-content: space-between;\nflex-wrap: wrap;\npadding: 0;\nlist-style: none;\n`;","import React, {Suspense, lazy} from 'react';\nimport {css} from 'emotion';\nimport * as popupType from './common/popupType';\nimport {handlePropagation} from '../../methods/assistFunctions';\nimport New from './subComponents/New';\nimport Open from './subComponents/Open';\nimport Theme from './subComponents/Theme';\n\nconst getContentComponent = type => {\n    switch (type) {\n        case popupType.NEW:\n            return New;\n        case popupType.OPEN:\n            return Open;\n        case popupType.EXPORT:\n            return lazy(() => import('./subComponents/Export'));\n        case popupType.THEME:\n            return Theme;\n        default:\n            return;\n    }\n};\n\nconst Popup = ({type, handleClosePopup, handleDownload}) => {\n    const Content = getContentComponent(type);\n    return (<div className={wrapper} onClick={handlePropagation}>\n        <div className={content_wrapper}>\n            <i className={'zwicon-close-circle ' + close_button} onClick={handleClosePopup} />\n            <Suspense fallback={<></>}>\n                <Content handleClosePopup={handleClosePopup} handleDownload={handleDownload} />\n            </Suspense>\n        </div>\n        <div className={overlay} onClick={handleClosePopup} />\n    </div>);\n};\n\nexport default Popup;\n\n// CSS\nconst wrapper = css`\nposition: fixed;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n`;\n\nconst content_wrapper = css`\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\ntop:30%;\nleft:0;\nright:0;\nwidth: 400px;\nmargin: auto;\npadding: 40px 40px 20px;\nfont-size: 1rem;\nbackground-color: #ffffff;\nborder-radius: 20px;\nz-index: 1;\n`;\n\nconst close_button = css`\nposition: absolute;\ntop: 10px;\nright: 10px;\nfont-size: 25px;\nfont-weight: 700;\n\n&:active {\ntransform: scale(0.95)\n}\n`;\n\nconst overlay = css`\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\nbackground: #000000;\nopacity: 0.2;\n`;\n","export const NONE = 'none';\nexport const NEW = 'new';\nexport const OPEN = 'open';\nexport const EXPORT = 'export';\nexport const THEME = 'theme';","import React, { useState, useContext } from 'react';\nimport { css } from 'emotion';\nimport { context } from '../../context';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useHistory from '../../customHooks/useHistory';\nimport useZoom from '../../customHooks/useZoom';\nimport useMove from '../../customHooks/useMove';\nimport * as refer from '../../statics/refer';\nimport * as popupType from '../../components/Popup/common/popupType';\nimport { handlePropagation, downloadFile } from '../../methods/assistFunctions'; // 防止 Mindmap 中的选中状态由于冒泡被清除\nimport ToolButton from '../../components/ToolButton';\nimport MindmapTitle from '../../components/MindmapTitle';\nimport Popup from '../../components/Popup';\nimport html2canvas from 'html2canvas';\nimport mindmapExporter from '../../methods/mindmapExporter';\nimport axios from 'axios';\n\nconst Nav = () => {\n    const [popup, setPopup] = useState(popupType.NONE);\n    const { mindmap: { state: mindmap }, history: { state: history }, global: { state: { title } } } = useContext(context);\n    const { expandAll } = useMindmap();\n    const { zoomIn, zoomOut, zoomReset } = useZoom();\n    const { moveXY, moveReset } = useMove()\n    const { undoHistory, redoHistory } = useHistory();\n\n    const handleClosePopup = () => {\n        setPopup(popupType.NONE);\n    };\n\n    const handleNewFile = () => {\n        setPopup(popupType.NEW);\n    };\n\n    const handleDownload = () => {\n        \n        \n        html2canvas(document.getElementById(refer.MINDMAP_ID)).then(canvas => {\n            let url = canvas.toDataURL('image/png');\n            downloadFile(url, `${title}.png`);\n            const data = {content:mindmapExporter(mindmap, \"KM\")}\n            alert(data)\n            axios.post(\"http://localhost:4000/save\", data).then(() => alert(`Mindmap saved`))\n              .catch(err => {\n                alert(err)})\n        });\n    };\n\n    const handleOpenFile = () => {\n        setPopup(popupType.OPEN);\n    };\n\n    const handleExport = () => {\n        setPopup(popupType.EXPORT);\n    };\n\n    const handleTheme = () => {\n        setPopup(popupType.THEME);\n    };\n\n    const handleUndo = () => {\n        undoHistory();\n    };\n\n    const handleRedo = () => {\n        redoHistory();\n    };\n\n    const handleExpand = () => {\n        expandAll(refer.ROOT_NODE_ID);\n    };\n\n    const handleZoom = (zoom) => {\n        console.log('缩放', zoom ? zoom : '还原')\n        switch (zoom) {\n            case 'in':\n                zoomIn()\n                break;\n            case 'out':\n                zoomOut()\n                break;\n            default:\n                zoomReset()\n        }\n    }\n\n    const handleMove = (move) => {\n        console.log('移动', move ? move : '还原')\n        switch (move) {\n            case 'up':\n                moveXY(0,-5)\n                break;\n            case 'down':\n                moveXY(0,5)\n                break;\n            case 'left':\n                moveXY(-5,0)\n                break;\n            case 'right':\n                moveXY(5,0)\n                break;\n            default:\n                moveReset()\n        }\n    }\n\n    return (<nav className={wrapper}>\n        <section className={section} onClick={handlePropagation}>\n            <ToolButton icon={'add-item-alt'} onClick={handleNewFile}>新建</ToolButton>\n            <ToolButton icon={'folder-open'} onClick={handleOpenFile}>打开</ToolButton>\n            <ToolButton icon={'file-download'} onClick={handleDownload}>下载至本地</ToolButton>\n            <ToolButton icon={'duplicate'} onClick={handleExport}>导出</ToolButton>\n            <ToolButton icon={'palette'} onClick={handleTheme}>主题</ToolButton>\n            <ToolButton icon={'plus-circle'} onClick={() => handleZoom('in')}>放大</ToolButton>\n            <ToolButton icon={'minus-circle'} onClick={() => handleZoom('out')}>缩小</ToolButton>\n            <ToolButton icon={'rotate-left'} onClick={() => handleZoom()}>还原</ToolButton>\n        </section>\n        <section className={section}>\n            <MindmapTitle />\n        </section>\n        <section className={section} onClick={handlePropagation}>\n            <ToolButton icon={'rotate-left'} onClick={() => handleMove()}>还原</ToolButton>\n            <ToolButton icon={'arrow-left'} onClick={() => handleMove('left')}>左</ToolButton>\n            <ToolButton icon={'arrow-up'} onClick={() => handleMove('up')}>上</ToolButton>\n            <ToolButton icon={'arrow-down'} onClick={() => handleMove('down')}>下</ToolButton>\n            <ToolButton icon={'arrow-right'} onClick={() => handleMove('right')}>右</ToolButton>\n            <ToolButton icon={'undo'} disabled={history.undo.length === 0} onClick={handleUndo}>撤销</ToolButton>\n            <ToolButton icon={'redo'} disabled={history.redo.length === 0} onClick={handleRedo}>重做</ToolButton>\n            <ToolButton icon={'scale'} onClick={handleExpand}>展开所有节点</ToolButton>\n        </section>\n        {popup !== popupType.NONE &&\n            <Popup type={popup} handleClosePopup={handleClosePopup} handleDownload={handleDownload} />}\n    </nav>);\n};\n\nexport default Nav;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\njustify-content: space-between;\nposition: fixed;\ntop:0;\nleft:0;\nright:0;\nheight: 56px;\npadding: 0 50px;\nfont-size: 25px;\nbackground-color: #ffffff;\nbox-shadow: 0 0px 2px #aaaaaa;\nz-index: 10;\n`;\n\nconst section = css`\ndisplay: flex;\n`;","import React, {useState,useEffect}from 'react'\r\nimport './style.css'\r\n\r\n\r\n\r\nconst Register=()=>{\r\n  const [formData, setFormData] = useState({\r\n    show:true,\r\n    name:'',\r\n    email:'',\r\n    password:'',\r\n    password2:''\r\n  })\r\n  useEffect(() => {\r\n    var div = document.getElementById('fullscreen-container');\r\n    if(!show)\r\n    if (div.style.display !== 'none') {\r\n        div.style.display = 'none';\r\n    }\r\n    else{\r\n      div.style.display = 'block';\r\n    }\r\n      } )   // Update the document title using the browser API    document.title = `You clicked ${count} times`;  });\r\n  const {show,name,email,password,password2}=formData\r\n  const onClick = () => {\r\n    setFormData({...formData,show:false})\r\n  }\r\n  const onChange=e=> setFormData({...formData,[e.target.name]:e.target.value})\r\n  const onSubmit=e=> {\r\n    e.preventDefault();\r\n    if(password!==password2)\r\n    alert('Passwords do not match')\r\n    else \r\n   alert(formData)\r\n  }\r\n\r\n  if (show) {\r\n    return (\r\n      <div id=\"fullscreen-container\">\r\n        <div className=\"form-popup\">\r\n          <button className=\"close\" onClick={onClick} >x</button>\r\n          <h1 className=\"large text-primary\">Sign Up</h1>\r\n          <p className=\"lead\"><i className=\"fas fa-user\"></i> Create Your Account</p>\r\n          <form className=\"form\" onSubmit={e => onSubmit(e)}>\r\n            <div className=\"form-group\">\r\n              <input autoFocus type=\"text\" placeholder=\"Name\" name=\"name\" value={name} onChange={e => onChange(e)} required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input autoFocus type=\"email\" placeholder=\"Email Address\" value={email} name=\"email\" onChange={e => onChange(e)} required />\r\n              <br />\r\n              <small className=\"form-text\"\r\n              >This site uses Gravatar so if you want a profile image, use a\r\n                Gravatar email</small\r\n              >\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input\r\n                autoFocus\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={e => onChange(e)}\r\n                minLength=\"6\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input\r\n                autoFocus\r\n                type=\"password\"\r\n                placeholder=\"Confirm Password\"\r\n                name=\"password2\"\r\n                value={password2}\r\n                onChange={e => onChange(e)}\r\n                minLength=\"6\"\r\n              />\r\n            </div>\r\n            <input type=\"submit\" className=\"btn btn-primary\" value=\"Register\" />\r\n          </form>\r\n          <p className=\"my-1\">\r\n            Already have an account? <a href=\"login.html\">Sign In</a>\r\n          </p>\r\n        </div>\r\n      </div>)\r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n  else {\r\n    return (null)\r\n  }\r\n}\r\nexport default Register\r\n","import * as refer from '../statics/refer';\n\nexport default (nodeStatus, mindmapHook, historyHook) => {\n    const {addChild, addSibling, editNode, deleteNode, toggleChildren, selectNode} = mindmapHook;\n\n    const handleKeyEventWithNode = event => {\n        switch (event.key.toUpperCase()) {\n            case 'TAB':\n                addChild(nodeStatus.cur_select);\n                break;\n            case 'ENTER':\n                event.preventDefault(); // 防止 enter 的点击行为\n                addSibling(nodeStatus.cur_select, nodeStatus.cur_node_info.parent.id);\n                break;\n            case 'F2':\n                editNode(nodeStatus.cur_select);\n                break;\n            case 'BACKSPACE':\n            case 'DELETE':\n                deleteNode(nodeStatus.cur_select, nodeStatus.cur_node_info.parent.id);\n                break;\n            case ' ':\n                event.preventDefault(); // 默认行为会导致画面移动，因此 prevent，下同\n                toggleChildren(nodeStatus.cur_select, !nodeStatus.cur_node_info.showChildren); // Boolean('false') === true\n                break;\n            case 'ARROWLEFT':\n                event.preventDefault();\n                if (nodeStatus.cur_node_info.parent === refer.ROOT_PARENT) {\n                    if (nodeStatus.cur_node_info.children.length > 3) {\n                        selectNode(nodeStatus.cur_node_info.children[Math.trunc(nodeStatus.cur_node_info.children.length / 2)].id);\n                    }\n                } else {\n                    if (!nodeStatus.cur_node_info.on_left) {\n                        selectNode(nodeStatus.cur_node_info.parent.id);\n                    } else if (nodeStatus.cur_node_info.children.length > 0) {\n                        selectNode(nodeStatus.cur_node_info.children[0].id);\n                    }\n                }\n                break;\n            case 'ARROWRIGHT':\n                event.preventDefault();\n                if (nodeStatus.cur_node_info.on_left) {\n                    selectNode(nodeStatus.cur_node_info.parent.id);\n                } else if (nodeStatus.cur_node_info.children.length > 0) {\n                    selectNode(nodeStatus.cur_node_info.children[0].id);\n                }\n                break;\n            case 'ARROWUP': {\n                event.preventDefault();\n                const cur_index = nodeStatus.cur_node_info.parent.children.findIndex(child => child.id === nodeStatus.cur_node_info.id);\n                if (cur_index > 0) {\n                    selectNode(nodeStatus.cur_node_info.parent.children[cur_index - 1].id);\n                }\n                break;\n            }\n            case 'ARROWDOWN': {\n                event.preventDefault();\n                const cur_index = nodeStatus.cur_node_info.parent.children.findIndex(child => child.id === nodeStatus.cur_node_info.id),\n                    last_index = nodeStatus.cur_node_info.parent.children.length - 1;\n                if (cur_index < last_index) {\n                    selectNode(nodeStatus.cur_node_info.parent.children[cur_index + 1].id);\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    return event => {\n        if (nodeStatus.cur_edit === '') {\n            const is_on_mac = navigator.platform.toUpperCase().startsWith('MAC');\n            const combine_key_pressed = is_on_mac ? event.metaKey : event.ctrlKey;\n            if (combine_key_pressed && event.key.toUpperCase() === 'Z') {\n                if (event.shiftKey) {\n                    historyHook.redoHistory();\n                } else {\n                    historyHook.undoHistory();\n                }\n            }\n        }\n        if (nodeStatus.cur_select !== '') {\n            try {\n                handleKeyEventWithNode(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n            } catch (e) {\n                alert('当前的节点信息存在问题，请重新选择节点');\n            }\n        }\n    };\n};","const mousemoveInfo = {\n    startX: 0,\n    startY: 0,\n}\n\nexport default (propHook, zoomRate,normalizeXY) => {\n    const { zoomIn, zoomOut, moveXY } = propHook;\n    const getWheelDelta = (e) => {\n        if (e.wheelDelta) {\n            return e.wheelDelta\n        } else {\n            return -e.wheelDelta * 40\n        }\n    }\n\n    const handleWhellEventWithkey = e => {\n\n        if (e.ctrlKey === true && e.wheelDelta) {\n            e.preventDefault()\n            e.stopPropagation()\n            getWheelDelta(e) > 0 ? zoomIn(e.clientX,e.clientY) : zoomOut(e.clientX,e.clientY)\n            return;\n        }\n\n        if (e.buttons === 1 && e.type === 'mousedown') {\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n            return\n        }\n\n        if (e.altKey && e.buttons === 1) {\n            e.stopPropagation()\n            const { startX, startY } = mousemoveInfo;\n            const movedX = (e.clientX - startX);\n            const movedY = (e.clientY - startY);\n            moveXY(movedX / 10 / normalizeXY, movedY / 10)\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n        }\n    };\n\n    return event => {\n        try {\n            handleWhellEventWithkey(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n        } catch (e) {\n            alert('移动或缩放功能异常',e);\n        }\n    };\n};","import * as actionTypes from './actionTypes';\n\nexport const toggelPanelShow = (isShow) => ({\n    type: actionTypes.TOGGLE_PANEL_SHOW,\n    data: {\n        isShow,\n    }\n});\n\n\n// export const openPanel = theme_index => ({\n//     type: actionTypes.OPEN_PANEL,    \n// });","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as editPanelAction from '../context/reducer/editPanel/actionCreator';\n\n\nconst useEditPanel = () => {\n    const {editPanel: {state:epState,dispatch: epDispatch}} = useContext(context);\n    return {\n        toggelPanelShow: (bool) => {\n            if(epState.isShow===bool){\n                return ;    \n            }\n            epDispatch(editPanelAction.toggelPanelShow(bool));\n        },\n        savePanel: (bool) => {\n            epDispatch(editPanelAction.toggelPanelShow(bool));\n        },\n    }\n};\n\nexport default useEditPanel;","import React from 'react';\nimport {css} from 'emotion';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport useEditPanel from '../../../customHooks/useEditPanel';\nimport {handlePropagation} from '../../../methods/assistFunctions';\nimport ToolButton from '../../ToolButton';\n\nconst Toolbar = ({layer, node, parent}) => {\n    const mindmapHook = useMindmap();\n    const editPanelHook=useEditPanel();\n\n    const handleAddChild = () => {\n        mindmapHook.addChild(node.id);\n        \n    };\n\n    const handleAddSibling = () => {\n        mindmapHook.addSibling(node.id, parent.id);\n       \n    };\n\n    const handleDeleteNode = () => {\n        mindmapHook.deleteNode(node.id, parent.id);\n       \n    };\n\n    const handleEditNode = () => {\n        mindmapHook.editNode(node.id);\n    };\n\n    const handleToggleChildren = () => {\n        mindmapHook.toggleChildren(node.id, !node.showChildren);\n    };\n\n    const handleAddInfo=()=>{\n        mindmapHook.selectNode(node.id);\n        editPanelHook.toggelPanelShow(true);\n    }\n\n    return (<div className={wrapper} onClick={handlePropagation}>\n        <ToolButton icon={'git-commit'} onClick={handleAddChild}>添加子节点</ToolButton>\n        <ToolButton icon={'git-fork'} onClick={handleAddSibling} disabled={layer < 1}>添加兄弟节点</ToolButton>\n        <ToolButton icon={'delete'} onClick={handleDeleteNode} disabled={layer < 1}>删除</ToolButton>\n        <ToolButton icon={'edit-pencil'} onClick={handleEditNode}>编辑</ToolButton>\n        <ToolButton icon={'edit-pencil'} onClick={handleAddInfo}>添加备注</ToolButton>\n        <ToolButton icon={'split-v'} onClick={handleToggleChildren} disabled={layer < 1 || node.children.length === 0}>显隐子节点</ToolButton>\n    </div>);\n};\n\nexport default Toolbar;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nposition: absolute;\nbottom: calc(100% + 5px);\nleft:0;\nbackground-color: #ffffff;\nwidth: max-content;\nheight: 50px;\npadding: 0 8px;\nfont-size: 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\nbox-shadow: 5px 5px 10px #aaaaaa;\n`;","import React, {useEffect, useRef} from 'react';\nimport {css} from 'emotion';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport {handlePropagation} from '../../../methods/assistFunctions';\n\nconst InputDiv = ({node_id, children}) => {\n    const self = useRef();\n    const {changeText, selectNode} = useMindmap();\n\n    const handleKeydown = event => {\n        switch (event.key.toUpperCase()) {\n            case 'ESCAPE':\n                self.current.textContent = children;\n            case 'ENTER':\n                self.current.blur();\n                break;\n            default:\n                break;\n        }\n    };\n\n    const handleBlur = () => {\n        changeText(node_id, self.current.textContent);\n        selectNode(node_id);\n    };\n\n    useEffect(() => {\n        self.current.focus();\n        const selection = document.getSelection();\n        selection.selectAllChildren(self.current);\n    }, []);\n\n    return (<div className={wrapper} ref={self} contentEditable=\"true\" suppressContentEditableWarning=\"true\"\n                 onClick={handlePropagation} onKeyDown={handleKeydown} onBlur={handleBlur}>{children}</div>);\n};\n\nexport default InputDiv;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nwidth: fit-content;\nmin-width: 1em;\nmax-width: 10em;\nheight: fit-content;\nmargin: auto;\npadding: 10px;\ncolor: #333333;\nbackground-color: #ffffff;\nbox-shadow: 0 0 20px #aaaaaa;\nborder-radius: 5px;\noutline: none;\nz-index: 3;\nuser-select: text;\n`;","import React, { useState, useEffect } from 'react';\nimport marked from 'marked';\nimport './index.css'\n\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/github.css';\n\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    },\n    pedantic: false,\n    gfm: false,\n    breaks: false,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false,\n    xhtml: false\n});\n\nfunction MdPreview(props) {\n    const { mdtext='' } = props;\n\n    //   const [example, setExample] = useState('initialValue');\n    //   useEffect(() => {\n    //     // 使用浏览器的 API 更新页面标题\n    //     // document.title = `You clicked count times`;\n    //   });\n    useEffect(() => {        \n        document.querySelectorAll('pre code').forEach((block) => {\n          hljs.highlightBlock(block);\n        });      \n      },[mdtext]);\n\n    return (\n        <div className=\"MdPreview\">\n            <i className=\"zwicon-note\" style={{ fontSize: 20 }}></i>\n\n            <div className=\"MdPreview-Content\" dangerouslySetInnerHTML={{ __html: marked(mdtext) }} />\n        </div>\n    )\n}\n\nexport default MdPreview;","import React, {useEffect, useRef, useContext} from 'react';\nimport {css, cx} from 'emotion';\nimport {context} from '../../context';\nimport useMindmap from \"../../customHooks/useMindmap\";\nimport {getNodeInfo} from '../../context/reducer/nodeStatus/actionCreator';\nimport * as refer from '../../statics/refer';\nimport {handlePropagation} from '../../methods/assistFunctions';\nimport Toolbar from './subComponents/Toolbar';\nimport InputDiv from './subComponents/InputDiv';\nimport MdPreview from '../mdPreview';\n\nconst Node = ({layer, node, parent, node_refs, on_left}) => {\n    const self = useRef();\n    const {nodeStatus: {state: nodeStatus, dispatch: nDispatch}, editPanel: {state:epState}} = useContext(context);\n    const mindmapHook = useMindmap();\n\n\n    const handleSelectNode = () => {\n        mindmapHook.selectNode(node.id, true);\n    };\n\n    const handleEditNode = () => {\n        mindmapHook.editNode(node.id);\n    };\n\n    const handleToggleChildren = () => {\n        mindmapHook.toggleChildren(node.id, !node.showChildren);\n        mindmapHook.clearNodeStatus(); // 避免出现当前选择的节点被隐藏后仍然可以操作的情况\n    };\n\n    useEffect(() => {\n        node_refs.add(self);\n        return () => {\n            node_refs.delete(self);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (nodeStatus.cur_select === node.id) {\n            self.current.scrollIntoView({behavior: 'smooth', block: 'center', inline: 'center'});\n            nDispatch(getNodeInfo(node, parent, on_left));\n        }\n    }, [nodeStatus.cur_select, node]);    \n\n    // 为避免事件冒泡导致干扰，点击事件放在了 dropArea div，最外层 Node div 用于阻止冒泡\n    return (<div\n        className={cx(common_style, specific_style[layer < 3 ? layer : 3], {[seleted_style]: nodeStatus.cur_select === node.id})}\n        draggable={layer > 0 && nodeStatus.cur_edit !== node.id}\n        data-tag={on_left ? refer.LEFT_NODE : refer.RIGHT_NODE}\n        data-parent={parent.id}\n        data-show-children={node.showChildren}\n        id={node.id}\n        ref={self}\n        onClick={handlePropagation}>\n        {nodeStatus.cur_edit === node.id &&\n        <InputDiv node_id={node.id}>{node.text}</InputDiv>}\n        <div className={drop_area} data-tag={refer.DROP_AREA} onClick={handleSelectNode} onDoubleClick={handleEditNode} />\n        <p>{node.text} {node.info && <MdPreview mdtext={node.info}/>}</p>\n        {(layer > 0 && node.children.length > 0) &&\n        <button className={cx(toggle_button, (on_left ? button_left : button_right))} onClick={handleToggleChildren}>{node.showChildren ? '-' : '+'}</button>}\n        {(nodeStatus.cur_select === node.id && nodeStatus.select_by_click) && !epState.isShow &&\n        <Toolbar layer={layer} node={node} parent={parent} />}\n    </div>);\n};\n\nexport default Node;\n\n// CSS\nconst style_selected_border = `\nbox-shadow: 0 0 0 3px #ffffff, 0 0 0 6px var(${refer.THEME_EX}); /* 双层阴影实现选中框 */\n`;\n\nconst common_style = css`\nposition: relative;\nmin-width: 10px;\nmax-width: 200px;\nmargin: 20px 40px;\npadding: 15px;\nbackground-color: #ffffff;\nborder: 1px solid var(${refer.THEME_MAIN});\nborder-radius: 15px;\ncursor: pointer;\n\np {\nmin-height: 18px; /* 当 p 中没有内容时撑起元素 */\nmargin: 0;\nline-height: 1.5em;\noverflow-wrap: break-word;\n}\n\n&:hover {\n${style_selected_border}\n}\n\n&.ondrag {\nbackground-color: var(${refer.THEME_EX});\np {\ncolor: #ffffff;\n}\n}\n`;\n\nconst specific_style = [ // div&用于提高 CSS 权重\n    css`\ndiv& {\npadding: 15px 20px;\ncolor: #ffffff;\nfont-size: 120%;\nfont-weight: 700;\nbackground-color: var(${refer.THEME_DARK});\nborder:2px solid var(${refer.THEME_EX});\n}\n    `,\n    css`\ndiv& {\nbackground-color: var(${refer.THEME_LIGHT});\n}\n    `,\n    css`\ndiv& {\npadding: 10px 15px;\n}\n    `,\n    css`\ndiv& {\npadding: 0 15px;\nborder: none;\np {\nfont-size: 90%;\n}\n}\n    `\n];\n\nconst seleted_style = css`\nz-index: 1; /* 提高 Node 高度，防止被遮挡 */\n${style_selected_border}\n`;\n\n// 兼有防止文字被选中的功能\nconst drop_area = css`\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n`;\n\nconst toggle_button = css`\nposition: absolute;\ntop:0;\nbottom: 0;\nwidth: 20px;\nheight: 20px;\nmargin: auto 0;\npadding: 0;\ntext-align: center;\nbackground-color: #ffffff;\nborder: 1px solid #cccccc;\nborder-radius: 50%;\noutline: none;\n`;\n\nconst button_left = css`\nleft: -15px;\n`;\n\nconst button_right = css`\nright: -15px;\n`;","import React from 'react';\nimport {css, cx} from 'emotion';\nimport Node from '../Node';\n\nconst SubNode = ({layer, node, node_refs, parent, on_left}) => {\n    return (<div className={cx(wrapper, {[left_style]: on_left})}>\n        <Node layer={layer} node={node} node_refs={node_refs} parent={parent} on_left={on_left} />\n        <div>\n            {node.showChildren && node.children.map(sub_node => <SubNode key={sub_node.id} layer={layer + 1}\n                                                                         node={sub_node} node_refs={node_refs}\n                                                                         parent={node} on_left={on_left} />)}\n        </div>\n    </div>);\n};\n\nexport default SubNode;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nalign-items: center;\n`;\n\nconst left_style = css`\nflex-direction: row-reverse;\n`;","import React, {useEffect, useRef} from 'react';\nimport {css} from 'emotion';\nimport {ROOT_PARENT} from '../../statics/refer';\nimport Node from '../Node';\nimport SubNode from '../SubNode';\n\nconst RootNode = ({layer, node, node_refs}) => {\n    const root_node = useRef();\n\n    const total = node.children.length,\n        half = total > 3 ? Math.trunc(total / 2) : total;\n\n    // 载入时使根节点居中。暂时没发现除了多包一层 div 之外更好的解决方法\n    useEffect(() => {\n        root_node.current.scrollIntoView({block: 'center', inline: 'center'});\n    }, []);\n\n    return (<div className={wrapper}>\n        <div>\n            {node.showChildren && node.children.slice(half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node} on_left={true} />)}\n        </div>\n        <div ref={root_node}>\n            <Node layer={0} node={node} node_refs={node_refs} parent={ROOT_PARENT} />\n        </div>\n        <div>\n            {node.showChildren && node.children.slice(0, half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node}\n                on_left={false} />)}\n        </div>\n    </div>);\n};\n\nexport default RootNode;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nalign-items: center;\nwidth: max-content; /* max-content 才能保证正确读取布局 */\n`;","import * as refer from '../statics/refer';\n\nconst drawBezier = (ctx, from_x, from_y, to_x, to_y) => {\n    ctx.moveTo(from_x, from_y);\n    ctx.bezierCurveTo(from_x, to_y, 0.9 * to_x + 0.1 * from_x, to_y, to_x, to_y);\n};\n\nconst drawLine = (ctx, node, map) => {\n    const {id: parent_id, children} = node;\n    if (children.length > 0) {\n        const [parent_x_left, parent_x_right, parent_y] = map.get(parent_id);\n\n        children.forEach(child => {\n            const child_data = map.get(child.id);\n            if (child_data) {\n                const [child_x_left, child_x_right, child_y, child_tag] = child_data;\n                if (child_tag === refer.LEFT_NODE) {\n                    drawBezier(ctx, parent_x_left, parent_y, child_x_right, child_y);\n                } else {\n                    drawBezier(ctx, parent_x_right, parent_y, child_x_left, child_y);\n                }\n                drawLine(ctx, child, map);\n            }\n        })\n    }\n};\n\nexport const drawLineCanvas = (ctx, theme, mindmap, map) => {\n    ctx.beginPath();\n    ctx.lineWidth = '2';\n    ctx.strokeStyle = theme.main;\n    drawLine(ctx, mindmap, map);\n    ctx.stroke();\n    ctx.closePath();\n};\n\nexport const drawDragCanvas = (ctx, theme, child_id, parent_offset, child_offset, child_left_of_parent) => {\n    const virtual_rect_width = 50,\n        virtual_rect_height = 20;\n    ctx.beginPath();\n    ctx.strokeStyle = theme.main;\n    ctx.lineWidth = '2';\n    ctx.setLineDash([5, 5]);\n    let parent_x,\n        parent_y = (parent_offset.top + parent_offset.bottom) / 2,\n        child_x,\n        child_y = (child_offset.top + child_offset.bottom) / 2;\n    if (child_left_of_parent) {\n        parent_x = parent_offset.left;\n        child_x = child_offset.right;\n        ctx.strokeRect(child_x - virtual_rect_width, child_y - virtual_rect_height / 2, virtual_rect_width, virtual_rect_height);\n    } else {\n        parent_x = parent_offset.right;\n        child_x = child_offset.left;\n        ctx.strokeRect(child_x, child_y - virtual_rect_height / 2, virtual_rect_width, virtual_rect_height);\n    }\n    drawBezier(ctx, parent_x, parent_y, child_x, child_y);\n    ctx.stroke();\n    ctx.closePath();\n};","import * as refer from '../statics/refer';\nimport { findNode } from './assistFunctions';\nimport { drawDragCanvas } from './drawCanvas';\n\nconst getDomOffset = dom => {\n    const left = dom.offsetLeft,\n        right = left + dom.offsetWidth,\n        top = dom.offsetTop,\n        bottom = top + dom.offsetHeight;\n    return { left, right, top, bottom };\n};\n\nexport default (mindmap, drag_canvas, container, theme, mindmapHook,zoom,drag) => {\n    const { moveNode } = mindmapHook;\n\n    let node_id, parent_id, target_id, is_sibling,\n        children, children_offset_left, children_offset_right, children_offset_vertical,\n        parent_offset, parent_is_root,\n        container_left, container_top,container_width,container_height,\n        in_drop_area;\n\n    const resetVariables = () => {\n        node_id = '';\n        parent_id = '';\n        target_id = '';\n        is_sibling = false;\n\n        children = [];\n        children_offset_left = [];\n        children_offset_right = [];\n        children_offset_vertical = [];\n\n        parent_offset = undefined;\n        parent_is_root = false;\n\n        container_left = container.scrollLeft;\n        container_top = container.scrollTop - 56;\n        container_width = container.offsetWidth;\n        container_height = container.offsetHeight;\n\n        in_drop_area = false;\n    };\n\n    const handleContainerScroll = (e) => {\n        \n        container_left = container.scrollLeft;\n        container_top = container.scrollTop - 56; // 56 是 container（Main 组件）顶部 margin 值        \n    };\n\n    return [\n        \n        {\n            type: 'dragstart',\n            listener: event => {\n                resetVariables();\n                container.addEventListener('scroll', handleContainerScroll);\n                if (event.target && (event.target.dataset.tag === refer.LEFT_NODE || event.target.dataset.tag === refer.RIGHT_NODE)) {\n                    node_id = event.target.id;\n                    parent_id = event.target.dataset.parent;\n                    const parent = findNode(mindmap, parent_id);\n                    parent_is_root = parent === mindmap;\n                    parent_offset = getDomOffset(document.getElementById(parent_id));\n                    children[0] = parent.children.map(child => child.id);\n                    let children_offset = [];\n                    children_offset[0] = children[0].map(node_id => getDomOffset(document.getElementById(node_id)));\n                    if (parent_is_root && mindmap.children.length > 3) {\n                        const half = Math.trunc(mindmap.children.length / 2);\n                        children = [children[0].slice(0, half), children[0].slice(half)];\n                        children_offset = [children_offset[0].slice(0, half), children_offset[0].slice(half)];\n                    }\n                    children_offset_left = children_offset.map(each => Math.min(...each.map(offset => offset.left)));\n                    children_offset_right = children_offset.map(each => Math.max(...each.map(offset => offset.right)));\n                    children_offset_vertical = children_offset.map(each => each.map(offset => [offset.top, offset.bottom]).reduce((flat_arr, cur) => flat_arr.concat(cur), []));\n                }\n            }\n        },\n        {\n            type: 'drag',\n            listener: event => {\n                const ctx = drag_canvas.getContext('2d');\n                ctx.clearRect(0, 0, drag_canvas.width, drag_canvas.height);\n                const total = children.length;\n                const moveX=-(container_width*drag.x/100)\n                const moveY=-(container_height*drag.y/100)\n                const mouse_x = (event.x + container_left)/zoom+moveX,\n                    mouse_y = (event.y + container_top)/zoom+moveY;\n                for (let i = 0; i < total; i++) {\n                    if (!in_drop_area && mouse_x > children_offset_left[i] && mouse_x < children_offset_right[i]) {\n                        let child_offset = { left: children_offset_left[i], right: children_offset_right[i] };\n                        const child_left_of_parent = i === 1 || (!parent_is_root && (document.getElementById(node_id).dataset.tag === refer.LEFT_NODE)); // i = 1，即出现双侧拖拽时，左侧发生的拖拽 child_left_of_parent 必然为 true\n                        const last_index = children_offset_vertical[i].length - 1;\n                        if (mouse_y > children_offset_vertical[i][0] - 200 && mouse_y < children_offset_vertical[i][0]) { // 优化体验，实际是显示的 2 倍\n                            child_offset.top = children_offset_vertical[i][0] - 50;\n                            child_offset.bottom = children_offset_vertical[i][0];\n                            drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                            target_id = children[i][0];\n                            is_sibling = true;\n                            return;\n                        }\n                        for (let j = 2; j < last_index + 1; j += 2) {\n                            if (mouse_y > children_offset_vertical[i][j - 1] && mouse_y < children_offset_vertical[i][j]) {\n                                child_offset.top = children_offset_vertical[i][j - 1];\n                                child_offset.bottom = children_offset_vertical[i][j];\n                                drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                                target_id = children[i][j / 2];\n                                is_sibling = true;\n                                return;\n                            }\n                        }\n                        if (mouse_y > children_offset_vertical[i][last_index] && mouse_y < children_offset_vertical[i][last_index] + 200) {\n                            child_offset.top = children_offset_vertical[i][last_index];\n                            child_offset.bottom = children_offset_vertical[i][last_index] + 50;\n                            drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                            target_id = children[i + 1] && children[i + 1][0];\n                            is_sibling = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        },\n        {\n            type: 'dragover',\n            listener: event => {\n                event.preventDefault();\n            }\n        },\n        {\n            type: 'dragenter',\n            listener: event => {\n                if (event.target && event.target.dataset.tag === refer.DROP_AREA) {\n                    event.target.parentNode.classList.add('ondrag');\n                    target_id = event.target.parentNode.id;\n                    is_sibling = false;\n                    in_drop_area = true;\n                }\n            }\n        },\n        {\n            type: 'dragleave',\n            listener: event => {\n                if (event.target && event.target.dataset.tag === refer.DROP_AREA) {\n                    event.target.parentNode.classList.remove('ondrag');\n                    target_id = '';\n                    is_sibling = false;\n                    in_drop_area = false;\n                }\n            }\n        },\n        {\n            type: 'drop',\n            listener: event => {\n                event.target.parentNode.classList.remove('ondrag');\n                if (target_id !== '' && target_id !== node_id && target_id !== parent_id) {\n                    moveNode(node_id, target_id, parent_id, is_sibling);\n                }\n            }\n        },\n        {\n            type: 'dragend',\n            listener: () => {\n                const ctx = drag_canvas.getContext('2d');\n                ctx.clearRect(0, 0, drag_canvas.width, drag_canvas.height);\n                container.removeEventListener('scroll', handleContainerScroll);\n            }\n        }\n    ];\n}","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport { css } from 'emotion';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useTheme from '../../customHooks/useTheme';\nimport getDragEvents from '../../methods/getDragEvents';\nimport { context } from '../../context'\nimport * as refer from '../../statics/refer';\n\nconst DragCanvas = ({ parent_ref, container_ref, mindmap }) => {\n    const self = useRef();\n    const [flag, setFlag] = useState(0);\n\n    const { theme } = useTheme();\n\n    const mindmapHook = useMindmap();\n\n    const { global: { state: gState } } = useContext(context);\n    const {zoom,x,y}=gState\n\n    const handleWindowResize = () => {\n        setFlag(Date.now());\n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleWindowResize);\n        return () => {\n            window.removeEventListener('resize', handleWindowResize);\n        }\n    }, []);\n\n    useEffect(() => {\n        const handleDrag = getDragEvents(mindmap, self.current, container_ref.current, theme, mindmapHook,zoom,{x,y});\n        handleDrag.forEach(event => document.querySelector(`#${refer.MINDMAP_ID}`).addEventListener(event.type, event.listener));\n        return () => {\n            handleDrag.forEach(event => document.querySelector(`#${refer.MINDMAP_ID}`).removeEventListener(event.type, event.listener));\n        }\n    }, [mindmap, theme,zoom,x,y]);\n\n    useEffect(() => {\n        const dom = self.current;\n        dom.width = parent_ref.current.offsetWidth;\n        dom.height = parent_ref.current.offsetHeight;\n    }, [mindmap, flag, gState.zoom]);\n\n    return (<canvas ref={self} className={wrapper} />);\n};\n\nexport default DragCanvas;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -1;\n`;","import React, {useState, useEffect, useRef, useContext} from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../customHooks/useTheme';\nimport {context} from '../../context'\nimport {drawLineCanvas} from '../../methods/drawCanvas';\n\nconst LineCanvas = ({parent_ref, mindmap, node_refs}) => {\n    const self = useRef();\n    const [flag, setFlag] = useState(0);\n\n    const {theme} = useTheme();\n    const {global:{state:gState}}=useContext(context);\n\n    const handleWindowResize = (e) => {\n        setFlag(Date.now());        \n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleWindowResize);\n        return () => {\n            window.removeEventListener('resize', handleWindowResize);\n        }\n    }, []);\n\n    useEffect(() => {\n        const dom = self.current;\n        dom.width = parent_ref.current.offsetWidth;\n        dom.height = parent_ref.current.offsetHeight; // 重新设置 canvas 大小，也兼具清除画板的作用\n        const map = new Map(Array.from(node_refs).map(ref => [ref.current.id, [(ref.current.offsetLeft), (ref.current.offsetLeft + ref.current.offsetWidth), (ref.current.offsetTop + 0.5 * ref.current.offsetHeight), ref.current.dataset.tag]]));\n        const ctx = dom.getContext('2d');\n        drawLineCanvas(ctx, theme, mindmap, map);\n    }, [mindmap, theme, flag, gState.zoom]);\n\n    return (<canvas ref={self} className={wrapper} />);\n};\n\nexport default LineCanvas;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -2;\n`;","import React, { useEffect, useContext, useRef, useMemo, useState } from 'react';\nimport { css } from 'emotion';\nimport * as refer from '../../statics/refer';\nimport { context } from '../../context/';\nimport { setHistory } from '../../context/reducer/history/actionCreator';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useHistory from '../../customHooks/useHistory';\nimport getKeydownEvent from '../../methods/getKeydownEvent';\nimport getMouseWheelEvent from '../../methods/getMouseWheelEvent';\nimport RootNode from '../../components/RootNode';\nimport DragCanvas from '../../components/DragCanvas';\nimport LineCanvas from '../../components/LineCanvas';\nimport useZoom from '../../customHooks/useZoom';\nimport useMove from '../../customHooks/useMove';\nimport { debounce } from '../../methods/assistFunctions';\n\nconst node_refs = new Set();\n\nconst Mindmap = ({ container_ref }) => {\n    const self = useRef();\n    const { mindmap: { state: root_node }, nodeStatus: { state: nodeStatus }, history: { dispatch: hDispatch }, global: { state: gState } } = useContext(context);\n\n    const historyHook = useHistory();\n    const mindmapHook = useMindmap();\n    const zoomHook = useZoom();\n    const moveHook = useMove()\n    const { clearNodeStatus } = mindmapHook;\n    const [FLAG, setFLAG] = useState(0)\n\n    const mindmap_json = useMemo(() => JSON.stringify(root_node), [root_node]); // 如果 root_node 没有 JSON.stringify，使用按键操作时有时会连续两次触发 useEffect，目前没查出来为什么。利用 useMemo 避免重复触发\n\n    const handleResize = () => {\n        setFLAG(Date.now())\n    }\n\n    useEffect(() => {\n        const handleKeydown = getKeydownEvent(nodeStatus, mindmapHook, historyHook);\n        window.addEventListener('keydown', handleKeydown);\n        return () => {\n            window.removeEventListener('keydown', handleKeydown);\n        }\n    }, [nodeStatus]);\n\n    useEffect(() => {\n        window.addEventListener('click', clearNodeStatus);\n        return () => {\n            window.removeEventListener('click', clearNodeStatus);\n        }\n    }, []);\n\n    useEffect(() => {\n        window.addEventListener('resize', handleResize);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        }\n    }, [])\n\n    useEffect(() => {\n        const normalizeXY = container_ref.current.clientWidth / container_ref.current.clientHeight\n        const handleMouseWheel = getMouseWheelEvent(zoomHook, gState.zoom)\n        const handleMapMove = getMouseWheelEvent(moveHook, gState.zoom, normalizeXY)\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('wheel', handleMouseWheel);\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousemove', debounce(handleMapMove, 4));\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousedown', handleMapMove)\n        return () => {\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).removeEventListener('wheel', handleMouseWheel);\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousemove', debounce(handleMapMove, 4));\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousedown', handleMapMove);\n        }\n    }, [FLAG]);\n\n    useEffect(() => {\n        localStorage.setItem('mindmap', mindmap_json);\n        hDispatch(setHistory(mindmap_json, nodeStatus.cur_select || nodeStatus.cur_edit));\n    }, [mindmap_json]);\n\n    return (\n        <div\n            className={wrapper}\n            ref={self}\n            style={{ zoom: gState.zoom, left: gState.x + 'vw', top: gState.y + 'vh' }}\n            id={refer.MINDMAP_ID}\n            draggable={false}>\n            <RootNode key={root_node.id} layer={0} node={root_node} node_refs={node_refs} />\n            <DragCanvas parent_ref={self} container_ref={container_ref} mindmap={root_node} />\n            <LineCanvas parent_ref={self} mindmap={root_node} node_refs={node_refs} />\n        </div>\n    );\n};\n\nexport default Mindmap;\n\n// CSS\nconst wrapper = css`\nposition: relative;\nwidth: fit-content;\npadding: 30vh 30vw;\n`;","import React, { useState, useEffect } from 'react';\n\nfunction MdEditor(props) {\n    const { propText } = props;\n\n    const [text, setText] = useState(propText);\n\n    useEffect(() => {\n        setText(propText)\n    }, [propText]);\n    \n    const onChange = (e) => {\n        setText(e.target.value)\n    }\n\n    const onBlur = () => {\n        console.log('备注：', text)\n        props.onBlur && props.onBlur(text)\n    }\n\n\n\n    return (\n        <div className={props.className || ''}>\n            <textarea style={textarea} onChange={onChange} onBlur={onBlur} value={text} />\n        </div>\n    )\n}\n\nexport default MdEditor;\n\n\nconst textarea = {\n    width: '100%',\n    height: '100%',\n    resize: 'none'\n}","import React, {useContext, useEffect} from 'react';\nimport {css} from 'emotion';\nimport useEditPanel from '../../customHooks/useEditPanel';\nimport useMindmap from '../../customHooks/useMindmap';\nimport {context} from '../../context'\nimport MdEditor from '../../components/mdEditor';\n\nconst EditPanel = () => {\n    // const self = useRef();\n    \n    const {editPanel: {state:epState},nodeStatus:{state:nState}} =useContext(context)\n    const {cur_node_info:{info='',text,id}}=nState\n    \n    const mindmapHook=useMindmap()\n    const editPanleHook=useEditPanel();\n    \n    if(!epState.isShow){\n        return null;\n    }\n    \n    return (        \n        <div className={show} onClick={e=>e.stopPropagation()} onKeyDown={e=>e.stopPropagation()}>\n            当前编辑节点：{text || '无'}        \n\n            <i className=\"zwicon-close\" style={close} onClick={()=>editPanleHook.toggelPanelShow(false)}></i>                        \n            <MdEditor \n                className={mdEditor} \n                propText={info}\n                onBlur={(value)=> id && mindmapHook.editNodeInfo(id,value)}\n            />                       \n            {/* <Button type=\"primary\" onClick={()=>mindmapHook.editNodeInfo(id,inputVal)}>保存</Button>\n            <Button type=\"primary\" onClick={()=>editPanleHook.toggelPanelShow(false)}>关闭</Button> */}            \n        </div>\n    );\n};\n\nexport default EditPanel;\n\n// CSS\nconst show = css`\nheight: 500px;\nwidth: 300px;\ntop: 20px;\nright: 40px;\nmargin: 56px 0 0;\noverflow: auto;\nposition: fixed;\n//z-index: 10;\nborder: 2px solid #eeee;\nborder-radius: 10px;\nbackground: #fff;\nbackground:rgba(255,255,255,1);\nbox-shadow:0px 2px 12px 0px rgba(0,0,0,0.16);\npadding:20px 10px;\n`;\n\nconst close={    \n    fontSize:20,\n    position: 'absolute',\n    cursor:'pointer',\n    right: '10px',\n    top: '5px',\n}\n\nconst mdEditor=css`\n    margin-top:20px;\n    width:295px;\n    height:460px;\n`","import React, { useRef } from 'react';\nimport { css } from 'emotion';\nimport Mindmap from '../Mindmap';\nimport EditPanel from '../EditPanel';\nimport * as refer from '../../statics/refer';\n\nconst Main = () => {\n    const self = useRef();\n\n    return (<main ref={self} className={wrapper} id={refer.MINDMAP_MAIN}>\n        <Mindmap container_ref={self} />\n        <EditPanel />\n    </main>);\n};\n\nexport default Main;\n\n// CSS\nconst wrapper = css`\nheight: calc(100vh - 56px);\nmargin: 56px 0 0;\noverflow: hidden;\n`;","import React from 'react';\nimport Provider from './context/';\nimport ThemeProvider from './features/ThemeProvider'\nimport Nav from './features/Nav';\nimport Register from './features/Register';\nimport Main from './features/Main'\nimport { BrowserRouter as Router,Route,Switch,withRouter } from 'react-router-dom';\nimport ReactDOM from 'react-dom'\n\n\nconst App = () => {\n    \n    return (\n    <Router>\n    <Provider>\n        <ThemeProvider>\n        <Route exact path='/' component={withRouter(Nav)}/>\n        <Route exact path='/' component={withRouter(Main)}/>\n        <Route exact path='/' component={withRouter(Register)}/>      \n        </ThemeProvider>\n    </Provider>\n    </Router>);\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'normalize.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export const TOGGLE_PANEL_SHOW = 'editPanel/togglePanelShow';","import * as actionTypes from './actionTypes';\n\nexport const setHistory = (mindmap, cur_node) => ({\n    type: actionTypes.SET_HISTORY,\n    data: mindmap ? ({mindmap, cur_node}) : null\n});\n\nexport const clearHistory = () => ({type: actionTypes.CLEAR_HISTORY});","export const handlePropagation = event => {\n    event.stopPropagation();\n};\n\nexport const deepCopy = input => { // 简单的递归深拷贝，只考虑 context 中 state 的复制，因此没有处理 function 等\n    if (input instanceof Object) {\n        if (Array.isArray(input)) {\n            return input.map(deepCopy);\n        }\n        let output = {};\n        Object.entries(input).forEach(([key, value]) => {\n            output[key] = deepCopy(value);\n        });\n        return output;\n    }\n    return input;\n};\n\nexport const findNode = (node, search_id) => {\n    if (node.id === search_id) {\n        return node;\n    }\n    return node.children.map(child => findNode(child, search_id)).find(item => item);\n};\n\nexport const setShowChildrenTrue = node => {\n    node.showChildren = true;\n    node.children.forEach(setShowChildrenTrue);\n};\n\nexport const downloadFile = (url, filename) => {\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    link.click();\n};\n\nexport const debounce=(func,wait)=>{\n    let timer=null;\n    return function(){\n      if(timer) clearTimeout(timer);\n      timer=setTimeout(()=>{\n        // 绑定this的目的是，使得func的this指针保持普通,调用时候的指向\n        // argument也为调用debounce过后的func传入的参数\n        func.apply(this,arguments);\n      },wait)\n    }\n  \n  }","import * as actionTypes from './actionTypes';\nimport defaultMindmap from '../../../statics/defaultMindmap';\nimport {findNode, deepCopy, setShowChildrenTrue} from '../../../methods/assistFunctions';\n\nexport const defaultValue_mindmap = JSON.parse(localStorage.getItem('mindmap')) || defaultMindmap;\n\nexport default (mindmap, action) => {\n    switch (action.type) {\n        case actionTypes.TOGGLE_CHILDREN: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            if (node_found.children.length > 0 && node_found !== new_mindmap) {\n                Object.assign(node_found, action.data.node);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.ADD_CHILD: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            node_found.children.push(action.data.node);\n            return new_mindmap;\n        }\n        case actionTypes.ADD_SIBLING: {\n            const new_mindmap = deepCopy(mindmap);\n            if (action.data.parent_id) {\n                const node_found = findNode(new_mindmap, action.data.parent_id);\n                const insert_index = node_found.children.findIndex(node => node.id === action.data.node_id) + 1;\n                node_found.children.splice(insert_index, 0, action.data.node);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.MOVE_NODE: {\n            const new_mindmap = deepCopy(mindmap),\n                parent = findNode(new_mindmap, action.data.parent_id),\n                node_index = parent.children.findIndex(node => node.id === action.data.node_id),\n                node_copy = parent.children[node_index];\n            parent.children.splice(node_index, 1);\n            if (action.data.is_sibling) {\n                const target_index = parent.children.findIndex(node => node.id === action.data.target_id) + 1 || parent.children.length + 1;\n                parent.children.splice(target_index - 1, 0, node_copy);\n            } else {\n                const target_node = findNode(new_mindmap, action.data.target_id);\n                target_node.children.push(node_copy);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.CHANGE_TEXT: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            Object.assign(node_found, action.data.node);\n            return new_mindmap;\n        }\n        case actionTypes.DELETE_NODE: {\n            const new_mindmap = deepCopy(mindmap);\n            if (action.data.parent_id) {\n                const node_found = findNode(new_mindmap, action.data.parent_id);\n                const delete_index = node_found.children.findIndex(node => node.id === action.data.node_id);\n                node_found.children.splice(delete_index, 1);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.EXPAND_ALL: {\n            const new_mindmap = deepCopy(mindmap);\n            const node_found = findNode(new_mindmap, action.data.node_id);\n            setShowChildrenTrue(node_found);\n            return new_mindmap;\n        }\n        case actionTypes.SET_MINDMAP: {\n            return action.data.mindmap;\n        }\n        default:\n            return mindmap;\n    }\n};","import * as actionTypes from './actionTypes';\n\nexport const defaultValue_nodeStatus = {\n    cur_select: '',\n    select_by_click: false,\n    cur_edit: '',\n    cur_node_info: {}\n};\n\nexport default (nodeStatus, action) => {\n    switch (action.type) {\n        case actionTypes.SET_SELECT:\n            if (nodeStatus.cur_select === action.data.cur_select) { // 避免 cur_select 未变更时 info 被清空\n                delete action.data.cur_node_info;\n            }\n            return {...nodeStatus, ...action.data};\n        case actionTypes.SET_EDIT:\n        case actionTypes.CLEAR_ALL:\n        case actionTypes.GET_NODE_INFO:\n            return {...nodeStatus, ...action.data};\n        default:\n            return nodeStatus;\n    }\n};","import * as actionTypes from './actionTypes';\nimport {deepCopy} from '../../../methods/assistFunctions';\n\nexport const defaultValue_history = {\n    undo: [],\n    redo: [],\n    last_snapshot: null\n};\n\nexport default (history, action) => {\n    switch (action.type) {\n        case actionTypes.SET_HISTORY: {\n            const new_history = deepCopy(history);\n            if (new_history.last_snapshot) {\n                if (new_history.undo.length > 0 && new_history.undo[new_history.undo.length - 1].mindmap === action.data.mindmap) {\n                    new_history.redo.unshift(new_history.last_snapshot);\n                    new_history.undo.pop();\n                } else if (new_history.redo.length > 0 && new_history.redo[0].mindmap === action.data.mindmap) {\n                    new_history.undo.push(new_history.last_snapshot);\n                    new_history.redo.shift();\n                } else {\n                    new_history.undo.push(new_history.last_snapshot);\n                    new_history.redo = [];\n                }\n            }\n            new_history.last_snapshot = action.data;\n            return new_history;\n        }\n        case actionTypes.CLEAR_HISTORY: {\n            return defaultValue_history;\n        }\n        default:\n            return history;\n    }\n};","import * as actionTypes from './actionTypes';\nimport * as refer from '../../../statics/refer';\nimport { deepCopy } from '../../../methods/assistFunctions';\nimport { debug } from 'util';\n\nexport const defaultValue_global = {\n    title: localStorage.getItem('title') || refer.DEFAULT_TITLE,\n    theme_index: Number(localStorage.getItem('theme_index')) || 0,\n    theme_list: [\n        { main: \"#eda938\", light: \"#f4cc87\", dark: \"#e79021\", ex: \"#ce7529\", assist: \"#1980da\" },\n        { main: \"#ff4c26\", light: \"#ffcabc\", dark: \"#e83f1d\", ex: \"#c12a0f\", assist: \"#0e95ac\" },\n        { main: \"#50b843\", light: \"#c3e5bd\", dark: \"#28ab17\", ex: \"#038b00\", assist: \"#790595\" },\n        { main: \"#2d99d7\", light: \"#e2f5ff\", dark: \"#2786c3\", ex: \"#2375af\", assist: \"#ca6c27\" },\n        { main: \"#b347d2\", light: \"#e4c0ef\", dark: \"#a623c9\", ex: \"#9621c3\", assist: \"#009000\" },\n        { main: \"#555555\", light: \"#e9e9e9\", dark: \"#434343\", ex: \"#262626\", assist: \"#860314\" }\n    ],\n    zoom: 1,\n    x:0,\n    y:0,\n};\n\nconst ZOOM_STEP=0.1;\nconst MOVE_STEP=0.1;\n\nconst preventMinValue=(obj,key,min)=>{\n    \n    if(obj[key]<=min){\n        obj[key]=min\n    }\n}\n\nexport default (global, action) => {\n    switch (action.type) {\n        case actionTypes.SET_TITLE:\n        case actionTypes.SET_THEME:\n            return Object.assign(deepCopy(global), action.data);\n        case actionTypes.ZOOM_IN: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom += ZOOM_STEP;\n            return newGlobal;\n        }\n        case actionTypes.ZOOM_OUT: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom -= ZOOM_STEP;\n            preventMinValue(newGlobal,'zoom', 0.3)\n            return newGlobal;\n        }\n        case actionTypes.ZOOM_RESET: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom = 1;\n            return newGlobal;\n        }        \n        case actionTypes.MOVE_XY: {\n            const newGlobal = deepCopy(global)\n            newGlobal.x+=action.data.x/newGlobal.zoom;\n            newGlobal.y+=action.data.y/newGlobal.zoom;\n            return newGlobal;\n        }        \n        case actionTypes.MOVE_RESET: {\n            const newGlobal = deepCopy(global)\n            newGlobal.x=0;\n            newGlobal.y=0;\n            return newGlobal;\n        }\n        case actionTypes.MOVE_XY_WHEN_ZOOM:{\n            const newGlobal = deepCopy(global)\n            newGlobal.x=0;\n            newGlobal.x=0;\n            return newGlobal;\n        }\n        default:\n            return global;\n    }\n};","import * as actionTypes from './actionTypes';\n// import defaultMindmap from '../../../statics/defaultMindmap';\nimport {deepCopy} from '../../../methods/assistFunctions';\n\nexport const defaultValue_editPanel = {\n    isShow:false,\n    nodeId:''\n};\n\nexport default (panel, action) => {\n    switch (action.type) {        \n        case actionTypes.TOGGLE_PANEL_SHOW: \n            const newPanel = deepCopy(panel);\n            newPanel.isShow=action.data.isShow\n            return newPanel        \n        default:\n            return panel;\n    }\n};","import React, {useReducer} from 'react';\nimport mindmapReducer, {defaultValue_mindmap} from './reducer/mindmap/';\nimport nodeStatusReducer, {defaultValue_nodeStatus} from './reducer/nodeStatus';\nimport historyReducer, {defaultValue_history} from './reducer/history';\nimport globalReducer, {defaultValue_global} from './reducer/global';\nimport editPanelReducer,{defaultValue_editPanel} from './reducer/editPanel';\n\nconst context = React.createContext({});\n\nconst WrappedProvider = props => {\n    const [mState, mDispatch] = useReducer(mindmapReducer, defaultValue_mindmap);\n    const [nState, nDispatch] = useReducer(nodeStatusReducer, defaultValue_nodeStatus);\n    const [hState, hDispatch] = useReducer(historyReducer, defaultValue_history);\n    const [gState, gDispatch] = useReducer(globalReducer, defaultValue_global);\n    const [epState, epDispatch] = useReducer(editPanelReducer, defaultValue_editPanel);\n    const combined = {\n        mindmap: {\n            state: mState,\n            dispatch: mDispatch\n        },\n        nodeStatus: {\n            state: nState,\n            dispatch: nDispatch\n        },\n        history: {\n            state: hState,\n            dispatch: hDispatch\n        },\n        global: {\n            state: gState,\n            dispatch: gDispatch\n        },\n        editPanel: {\n            state: epState,\n            dispatch: epDispatch\n        }\n    };\n\n    return (<context.Provider value={combined}>\n        {props.children}\n    </context.Provider>)\n};\n\nexport {context};\nexport default WrappedProvider;","\nconst exportNodeToText = (node, layer, format) => {\n    switch (format) {\n        case 'MD':\n            if (layer < 6) {\n                return '#'.repeat(layer + 1) + ' ' + node.text;\n            }\n            return '\\t'.repeat(layer - 6) + '- ' + node.text;\n        case 'TXT':\n            return '\\t'.repeat(layer) + node.text;\n        default:\n            return;\n    }\n};\n\nconst exportMindmapToText = (mindmap, format) => {\n    let lines = [];\n    const dfs = (node, layer, format) => {\n        if (!node) {\n            return;\n        }\n        lines.push(exportNodeToText(node, layer, format));\n        node.children.forEach(child => {\n            dfs(child, layer + 1, format)\n        });\n    };\n    dfs(mindmap, 0, format);\n    return lines.join('\\n');\n};\n\nconst copyNodeData = (format, target_node, source_node) => {\n    switch (format) {\n        case 'KM':\n            target_node.data = {};\n            target_node.data.id = source_node.id;\n            target_node.data.created = Date.now();\n            target_node.data.text = source_node.text;\n            target_node.data.expandState = source_node.showChildren ? 'expand' : 'collapse';\n            target_node.children = source_node.children.map(child => copyNodeData(format, {}, child));\n            return target_node;\n        default:\n            return;\n    }\n};\n\nconst exportMindmapToJSON = (mindmap, format) => {\n    switch (format) {\n        case 'KM':\n            const km_mindmap = {root: copyNodeData(format, {}, mindmap)};\n            return JSON.stringify(km_mindmap);\n        default:\n            return JSON.stringify(km_mindmap);\n    }\n};\n\nexport default (mindmap, format) => {\n    let export_data;\n    switch (format) {\n        case 'MD':\n        case 'TXT':\n            export_data = exportMindmapToText(mindmap, format);\n            break;\n        default:\n            export_data = exportMindmapToJSON(mindmap, format);\n            break;\n    }\n    return export_data;\n}\n","export const TOGGLE_CHILDREN = 'mindmap/toggleChildren';\nexport const ADD_CHILD = 'mindmap/addChild';\nexport const ADD_SIBLING = 'mindmap/addSibling';\nexport const MOVE_NODE = 'mindmap/moveNode';\nexport const CHANGE_TEXT = 'mindmap/changeText';\nexport const DELETE_NODE = 'mindmap/deleteNode';\nexport const EXPAND_ALL = 'mindmap/expandAll';\nexport const SET_MINDMAP = 'mindmap/setMindmap';"],"sourceRoot":""}