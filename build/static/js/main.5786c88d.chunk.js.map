{"version":3,"sources":["statics/refer.js","components/Popup/common/styledComponents.js","context/reducer/nodeStatus/actionCreator.js","context/reducer/mindmap/actionCreator.js","context/reducer/nodeStatus/actionTypes.js","context/reducer/history/actionTypes.js","statics/defaultMindmap.js","context/reducer/editPanel/actionTypes.js","context/reducer/history/actionCreator.js","context/reducer/global/actionCreator.js","customHooks/useTheme.js","features/ThemeProvider/index.js","customHooks/useHistory.js","customHooks/useZoom.js","customHooks/useMove.js","components/ToolButton/index.js","components/MindmapTitle/index.js","components/Popup/subComponents/New.js","methods/mindmapParser.js","components/Popup/subComponents/Open.js","components/Popup/subComponents/Theme/ThemeListItem.js","components/Popup/subComponents/Theme/index.js","components/Popup/index.js","components/Popup/common/popupType.js","features/Nav/index.js","features/Register/index.js","methods/getKeydownEvent.js","methods/getMouseWheelEvent.js","context/reducer/editPanel/actionCreator.js","customHooks/useEditPanel.js","components/Node/subComponents/Toolbar.js","components/Node/subComponents/InputDiv.js","components/mdPreview/index.js","components/Node/index.js","components/SubNode/index.js","components/RootNode/index.js","methods/drawCanvas.js","methods/getDragEvents.js","components/DragCanvas/index.js","components/LineCanvas/index.js","features/Mindmap/index.js","components/mdEditor/index.js","features/EditPanel/index.js","features/Main/index.js","App.js","serviceWorker.js","index.js","methods/mindmapExporter.js","methods/assistFunctions.js","context/reducer/mindmap/index.js","context/reducer/nodeStatus/index.js","context/reducer/history/index.js","context/reducer/global/index.js","context/reducer/editPanel/index.js","context/index.js","context/reducer/mindmap/actionTypes.js","customHooks/useMindmap.js","context/reducer/global/actionTypes.js"],"names":["__webpack_require__","d","__webpack_exports__","LEFT_NODE","RIGHT_NODE","DROP_AREA","ROOT_PARENT","ROOT_NODE_ID","MINDMAP_ID","MINDMAP_MAIN","NEW_NODE_TEXT","DEFAULT_TITLE","THEME_MAIN","THEME_LIGHT","THEME_DARK","THEME_EX","THEME_ASSIST","id","children","ButtonSet","props","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","Object","assign","className","css","_templateObject","MainButton","_templateObject2","refer","Highlight","_templateObject3","Annotation","_templateObject4","Shortcut","_templateObject5","setSelect","node_id","select_by_click","type","actionTypes","data","cur_select","cur_edit","cur_node_info","setEdit","clearAll","getNodeInfo","node","parent","on_left","C_Users_12240_Downloads_RMind_develop_RMind_develop_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","toggleChildren","addChild","addSibling","moveNode","changeText","changeInfo","deleteNode","expandAll","setMindmap","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_statics_refer__WEBPACK_IMPORTED_MODULE_1__","bool","showChildren","new_node_id","text","parent_id","target_id","is_sibling","info","mindmap","SET_SELECT","SET_EDIT","GET_NODE_INFO","CLEAR_ALL","SET_HISTORY","CLEAR_HISTORY","_refer__WEBPACK_IMPORTED_MODULE_0__","TOGGLE_PANEL_SHOW","setHistory","clearHistory","cur_node","setTitle","title","useTheme","_useContext$global","useContext","context","global","_useContext$global$st","state","theme_index","theme_list","dispatch","theme","useMemo","setTheme","index","ThemeProvider","_ref","react_default","main","light","assist","dark","ex","useHistory","_useContext","mDispatch","nDispatch","nodeStatus","history","applySnapshot","snapshot","JSON","parse","undoHistory","undo","length","redoHistory","redo","useZoom","gDispatch","zoomIn","x","y","globalAction","zoomOut","zoomReset","zoomRate","useMove","moveXY","moveReset","ToolButton","icon","onClick","disabled","handlePropagation","cx","wrapper","defineProperty","disabled_style","ToolButton_templateObject","MindmapTitle","self","useRef","useEffect","document","concat","localStorage","setItem","ref","contentEditable","suppressContentEditableWarning","spellCheck","onKeyDown","event","key","toUpperCase","current","textContent","blur","onBlur","new_title","trim","slice","MindmapTitle_templateObject","New","handleClosePopup","handleDownload","useMindmap","styledComponents","defaultMindmap","getLayerAndText","line","format","layer","match","replace","buildNodeFromJSON","json","copyNodeData","target_node","source_node","is_root_node","expandState","map","child","root","mindmapParser","import_data","buildNodeFromText","data_array","cur_layer","cur_text","arguments","undefined","root_data","shift","md5","Date","now","Math","random","_getLayerAndText","push","split","filter","Open","sub_title","list_wrapper","input","accept","addEventListener","file","target","files","file_name","name","dot_index","file_reader","FileReader","onload","str","result","alert","readAsText","click","Open_templateObject","Open_templateObject2","ThemeListItem","is_current","current_style","style","backgroundColor","ThemeListItem_templateObject","ThemeListItem_templateObject2","Theme","_useTheme","Theme_ThemeListItem","Theme_templateObject","Popup","Content","lazy","e","then","bind","getContentComponent","content_wrapper","close_button","react","fallback","Fragment","overlay","Popup_templateObject","Popup_templateObject2","Nav","_useState","useState","_useState2","slicedToArray","popup","setPopup","_useZoom","_useMove","_useHistory","html2canvas","getElementById","canvas","url","toDataURL","downloadFile","content","mindmapExporter","axios","post","catch","err","handleZoom","zoom","console","log","handleMove","move","section","components_ToolButton","components_MindmapTitle","components_Popup","Nav_templateObject","Nav_templateObject2","Register","show","email","password","password2","formData","setFormData","onChange","objectSpread","value","display","onSubmit","preventDefault","autoFocus","placeholder","required","minLength","href","getKeydownEvent","mindmapHook","historyHook","editNode","selectNode","navigator","platform","startsWith","metaKey","ctrlKey","shiftKey","trunc","cur_index","findIndex","handleKeyEventWithNode","mousemoveInfo","startX","startY","getMouseWheelEvent","propHook","normalizeXY","wheelDelta","stopPropagation","getWheelDelta","clientX","clientY","buttons","altKey","movedX","movedY","handleWhellEventWithkey","toggelPanelShow","isShow","useEditPanel","_useContext$editPanel","editPanel","epState","epDispatch","editPanelAction","savePanel","Toolbar","editPanelHook","Toolbar_templateObject","InputDiv","_useMindmap","focus","getSelection","selectAllChildren","InputDiv_templateObject","marked","setOptions","renderer","Renderer","highlight","code","hljs","highlightAuto","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","MdPreview","_props$mdtext","mdtext","querySelectorAll","forEach","block","highlightBlock","fontSize","dangerouslySetInnerHTML","__html","Node","node_refs","_useContext$nodeStatu","add","delete","scrollIntoView","behavior","inline","common_style","specific_style","seleted_style","draggable","data-tag","data-parent","data-show-children","subComponents_InputDiv","drop_area","onDoubleClick","components_mdPreview","toggle_button","button_left","button_right","clearNodeStatus","subComponents_Toolbar","style_selected_border","Node_templateObject","Node_templateObject2","Node_templateObject3","Node_templateObject4","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","SubNode","left_style","components_Node","sub_node","SubNode_templateObject","SubNode_templateObject2","RootNode","root_node","total","half","components_SubNode","RootNode_templateObject","drawBezier","ctx","from_x","from_y","to_x","to_y","moveTo","bezierCurveTo","drawLineCanvas","beginPath","lineWidth","strokeStyle","drawLine","_map$get","get","_map$get2","parent_x_left","parent_x_right","parent_y","child_data","_child_data","child_x_left","child_x_right","child_y","stroke","closePath","drawDragCanvas","child_id","parent_offset","child_offset","child_left_of_parent","setLineDash","parent_x","child_x","top","bottom","left","right","strokeRect","virtual_rect_height","getDomOffset","dom","offsetLeft","offsetWidth","offsetTop","offsetHeight","getDragEvents","drag_canvas","container","drag","children_offset_left","children_offset_right","children_offset_vertical","parent_is_root","container_left","container_top","container_width","container_height","in_drop_area","handleContainerScroll","scrollLeft","scrollTop","listener","dataset","tag","findNode","children_offset","each","min","apply","toConsumableArray","offset","max","reduce","flat_arr","cur","getContext","clearRect","width","height","moveX","moveY","mouse_x","mouse_y","i","last_index","j","parentNode","classList","remove","removeEventListener","DragCanvas","parent_ref","container_ref","flag","setFlag","gState","handleWindowResize","window","handleDrag","querySelector","DragCanvas_templateObject","LineCanvas","Map","Array","from","LineCanvas_templateObject","Set","Mindmap","hDispatch","zoomHook","moveHook","FLAG","setFLAG","mindmap_json","stringify","handleResize","handleKeydown","clientWidth","clientHeight","handleMouseWheel","handleMapMove","debounce","components_RootNode","components_DragCanvas","components_LineCanvas","Mindmap_templateObject","MdEditor","propText","setText","textarea","resize","EditPanel","_nState$cur_node_info","_nState$cur_node_info2","editPanleHook","close","mdEditor","editNodeInfo","EditPanel_templateObject","position","cursor","EditPanel_templateObject2","Main","features_Mindmap","features_EditPanel","Main_templateObject","App","features_ThemeProvider","features_Nav","features_Main","features_Register","Boolean","location","hostname","ReactDOM","render","src_App","serviceWorker","ready","registration","unregister","created","export_data","lines","dfs","repeat","exportNodeToText","join","exportMindmapToText","km_mindmap","exportMindmapToJSON","deepCopy","isArray","output","entries","_ref2","C_Users_12240_Downloads_RMind_develop_RMind_develop_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","search_id","find","item","setShowChildrenTrue","filename","link","download","func","wait","timer","_this","this","_arguments","clearTimeout","setTimeout","defaultValue_mindmap","getItem","reducer_mindmap","action","new_mindmap","node_found","insert_index","splice","node_index","node_copy","target_index","delete_index","defaultValue_nodeStatus","reducer_nodeStatus","defaultValue_history","last_snapshot","reducer_history","new_history","unshift","pop","defaultValue_global","Number","reducer_global","newGlobal","obj","defaultValue_editPanel","nodeId","panel","newPanel","React","createContext","WrappedProvider","_useReducer","useReducer","mindmapReducer","_useReducer2","mState","_useReducer3","nodeStatusReducer","_useReducer4","nState","_useReducer5","historyReducer","_useReducer6","hState","_useReducer7","globalReducer","_useReducer8","_useReducer9","editPanelReducer","_useReducer10","combined","Provider","TOGGLE_CHILDREN","ADD_CHILD","ADD_SIBLING","MOVE_NODE","CHANGE_TEXT","DELETE_NODE","EXPAND_ALL","SET_MINDMAP","react__WEBPACK_IMPORTED_MODULE_0__","_context__WEBPACK_IMPORTED_MODULE_1__","_context_reducer_mindmap_actionCreator__WEBPACK_IMPORTED_MODULE_2__","_context_reducer_nodeStatus_actionCreator_js__WEBPACK_IMPORTED_MODULE_3__","_context_reducer_history_actionCreator__WEBPACK_IMPORTED_MODULE_4__","md5__WEBPACK_IMPORTED_MODULE_5__","md5__WEBPACK_IMPORTED_MODULE_5___default","n","axios__WEBPACK_IMPORTED_MODULE_6__","axios__WEBPACK_IMPORTED_MODULE_6___default","mindmapAction","nodeStatusAction","new_node","is_new_map","SET_TITLE","SET_THEME","ZOOM_IN","ZOOM_OUT","ZOOM_RESET","MOVE_XY","MOVE_RESET","MOVE_XY_WHEN_ZOOM"],"mappings":"wFAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAAP,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAO,IAAAT,EAAAC,EAAAC,EAAA,sBAAAQ,IAAAV,EAAAC,EAAAC,EAAA,sBAAAS,IAAAX,EAAAC,EAAAC,EAAA,sBAAAU,IAAAZ,EAAAC,EAAAC,EAAA,sBAAAW,IAAAb,EAAAC,EAAAC,EAAA,sBAAAY,IAAAd,EAAAC,EAAAC,EAAA,sBAAAa,IAAAf,EAAAC,EAAAC,EAAA,sBAAAc,IACO,IAAMb,EAAY,WACZC,EAAa,YACbC,EAAY,WAGZC,EAAc,CAACW,GAAI,GAAIC,SAAU,IACjCX,EAAe,kBACfC,EAAa,wBACbC,EAAe,aAGfC,EAAgB,2BAChBC,EAAgB,iCAGhBC,EAAa,eACbC,EAAc,gBACdC,EAAa,eACbC,EAAW,aACXC,EAAe,6lCChBrB,IAAMG,EAAY,SAAAC,GAAK,OAAKC,EAAAC,EAAAC,cAAA,MAAAC,OAAAC,OAAA,GAASL,EAAT,CAAgBM,UAAWC,YAAFC,SAkB/CC,EAAa,SAAAT,GAAK,OAAKC,EAAAC,EAAAC,cAAA,SAAAC,OAAAC,OAAA,GAAYL,EAAZ,CAAmBM,UAAWC,YAAFG,IAGxCC,IACAA,SAIXC,EAAY,SAAAZ,GAAK,OAAKC,EAAAC,EAAAC,cAAA,IAAAC,OAAAC,OAAA,GAAOL,EAAP,CAAcM,UAAWC,YAAFM,IAE7CF,SAIAG,EAAa,SAAAd,GAAK,OAAKC,EAAAC,EAAAC,cAAA,IAAAC,OAAAC,OAAA,GAAOL,EAAP,CAAcM,UAAWC,YAAFQ,SAK9CC,EAAW,SAAAhB,GAAK,OAAKC,EAAAC,EAAAC,cAAA,IAAAC,OAAAC,OAAA,GAAOL,EAAP,CAAcM,UAAWC,YAAFU,8LCvC5CC,EAAY,SAACC,EAASC,GAAV,MAA+B,CACpDC,KAAMC,IACNC,KAAM,CACFC,WAAYL,EACZC,gBAAiBA,IAAmB,EACpCK,SAAU,GACVC,cAAe,MAIVC,EAAU,SAAAR,GAAO,MAAK,CAC/BE,KAAMC,IACNC,KAAM,CACFC,WAAY,GACZC,SAAUN,EACVO,cAAe,MAIVE,EAAW,iBAAO,CAC3BP,KAAMC,IACNC,KAAM,CACFC,WAAY,GACZJ,iBAAiB,EACjBK,SAAU,GACVC,cAAe,MAIVG,EAAc,SAACC,EAAMC,EAAQC,GAAf,MAA4B,CACnDX,KAAMC,IACNC,KAAM,CACFG,cAActB,OAAA6B,EAAA,EAAA7B,CAAA,GACP0B,EADM,CAETC,SACAC,gDCrCZpD,EAAAC,EAAAC,EAAA,sBAAAoD,IAAAtD,EAAAC,EAAAC,EAAA,sBAAAqD,IAAAvD,EAAAC,EAAAC,EAAA,sBAAAsD,IAAAxD,EAAAC,EAAAC,EAAA,sBAAAuD,IAAAzD,EAAAC,EAAAC,EAAA,sBAAAwD,IAAA1D,EAAAC,EAAAC,EAAA,sBAAAyD,IAAA3D,EAAAC,EAAAC,EAAA,sBAAA0D,IAAA5D,EAAAC,EAAAC,EAAA,sBAAA2D,IAAA7D,EAAAC,EAAAC,EAAA,sBAAA4D,IAAA,IAAAC,EAAA/D,EAAA,GAAAgE,EAAAhE,EAAA,GAGasD,EAAiB,SAACf,EAAS0B,GAAV,MAAoB,CAC9CxB,KAAMC,IACNC,KAAM,CACFJ,UACAW,KAAM,CACFgB,aAAcD,MAKbV,EAAW,SAAChB,EAAS4B,GAAV,MAA2B,CAC/C1B,KAAMC,IACNC,KAAM,CACFJ,UACAW,KAAM,CACFjC,GAAIkD,EACJC,KAAM1D,IACNwD,cAAc,EACdhD,SAAU,OAKTsC,EAAa,SAACjB,EAAS8B,EAAWF,GAArB,MAAsC,CAC5D1B,KAAMC,IACNC,KAAM,CACFJ,UACA8B,YACAnB,KAAM,CACFjC,GAAIkD,EACJC,KAAM1D,IACNwD,cAAc,EACdhD,SAAU,OAKTuC,EAAW,SAAClB,EAAS+B,EAAWD,EAAWE,GAAhC,MAAgD,CACpE9B,KAAMC,IACNC,KAAM,CACFJ,UACA+B,YACAD,YACAE,gBAIKb,EAAa,SAACnB,EAAS6B,GAAV,MAAoB,CAC1C3B,KAAMC,IACNC,KAAM,CACFJ,UACAW,KAAM,CACFkB,WAKCT,EAAa,SAACpB,EAASiC,GAAV,MAAoB,CAC1C/B,KAAMC,IACNC,KAAM,CACFJ,UACAW,KAAM,CACFsB,WAKCZ,EAAa,SAACrB,EAAS8B,GAAV,MAAyB,CAC/C5B,KAAMC,IACNC,KAAM,CACFJ,UACA8B,eAIKR,EAAY,SAAAtB,GAAO,MAAK,CACjCE,KAAMC,IACNC,KAAM,CACFJ,aAIKuB,EAAa,SAAAW,GAAO,MAAK,CAClChC,KAAMC,IACNC,KAAM,CACF8B,8CCxFRzE,EAAAC,EAAAC,EAAA,sBAAAwE,IAAA1E,EAAAC,EAAAC,EAAA,sBAAAyE,IAAA3E,EAAAC,EAAAC,EAAA,sBAAA0E,IAAA5E,EAAAC,EAAAC,EAAA,sBAAA2E,IAAO,IAAMH,EAAa,uBACbC,EAAW,qBACXC,EAAgB,yBAChBC,EAAY,uDCHzB7E,EAAAC,EAAAC,EAAA,sBAAA4E,IAAA9E,EAAAC,EAAAC,EAAA,sBAAA6E,IAAO,IAAMD,EAAc,qBACdC,EAAgB,wDCD7B,IAAAC,EAAAhF,EAAA,GAEeE,EAAA,GACXe,GAAIV,IACJ6D,KAAM,eACNF,cAAc,EACdhD,SAAU,CACN,CACID,GAAI,OACJmD,KAAM,gBACNF,cAAc,EACdhD,SAAU,IAEd,CACID,GAAI,OACJmD,KAAM,gBACNF,cAAc,EACdhD,SAAU,IAEd,CACID,GAAI,OACJmD,KAAM,gBACNF,cAAc,EACdhD,SAAU,uCCvBtBlB,EAAAC,EAAAC,EAAA,sBAAA+E,IAAO,IAAMA,EAAoB,6DCAjCjF,EAAAC,EAAAC,EAAA,sBAAAgF,IAAAlF,EAAAC,EAAAC,EAAA,sBAAAiF,IAAA,IAAApB,EAAA/D,EAAA,IAEakF,EAAa,SAACT,EAASW,GAAV,MAAwB,CAC9C3C,KAAMC,IACNC,KAAM8B,EAAW,CAACA,UAASW,YAAa,OAG/BD,EAAe,iBAAO,CAAC1C,KAAMC,8HCL7B2C,EAAW,SAAAC,GAAK,MAAK,CAC9B7C,KAAMC,IACNC,KAAM,CACF2C,WCDOC,EAAA,WAAM,IAAAC,EAC8CC,qBAAWC,KAAnEC,OADUC,EAAAJ,EACDK,MAAQC,EADPF,EACOE,YAAaC,EADpBH,EACoBG,WAAaC,EADjCR,EACiCQ,SAMlD,MAAO,CACHC,MANUC,kBAAQ,kBAAMH,EAAWD,IAAc,CAACA,IAOlDA,cACAC,aACAI,SARa,SAAAC,GDEG,IAAAN,ECDhBE,GDCgBF,ECDeM,EDCC,CACpC3D,KAAMC,IACNC,KAAM,CACFmD,kLEPR,IAceO,EAdO,SAAAC,GAAgB,IAAdpF,EAAcoF,EAAdpF,SACb+E,EAASV,IAATU,MAEP,OAAQM,EAAAjF,EAAAC,cAAA,OAAKG,UAAWC,YAAFC,IACpBG,IAAqBkE,EAAMO,KAC3BzE,IAAsBkE,EAAMQ,MAC5B1E,IAAuBkE,EAAMS,OAC7B3E,IAAqBkE,EAAMU,KAC3B5E,IAAmBkE,EAAMW,KAEtB1F,kCCVM2F,EAAA,WAAM,IAAAC,EACsFrB,qBAAWC,KAAvFqB,EADVD,EACVrC,QAAUuB,SAA6CgB,EAD7CF,EACsBG,WAAajB,SAAuCkB,EAD1EJ,EACyDI,QAAUrB,MAE9EsB,EAAgB,SAAAC,GAClB,GAAIA,EAAU,KACH3C,EAAqB2C,EAArB3C,QAASW,EAAYgC,EAAZhC,SAChB2B,EAAUjD,YAAWuD,KAAKC,MAAM7C,KAChCuC,EAAU1E,YAAU8C,MAI5B,MAAO,CACHmC,YAAa,WACTJ,EAAcD,EAAQM,KAAKN,EAAQM,KAAKC,OAAS,KAErDC,YAAa,WACTP,EAAcD,EAAQS,KAAK,OCDxBC,EAfC,WAAM,IACQC,EAAcpC,qBAAWC,KAA5CC,OAASK,SAChB,MAAO,CACH8B,OAAQ,SAACC,EAAEC,GACPH,EJQU,SAACE,EAAEC,GAAH,MAAU,CAC5BvF,KAAMC,IACNC,KAAM,CACFoF,IAAEC,MIXYC,CAAoBF,EAAEC,KAEpCE,QAAS,SAACH,EAAEC,GACRH,EJYW,SAACE,EAAEC,GAAH,MAAU,CAC7BvF,KAAMC,IACNC,KAAM,CACFoF,IAAEC,MIfYC,CAAqBF,EAAEC,KAErCG,UAAW,WJiBM,IAAAC,EIhBbP,EJgB0B,CAClCpF,KAAMC,IACNC,KAAM,CACFyF,iBKjBOC,EAZC,WAAM,IACQR,EAAcpC,qBAAWC,KAA5CC,OAASK,SAChB,MAAO,CACHsC,OAAQ,SAACP,EAAEC,GACPH,ELmCU,SAACE,EAAEC,GAAH,MAAU,CAC5BvF,KAAMC,IACNC,KAAM,CACFoF,IAAEC,MKtCYC,CAAoBF,EAAEC,KAEpCO,UAAW,WACPV,EL0BoB,CAC5BpF,KAAMC,IACNC,KAAM,kpBMlCV,IAOe6F,EAPI,SAAAlC,GAAyC,IAAvCmC,EAAuCnC,EAAvCmC,KAAMC,EAAiCpC,EAAjCoC,QAASxH,EAAwBoF,EAAxBpF,SAAUyH,EAAcrC,EAAdqC,SAC1C,OAAQpC,EAAAjF,EAAAC,cAAA,UAAQmH,QAASC,EAAWC,IAAoBF,EAAShH,UAAWmH,YAAGC,EAADtH,OAAAuH,EAAA,EAAAvH,CAAA,GAAYwH,EAAiBL,KACnGpC,EAAAjF,EAAAC,cAAA,KAAGG,UAAW,UAAY+G,IAC1BlC,EAAAjF,EAAAC,cAAA,YAAOL,KAOb4H,EAAUnH,YAAHsH,IAwBAlH,KAIPiH,EAAiBrH,YAAHG,mgBCtCpB,IAsCeoH,EAtCM,WACjB,IAAMC,EAAOC,mBADU5D,EAEsBC,qBAAWC,KAAjDC,OAAiBL,EAFDE,EAEPK,MAAQP,MAAQU,EAFTR,EAESQ,SAEhCqD,oBAAU,WACNC,SAAShE,MAAT,WAAAiE,OAA4BjE,GAC5BkE,aAAaC,QAAQ,QAASnE,IAC/B,CAACA,IA0BJ,OAAQiB,EAAAjF,EAAAC,cAAA,QAAMmI,IAAKP,EAAMzH,UAAWoH,EAASa,gBAAgB,OAAOC,+BAA+B,OACrFC,WAAW,QACXC,UA1BQ,SAAAC,GAClB,OAAQA,EAAMC,IAAIC,eACd,IAAK,SACDd,EAAKe,QAAQC,YAAc7E,EAC/B,IAAK,QACD6D,EAAKe,QAAQE,SAqBeC,OAdrB,WACf,IAAIC,EAAYnB,EAAKe,QAAQC,YAAYI,OACvB,KAAdD,IACAA,EAAYhF,GAEZgF,EAAU7C,OAAS,KACnB6C,EAAYA,EAAUE,MAAM,EAAG,KAEnCrB,EAAKe,QAAQC,YAAcG,EAC3BtE,EAASX,EAASiF,MAKuChF,IAM3DwD,EAAUnH,YAAH8I,IAGA1I,IAYkBA,qBClChB2I,EApBH,SAAApE,GAAwC,IAAtCqE,EAAsCrE,EAAtCqE,iBAAkBC,EAAoBtE,EAApBsE,eACb5E,EAAaP,qBAAWC,KAAhCC,OAAQK,SACRlC,EAAc+G,cAAd/G,WAQP,OAAQyC,EAAAjF,EAAAC,cAAA,WACJgF,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,2HACAvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,4FAA0BvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,CAAUpC,QAASkC,GAAnB,kCAA1B,UACArE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,KACIvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,CAAYpC,QAVE,WAClB5E,EAAWiH,KAAgB,GAC3B/E,EAASX,EAAStD,MAClB4I,MAOI,4BACApE,EAAAjF,EAAAC,cAAA,UAAQmH,QAASiC,GAAjB,oCCpBNK,EAAkB,SAACC,EAAMC,GAC3B,IAAIC,EAAO/G,EACX,OAAQ8G,GACJ,IAAK,KAQD,OAPID,EAAKG,MAAM,aACXD,EAAQF,EAAKG,MAAM,YAAY,GAAG3D,OAAS,EAC3CrD,EAAO6G,EAAKI,QAAQ,WAAY,KACzBJ,EAAKG,MAAM,eAClBD,EAAQF,EAAKG,MAAM,aAAa,GAAG3D,OAAS,EAC5CrD,EAAO6G,EAAKI,QAAQ,YAAa,KAE9B,CAACF,QAAO/G,QAEnB,IAAK,MAGD,MAAO,CAAC+G,MAFRA,EAAQF,EAAKG,MAAM,QAAQ,GAAG3D,OAEfrD,KADfA,EAAO6G,EAAKI,QAAQ,OAAQ,KAGhC,QACI,MAAO,CAACF,QAAO/G,UA6CrBkH,EAAoB,SAACC,EAAML,GAC7B,OAAQA,GACJ,IAAK,MACD,OAAO7D,KAAKC,MAAMiE,GACtB,IAAK,KAED,OAnBS,SAAfC,EAAgBN,EAAQO,EAAaC,EAAaC,GACpD,OAAQT,GACJ,IAAK,KAKD,OAJAO,EAAYxK,GAAK0K,EAAe5J,IAAqB2J,EAAY/I,KAAK1B,GACtEwK,EAAYrH,KAAOsH,EAAY/I,KAAKyB,KACpCqH,EAAYvH,aAAgD,aAAjCwH,EAAY/I,KAAKiJ,YAC5CH,EAAYvK,SAAWwK,EAAYxK,SAAS2K,IAAI,SAAAC,GAAK,OAAIN,EAAaN,EAAQ,GAAIY,KAC3EL,EACX,QACI,QAUOD,CAAaN,EAAQ,GADX7D,KAAKC,MAAMiE,GACeQ,MAAM,GAErD,QACI,SAIGC,EAAA,SAACC,EAAaf,GACzB,IAAIzG,EACJ,OAAQyG,GACJ,IAAK,KACL,IAAK,MAEDzG,EA5Dc,SAApByH,EAAqBC,EAAYjB,EAAQkB,GAA6B,IAAlBC,EAAkBC,UAAA7E,OAAA,QAAA8E,IAAAD,UAAA,GAAAA,UAAA,GAAP,GACjE,GAA0B,IAAtBH,EAAW1E,SAA+B,IAAf2E,EAA/B,CAGA,IAAmB,IAAfA,EAAkB,CAClB,IAAMI,EAAYxB,EAAgBmB,EAAWM,QAASvB,GACtDkB,EAAYI,EAAUrB,OAAS,EAC/BkB,EAAWG,EAAUpI,MAAQ,2BAQjC,IANA,IAAMgB,EAAW,CACbnE,GAAkB,IAAdmL,EAAkBrK,IAAqB2K,IAAI,GAAKC,KAAKC,MAAQC,KAAKC,SAAWT,GACjFjI,KAAMiI,EACNnI,cAAc,EACdhD,SAAU,IAEPiL,EAAW1E,OAAS,GAAG,KAAAsF,EACJ/B,EAAgBmB,EAAW,GAAIjB,GAA9CC,EADmB4B,EACnB5B,MAAO/G,EADY2I,EACZ3I,KACd,GAAI+G,GAASiB,EACT,MAEJD,EAAWM,QACPtB,GACA/F,EAASlE,SAAS8L,KAAKd,EAAkBC,EAAYjB,EAAQC,EAAO/G,IAG5E,OAAOgB,GAmCW8G,CADSD,EAAYgB,MAAM,MAAMC,OAAO,SAAAjC,GAAI,OAAIA,IAClBC,GAAS,GACjD,MACJ,QACIzG,EAAU6G,EAAkBW,EAAaf,GAGjD,OAAOzG,mUCnFX,IAmDe0I,EAnDF,SAAA7G,GAAwC,IAAtCqE,EAAsCrE,EAAtCqE,iBAAkBC,EAAoBtE,EAApBsE,eACb5E,EAAaP,qBAAWC,KAAjCC,OAASK,SACTlC,EAAc+G,cAAd/G,WAgCP,OAAQyC,EAAAjF,EAAAC,cAAA,WACJgF,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,uIACAvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,4FAA0BvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,CAAUpC,QAASkC,GAAnB,kCAA1B,UACArE,EAAAjF,EAAAC,cAAA,KAAGG,UAAW0L,GAAd,8CACA7G,EAAAjF,EAAAC,cAAA,MAAIG,UAAW2L,GACX9G,EAAAjF,EAAAC,cAAA,mCACAgF,EAAAjF,EAAAC,cAAA,qDACAgF,EAAAjF,EAAAC,cAAA,qCACAgF,EAAAjF,EAAAC,cAAA,uDAEJgF,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,KACIvE,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,CAAYpC,QAzCG,WACnB,IAAM4E,EAAQhE,SAAS/H,cAAc,SACrC+L,EAAM7K,KAAO,OACb6K,EAAMC,OAAS,oBACfD,EAAME,iBAAiB,SAAU,SAAAzD,GAI7B,IAHA,IAAM0D,EAAO1D,EAAM2D,OAAOC,MAAM,GAC5BC,EAAYH,EAAKI,KACjBC,EAAYF,EAAUnG,OAAS,EAC5BqG,EAAY,GAA8B,MAAzBF,EAAUE,IAC9BA,IAEJ,IAAM5C,EAAS0C,EAAUpD,MAAMsD,EAAY,GAAG7D,cAC1C3E,EAAQsI,EAAUpD,MAAM,EAAGsD,GACzBC,EAAc,IAAIC,WACxBD,EAAYE,OAAS,SAAAlE,GACjB,IAAMmE,EAAMnE,EAAM2D,OAAOS,OACnB1J,EAAUuH,EAAckC,EAAKhD,GAC/BzG,GAAWA,EAAQxD,KAAOV,KAC1BuD,EAAWW,GAAS,GACpBuB,EAASX,EAASC,IAClBqF,KAEAyD,MAAM,uEAGdL,EAAYM,WAAWZ,KAE3BH,EAAMgB,UAcF,4BACA/H,EAAAjF,EAAAC,cAAA,UAAQmH,QAASiC,GAAjB,mBAQNyC,EAAYzL,YAAH4M,KAMTlB,EAAe1L,YAAH6M,8fClElB,IAaeC,EAbO,SAAAnI,GAA0C,IAAxCL,EAAwCK,EAAxCL,MAAOG,EAAiCE,EAAjCF,MAAOsI,EAA0BpI,EAA1BoI,WAAYvI,EAAcG,EAAdH,SAK9C,OAAQI,EAAAjF,EAAAC,cAAA,MAAIG,UAAWmH,YAAGC,EAADtH,OAAAuH,EAAA,EAAAvH,CAAA,GAAYmN,EAAgBD,IAAchG,QAJ5C,WACnBvC,EAASC,KAITG,EAAAjF,EAAAC,cAAA,OAAKqN,MAAO,CAACC,gBAAiB5I,EAAMW,MACpCL,EAAAjF,EAAAC,cAAA,OAAKqN,MAAO,CAACC,gBAAiB5I,EAAMU,QACpCJ,EAAAjF,EAAAC,cAAA,OAAKqN,MAAO,CAACC,gBAAiB5I,EAAMO,QACpCD,EAAAjF,EAAAC,cAAA,OAAKqN,MAAO,CAACC,gBAAiB5I,EAAMQ,WAQtCqC,EAAUnH,YAAHmN,KAgBPH,EAAgBhN,YAAHoN,+KC9BnB,IAmBeC,EAnBD,SAAA1I,GAAwB,IAAtBqE,EAAsBrE,EAAtBqE,iBAAsBsE,EACU1J,IAArCO,EAD2BmJ,EAC3BnJ,YAAaC,EADckJ,EACdlJ,WAAYI,EADE8I,EACF9I,SAMhC,OAJAkD,oBAAU,WACNG,aAAaC,QAAQ,cAAe3D,IACrC,CAACA,IAEIS,EAAAjF,EAAAC,cAAA,WACJgF,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,6CACAvE,EAAAjF,EAAAC,cAAA,MAAIG,UAAW2L,GACVtH,EAAW8F,IAAI,SAAC5F,EAAOG,GAAR,OAAkBG,EAAAjF,EAAAC,cAAC2N,EAAD,CAAelF,IAAK/D,EAAMO,KAAMP,MAAOA,EAAOG,MAAOA,EACtCsI,WAAY5I,IAAgBM,EAAOD,SAAUA,OAElGI,EAAAjF,EAAAC,cAACuJ,EAAA,EAAD,KACIvE,EAAAjF,EAAAC,cAAA,UAAQmH,QAASiC,GAAjB,mBAQN0C,EAAe1L,YAAHwN,kyBCpBlB,IA4BeC,GAbD,SAAA9I,GAA8C,IAA5C7D,EAA4C6D,EAA5C7D,KAAMkI,EAAsCrE,EAAtCqE,iBAAkBC,EAAoBtE,EAApBsE,eAC9ByE,EAhBkB,SAAA5M,GACxB,OAAQA,GACJ,ICTW,MDUP,OAAOiI,EACX,ICVY,ODWR,OAAOyC,EACX,ICXc,SDYV,OAAOmC,eAAK,kBAAMtP,EAAAuP,EAAA,GAAAC,KAAAxP,EAAAyP,KAAA,aACtB,ICZa,QDaT,OAAOT,EACX,QACI,QAKQU,CAAoBjN,GACpC,OAAQ8D,EAAAjF,EAAAC,cAAA,OAAKG,UAAWoH,GAASJ,QAASE,KACtCrC,EAAAjF,EAAAC,cAAA,OAAKG,UAAWiO,IACZpJ,EAAAjF,EAAAC,cAAA,KAAGG,UAAW,uBAAyBkO,GAAclH,QAASiC,IAC9DpE,EAAAjF,EAAAC,cAACsO,EAAA,SAAD,CAAUC,SAAUvJ,EAAAjF,EAAAC,cAAAgF,EAAAjF,EAAAyO,SAAA,OAChBxJ,EAAAjF,EAAAC,cAAC8N,EAAD,CAAS1E,iBAAkBA,EAAkBC,eAAgBA,MAGrErE,EAAAjF,EAAAC,cAAA,OAAKG,UAAWsO,GAAStH,QAASiC,MAOpC7B,GAAUnH,YAAHsO,MAQPN,GAAkBhO,YAAHuO,MAgBfN,GAAejO,YAAHM,MAYZ+N,GAAUrO,YAAHQ,obE1Db,IAqHegO,GArHH,WAAM,IAAAC,EACYC,mBDlBV,QCiBFC,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GACPI,EADOF,EAAA,GACAG,EADAH,EAAA,GAAAxJ,EAEqFrB,qBAAWC,KAApFjB,EAFZqC,EAENrC,QAAWoB,MAAoCqB,EAFzCJ,EAEuBI,QAAWrB,MAAqCP,EAFvEwB,EAEoDnB,OAAUE,MAASP,MAC7EzB,EAAcgH,cAAdhH,UAHM6M,EAIyB9I,IAA/BE,EAJM4I,EAIN5I,OAAQI,EAJFwI,EAIExI,QAASC,EAJXuI,EAIWvI,UAJXwI,EAKgBtI,IAAtBC,EALMqI,EAKNrI,OAAQC,EALFoI,EAKEpI,UALFqI,EAMuB/J,IAA7BU,EANMqJ,EAMNrJ,YAAaG,EANPkJ,EAMOlJ,YAUfkD,EAAiB,WAGnBiG,KAAYvH,SAASwH,eAAe/O,MAAmByN,KAAK,SAAAuB,GACxD,IAAIC,EAAMD,EAAOE,UAAU,aAC3BC,YAAaF,EAAD,GAAAzH,OAASjE,EAAT,SACZ,IAAM3C,EAAO,CAACwO,QAAQC,aAAgB3M,EAAS,OAC/C2J,MAAMzL,GACN0O,KAAMC,KAAK,6BAA8B3O,GAAM6M,KAAK,kBAAMpB,MAAK,mBAC5DmD,MAAM,SAAAC,GACLpD,MAAMoD,QA4BZC,EAAa,SAACC,GAEhB,OADAC,QAAQC,IAAI,eAAMF,GAAc,gBACxBA,GACJ,IAAK,KACD5J,IACA,MACJ,IAAK,MACDI,IACA,MACJ,QACIC,MAIN0J,EAAa,SAACC,GAEhB,OADAH,QAAQC,IAAI,eAAME,GAAc,gBACxBA,GACJ,IAAK,KACDxJ,EAAO,GAAG,GACV,MACJ,IAAK,OACDA,EAAO,EAAE,GACT,MACJ,IAAK,OACDA,GAAQ,EAAE,GACV,MACJ,IAAK,QACDA,EAAO,EAAE,GACT,MACJ,QACIC,MAIZ,OAAQhC,EAAAjF,EAAAC,cAAA,OAAKG,UAAWoH,IACpBvC,EAAAjF,EAAAC,cAAA,WAASG,UAAWqQ,GAASrJ,QAASE,KAClCrC,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,eAAgBC,QA9EpB,WAClB+H,ED7BW,SC0GP,gBACAlK,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QA7DlB,WACnB+H,ED9CY,UC0GR,gBACAlK,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,gBAAiBC,QAASkC,GAA5C,kCACArE,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,YAAaC,QA3DlB,WACjB+H,EDjDc,YC2GV,gBACAlK,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,UAAWC,QAxDjB,WAChB+H,EDpDa,WC2GT,gBACAlK,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAAS,kBAAM+I,EAAW,QAA3D,gBACAlL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,eAAgBC,QAAS,kBAAM+I,EAAW,SAA5D,gBACAlL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAAS,kBAAM+I,MAAhD,iBAEJlL,EAAAjF,EAAAC,cAAA,WAASG,UAAWqQ,IAChBxL,EAAAjF,EAAAC,cAAC0Q,EAAD,OAEJ1L,EAAAjF,EAAAC,cAAA,WAASG,UAAWqQ,GAASrJ,QAASE,KAClCrC,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAAS,kBAAMmJ,MAAhD,gBACAtL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,aAAcC,QAAS,kBAAMmJ,EAAW,UAA1D,UACAtL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,WAAYC,QAAS,kBAAMmJ,EAAW,QAAxD,UACAtL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,aAAcC,QAAS,kBAAMmJ,EAAW,UAA1D,UACAtL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAAS,kBAAMmJ,EAAW,WAA3D,UACAtL,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,OAAQE,SAAkC,IAAxBzB,EAAQM,KAAKC,OAAciB,QAlEpD,WACfnB,MAiEI,gBACAhB,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,OAAQE,SAAkC,IAAxBzB,EAAQS,KAAKF,OAAciB,QA/DpD,WACfhB,MA8DI,gBACAnB,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,QAASC,QA5Dd,WACjB7E,EAAU9B,OA2DN,yCD/HQ,SCiIXyO,GACGjK,EAAAjF,EAAAC,cAAC2Q,GAAD,CAAOzP,KAAM+N,EAAO7F,iBAzGH,WACrB8F,ED1BY,SCkIgD7F,eAAgBA,MAO9E9B,GAAUnH,YAAHwQ,MAePJ,GAAUpQ,YAAHyQ,eCnEEC,UAhFA,WAAI,IAAAjC,EACeC,mBAAS,CACvCiC,MAAK,EACLzE,KAAK,GACL0E,MAAM,GACNC,SAAS,GACTC,UAAU,KANKnC,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GACVsC,EADUpC,EAAA,GACAqC,EADArC,EAAA,GASVgC,EAAoCI,EAApCJ,KAAKzE,EAA+B6E,EAA/B7E,KAAK0E,EAA0BG,EAA1BH,MAAMC,EAAoBE,EAApBF,SAASC,EAAWC,EAAXD,UAI1BG,EAAS,SAAArD,GAAC,OAAGoD,EAAYnR,OAAAqR,GAAA,EAAArR,CAAA,GAAIkR,EAALlR,OAAAuH,EAAA,EAAAvH,CAAA,GAAe+N,EAAE7B,OAAOG,KAAM0B,EAAE7B,OAAOoF,UASnE,OACEvM,EAAAjF,EAAAC,cAAA,OAAKN,GAAG,uBAAsB2N,MAAO,CAAEmE,QAAST,EAAO,QAAU,SAC/D/L,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,cACb6E,EAAAjF,EAAAC,cAAA,UAAQG,UAAU,QAAQgH,QAflB,WACdiK,EAAYnR,OAAAqR,GAAA,EAAArR,CAAA,GAAIkR,EAAL,CAAcJ,MAAK,OAcxB,KACA/L,EAAAjF,EAAAC,cAAA,MAAIG,UAAU,sBAAd,WACA6E,EAAAjF,EAAAC,cAAA,KAAGG,UAAU,QAAO6E,EAAAjF,EAAAC,cAAA,KAAGG,UAAU,gBAAjC,wBACA6E,EAAAjF,EAAAC,cAAA,QAAMG,UAAU,OAAOsR,SAAU,SAAAzD,GAAC,OAd3B,SAAAA,GACbA,EAAE0D,iBACCT,IAAWC,EACdrE,MAAM,0BAEPA,MAAMsE,GASuCM,CAASzD,KAC7ChJ,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,cACb6E,EAAAjF,EAAAC,cAAA,SAAO2R,WAAS,EAACzQ,KAAK,OAAO0Q,YAAY,OAAOtF,KAAK,OAAOiF,MAAOjF,EAAM+E,SAAU,SAAArD,GAAC,OAAIqD,EAASrD,IAAI6D,UAAQ,KAE/G7M,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,cACb6E,EAAAjF,EAAAC,cAAA,SAAO2R,WAAS,EAACzQ,KAAK,QAAQ0Q,YAAY,gBAAgBL,MAAOP,EAAO1E,KAAK,QAAQ+E,SAAU,SAAArD,GAAC,OAAIqD,EAASrD,IAAI6D,UAAQ,IACzH7M,EAAAjF,EAAAC,cAAA,WACAgF,EAAAjF,EAAAC,cAAA,SAAOG,UAAU,aAAjB,iFAKF6E,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,cACb6E,EAAAjF,EAAAC,cAAA,SACE2R,WAAS,EACTzQ,KAAK,WACL0Q,YAAY,WACZtF,KAAK,WACLiF,MAAON,EACPI,SAAU,SAAArD,GAAC,OAAIqD,EAASrD,IACxB8D,UAAU,OAGd9M,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,cACb6E,EAAAjF,EAAAC,cAAA,SACE2R,WAAS,EACTzQ,KAAK,WACL0Q,YAAY,mBACZtF,KAAK,YACLiF,MAAOL,EACPG,SAAU,SAAArD,GAAC,OAAIqD,EAASrD,IACxB8D,UAAU,OAGd9M,EAAAjF,EAAAC,cAAA,SAAOkB,KAAK,SAASf,UAAU,kBAAkBoR,MAAM,cAEzDvM,EAAAjF,EAAAC,cAAA,KAAGG,UAAU,QAAb,4BAC2B6E,EAAAjF,EAAAC,cAAA,KAAG+R,KAAK,cAAR,WAC1B/M,EAAAjF,EAAAC,cAAA,iICrEIgS,GAAA,SAACtM,EAAYuM,EAAaC,GAAgB,IAC9ClQ,EAA0EiQ,EAA1EjQ,SAAUC,EAAgEgQ,EAAhEhQ,WAAYkQ,EAAoDF,EAApDE,SAAU9P,EAA0C4P,EAA1C5P,WAAYN,EAA8BkQ,EAA9BlQ,eAAgBqQ,EAAcH,EAAdG,WAkEnE,OAAO,SAAA5J,GACyB,KAAxB9C,EAAWpE,YACO+Q,UAAUC,SAAS5J,cAAc6J,WAAW,OACtB/J,EAAMgK,QAAUhK,EAAMiK,UACP,MAA5BjK,EAAMC,IAAIC,gBAC7BF,EAAMkK,SACNR,EAAY/L,cAEZ+L,EAAYlM,gBAIxB,GAA8B,KAA1BN,EAAWrE,WACX,KA7EuB,SAAAmH,GAC3B,OAAQA,EAAMC,IAAIC,eACd,IAAK,MACD1G,EAAS0D,EAAWrE,YACpB,MACJ,IAAK,QACDmH,EAAMkJ,iBACNzP,EAAWyD,EAAWrE,WAAYqE,EAAWnE,cAAcK,OAAOlC,IAClE,MACJ,IAAK,KACDyS,EAASzM,EAAWrE,YACpB,MACJ,IAAK,YACL,IAAK,SACDgB,EAAWqD,EAAWrE,WAAYqE,EAAWnE,cAAcK,OAAOlC,IAClE,MACJ,IAAK,IACD8I,EAAMkJ,iBACN3P,EAAe2D,EAAWrE,YAAaqE,EAAWnE,cAAcoB,cAChE,MACJ,IAAK,YACD6F,EAAMkJ,iBACFhM,EAAWnE,cAAcK,SAAWpB,IAChCkF,EAAWnE,cAAc5B,SAASuG,OAAS,GAC3CkM,EAAW1M,EAAWnE,cAAc5B,SAAS2L,KAAKqH,MAAMjN,EAAWnE,cAAc5B,SAASuG,OAAS,IAAIxG,IAGtGgG,EAAWnE,cAAcM,QAEnB6D,EAAWnE,cAAc5B,SAASuG,OAAS,GAClDkM,EAAW1M,EAAWnE,cAAc5B,SAAS,GAAGD,IAFhD0S,EAAW1M,EAAWnE,cAAcK,OAAOlC,IAKnD,MACJ,IAAK,aACD8I,EAAMkJ,iBACFhM,EAAWnE,cAAcM,QACzBuQ,EAAW1M,EAAWnE,cAAcK,OAAOlC,IACpCgG,EAAWnE,cAAc5B,SAASuG,OAAS,GAClDkM,EAAW1M,EAAWnE,cAAc5B,SAAS,GAAGD,IAEpD,MACJ,IAAK,UACD8I,EAAMkJ,iBACN,IAAMkB,EAAYlN,EAAWnE,cAAcK,OAAOjC,SAASkT,UAAU,SAAAtI,GAAK,OAAIA,EAAM7K,KAAOgG,EAAWnE,cAAc7B,KAChHkT,EAAY,GACZR,EAAW1M,EAAWnE,cAAcK,OAAOjC,SAASiT,EAAY,GAAGlT,IAEvE,MAEJ,IAAK,YACD8I,EAAMkJ,iBACN,IAAMkB,EAAYlN,EAAWnE,cAAcK,OAAOjC,SAASkT,UAAU,SAAAtI,GAAK,OAAIA,EAAM7K,KAAOgG,EAAWnE,cAAc7B,KAEhHkT,EADalN,EAAWnE,cAAcK,OAAOjC,SAASuG,OAAS,GAE/DkM,EAAW1M,EAAWnE,cAAcK,OAAOjC,SAASiT,EAAY,GAAGlT,KAuBvEoT,CAAuBtK,GACzB,MAAOwF,GACLnB,MAAM,yHCrFhBkG,GAAgB,CAClBC,OAAQ,EACRC,OAAQ,GAGGC,GAAA,SAACC,EAAUtM,EAASuM,GAAgB,IACvC7M,EAA4B4M,EAA5B5M,OAAQI,EAAoBwM,EAApBxM,QAASI,EAAWoM,EAAXpM,OAmCzB,OAAO,SAAAyB,GACH,KA3B4B,SAAAwF,GAE5B,IAAkB,IAAdA,EAAEyE,SAAoBzE,EAAEqF,WAIxB,OAHArF,EAAE0D,iBACF1D,EAAEsF,uBAZY,SAACtF,GACnB,OAAIA,EAAEqF,WACKrF,EAAEqF,WAEc,IAAfrF,EAAEqF,WASVE,CAAcvF,GAAK,EAAIzH,EAAOyH,EAAEwF,QAAQxF,EAAEyF,SAAW9M,EAAQqH,EAAEwF,QAAQxF,EAAEyF,UAI7E,GAAkB,IAAdzF,EAAE0F,SAA4B,cAAX1F,EAAE9M,KAGrB,OAFA6R,GAAcC,OAAShF,EAAEwF,aACzBT,GAAcE,OAASjF,EAAEyF,SAI7B,GAAIzF,EAAE2F,QAAwB,IAAd3F,EAAE0F,QAAe,CAC7B1F,EAAEsF,kBAD2B,IAErBN,EAAmBD,GAAnBC,OAAQC,EAAWF,GAAXE,OACVW,EAAU5F,EAAEwF,QAAUR,EACtBa,EAAU7F,EAAEyF,QAAUR,EAC5BlM,EAAO6M,EAAS,GAAKR,EAAaS,EAAS,IAC3Cd,GAAcC,OAAShF,EAAEwF,QACzBT,GAAcE,OAASjF,EAAEyF,SAMzBK,CAAwBtL,GAC1B,MAAOwF,GACLnB,MAAM,yDAAYmB,eC3CjB+F,GAAkB,SAACC,GAAD,MAAa,CACxC9S,KAAMC,KACNC,KAAM,CACF4S,YCeOC,GAfM,WAAM,IAAAC,EACmChQ,qBAAWC,KAA9DgQ,UAAkBC,EADFF,EACJ5P,MAAwB+P,EADpBH,EACUzP,SACjC,MAAO,CACHsP,gBAAiB,SAACrR,GACX0R,EAAQJ,SAAStR,GAGpB2R,EAAWC,GAAgC5R,KAE/C6R,UAAW,SAAC7R,GACR2R,EAAWC,GAAgC5R,iVCRvD,IA0Ce8R,GA1CC,SAAAzP,GAA2B,IAAzB6E,EAAyB7E,EAAzB6E,MAAOjI,EAAkBoD,EAAlBpD,KAAMC,EAAYmD,EAAZnD,OACrBqQ,EAAc3I,cACdmL,EAAcR,KA8BpB,OAAQjP,EAAAjF,EAAAC,cAAA,OAAKG,UAAWoH,GAASJ,QAASE,KACtCrC,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,aAAcC,QA7Bb,WACnB8K,EAAYjQ,SAASL,EAAKjC,MA4B1B,kCACAsF,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,WAAYC,QAzBT,WACrB8K,EAAYhQ,WAAWN,EAAKjC,GAAIkC,EAAOlC,KAwBkB0H,SAAUwC,EAAQ,GAA3E,wCACA5E,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,SAAUC,QArBP,WACrB8K,EAAY5P,WAAWV,EAAKjC,GAAIkC,EAAOlC,KAoBgB0H,SAAUwC,EAAQ,GAAzE,gBACA5E,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAjBd,WACnB8K,EAAYE,SAASxQ,EAAKjC,MAgB1B,gBACAsF,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,cAAeC,QAVjB,WAChB8K,EAAYG,WAAWzQ,EAAKjC,IAC5B+U,EAAcV,iBAAgB,KAQ9B,4BACA/O,EAAAjF,EAAAC,cAACyQ,EAAD,CAAYvJ,KAAM,UAAWC,QAfJ,WACzB8K,EAAYlQ,eAAeJ,EAAKjC,IAAKiC,EAAKgB,eAckByE,SAAUwC,EAAQ,GAA8B,IAAzBjI,EAAKhC,SAASuG,QAAjG,oCAOFqB,GAAUnH,YAAHsU,6YC/Cb,IA+BeC,GA/BE,SAAA5P,GAAyB,IAAvB/D,EAAuB+D,EAAvB/D,QAASrB,EAAcoF,EAAdpF,SAClBiI,EAAOC,mBADyB+M,EAELtL,cAA1BnH,EAF+ByS,EAE/BzS,WAAYiQ,EAFmBwC,EAEnBxC,WAyBnB,OANAtK,oBAAU,WACNF,EAAKe,QAAQkM,QACK9M,SAAS+M,eACjBC,kBAAkBnN,EAAKe,UAClC,IAEK3D,EAAAjF,EAAAC,cAAA,OAAKG,UAAWoH,GAASY,IAAKP,EAAMQ,gBAAgB,OAAOC,+BAA+B,OACrFlB,QAASE,IAAmBkB,UAxBnB,SAAAC,GAClB,OAAQA,EAAMC,IAAIC,eACd,IAAK,SACDd,EAAKe,QAAQC,YAAcjJ,EAC/B,IAAK,QACDiI,EAAKe,QAAQE,SAmB0CC,OAZhD,WACf3G,EAAWnB,EAAS4G,EAAKe,QAAQC,aACjCwJ,EAAWpR,KAUyErB,IAMtF4H,GAAUnH,YAAH4U,6DChCbC,KAAOC,WAAW,CACdC,SAAU,IAAIF,KAAOG,SACrBC,UAAW,SAAUC,GACjB,OAAOC,KAAKC,cAAcF,GAAM/D,OAEpCkE,UAAU,EACVC,KAAK,EACLC,QAAQ,EACRC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,OAAO,IA0BIC,OAvBf,SAAmBnW,GAAO,IAAAoW,EACApW,EAAdqW,cADc,IAAAD,EACP,GADOA,EActB,OANAnO,oBAAU,WACNC,SAASoO,iBAAiB,YAAYC,QAAQ,SAACC,GAC7Cd,KAAKe,eAAeD,MAEtB,CAACH,IAGDlR,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,aACX6E,EAAAjF,EAAAC,cAAA,KAAGG,UAAU,cAAckN,MAAO,CAAEkJ,SAAU,MAE9CvR,EAAAjF,EAAAC,cAAA,OAAKG,UAAU,oBAAoBqW,wBAAyB,CAAEC,OAAQxB,KAAOiB,w1DC5BzF,IAsDeQ,GAtDF,SAAA3R,GAA+C,IAA7C6E,EAA6C7E,EAA7C6E,MAAOjI,EAAsCoD,EAAtCpD,KAAMC,EAAgCmD,EAAhCnD,OAAQ+U,EAAwB5R,EAAxB4R,UAAW9U,EAAakD,EAAblD,QACrC+F,EAAOC,mBAD2CtC,EAEmCrB,qBAAWC,KAF9CyS,EAAArR,EAEjDG,WAAoBA,EAF6BkR,EAEpCtS,MAA6BmB,EAFOmR,EAEjBnS,SAAwC2P,EAFvB7O,EAEK4O,UAAY7P,MACnE2N,EAAc3I,cA+BpB,OAfAxB,oBAAU,WAEN,OADA6O,EAAUE,IAAIjP,GACP,WACH+O,EAAUG,OAAOlP,KAEtB,IAEHE,oBAAU,WACFpC,EAAWrE,aAAeM,EAAKjC,KAC/BkI,EAAKe,QAAQoO,eAAe,CAACC,SAAU,SAAUX,MAAO,SAAUY,OAAQ,WAC1ExR,EAAU/D,YAAYC,EAAMC,EAAQC,MAEzC,CAAC6D,EAAWrE,WAAYM,IAGnBqD,EAAAjF,EAAAC,cAAA,OACJG,UAAWmH,YAAG4P,GAAcC,GAAevN,EAAQ,EAAIA,EAAQ,GAAlD3J,OAAAuH,EAAA,EAAAvH,CAAA,GAAwDmX,GAAgB1R,EAAWrE,aAAeM,EAAKjC,KACpH2X,UAAWzN,EAAQ,GAAKlE,EAAWpE,WAAaK,EAAKjC,GACrD4X,WAAUzV,EAAUrB,IAAkBA,IACtC+W,cAAa3V,EAAOlC,GACpB8X,qBAAoB7V,EAAKgB,aACzBjD,GAAIiC,EAAKjC,GACTyI,IAAKP,EACLT,QAASE,KACR3B,EAAWpE,WAAaK,EAAKjC,IAC9BsF,EAAAjF,EAAAC,cAACyX,GAAD,CAAUzW,QAASW,EAAKjC,IAAKiC,EAAKkB,MAClCmC,EAAAjF,EAAAC,cAAA,OAAKG,UAAWuX,GAAWJ,WAAU9W,IAAiB2G,QAvCjC,WACrB8K,EAAYG,WAAWzQ,EAAKjC,IAAI,IAsCiDiY,cAnC9D,WACnB1F,EAAYE,SAASxQ,EAAKjC,OAmC1BsF,EAAAjF,EAAAC,cAAA,SAAI2B,EAAKkB,KAAT,IAAgBlB,EAAKsB,MAAQ+B,EAAAjF,EAAAC,cAAC4X,GAAD,CAAW1B,OAAQvU,EAAKsB,QACnD2G,EAAQ,GAAKjI,EAAKhC,SAASuG,OAAS,GACtClB,EAAAjF,EAAAC,cAAA,UAAQG,UAAWmH,YAAGuQ,GAAgBhW,EAAUiW,GAAcC,IAAgB5Q,QAlCrD,WACzB8K,EAAYlQ,eAAeJ,EAAKjC,IAAKiC,EAAKgB,cAC1CsP,EAAY+F,oBAgCkGrW,EAAKgB,aAAe,IAAM,KACtI+C,EAAWrE,aAAeM,EAAKjC,IAAMgG,EAAWzE,kBAAqBmT,EAAQJ,QAC/EhP,EAAAjF,EAAAC,cAACiY,GAAD,CAASrO,MAAOA,EAAOjI,KAAMA,EAAMC,OAAQA,MAO7CsW,GAAqB,kDAAAlQ,OACoBxH,IADpB,qEAIrB0W,GAAe9W,YAAH+X,KAOM3X,IAYtB0X,GAIsB1X,KAOlB2W,GAAiB,CACnB/W,YADmBgY,KAOC5X,IACDA,KAGnBJ,YAXmBiY,KAaC7X,KAGpBJ,YAhBmBkY,MAqBnBlY,YArBmBU,OAgCjBsW,GAAgBhX,YAAHmY,KAEjBL,IAIIR,GAAYtX,YAAHoY,MAQTX,GAAgBzX,YAAHqY,MAebX,GAAc1X,YAAHsY,MAIXX,GAAe3X,YAAHuY,4NCnKlB,IAWeC,GAXC,SAAVA,EAAU7T,GAA+C,IAA7C6E,EAA6C7E,EAA7C6E,MAAOjI,EAAsCoD,EAAtCpD,KAAMgV,EAAgC5R,EAAhC4R,UAAW/U,EAAqBmD,EAArBnD,OAAQC,EAAakD,EAAblD,QAC9C,OAAQmD,EAAAjF,EAAAC,cAAA,OAAKG,UAAWmH,YAAGC,GAADtH,OAAAuH,EAAA,EAAAvH,CAAA,GAAY4Y,GAAahX,KAC/CmD,EAAAjF,EAAAC,cAAC8Y,GAAD,CAAMlP,MAAOA,EAAOjI,KAAMA,EAAMgV,UAAWA,EAAW/U,OAAQA,EAAQC,QAASA,IAC/EmD,EAAAjF,EAAAC,cAAA,WACK2B,EAAKgB,cAAgBhB,EAAKhC,SAAS2K,IAAI,SAAAyO,GAAQ,OAAI/T,EAAAjF,EAAAC,cAAC4Y,EAAD,CAASnQ,IAAKsQ,EAASrZ,GAAIkK,MAAOA,EAAQ,EACjCjI,KAAMoX,EAAUpC,UAAWA,EAC3B/U,OAAQD,EAAME,QAASA,SAQ1F0F,GAAUnH,YAAH4Y,MAKPH,GAAazY,YAAH6Y,yNCjBhB,IAmCeC,GAnCE,SAAAnU,GAA8B,IAA5B6E,EAA4B7E,EAA5B6E,MAAOjI,EAAqBoD,EAArBpD,KAAMgV,EAAe5R,EAAf4R,UACtBwC,EAAYtR,mBAEZuR,EAAQzX,EAAKhC,SAASuG,OACxBmT,EAAOD,EAAQ,EAAI9N,KAAKqH,MAAMyG,EAAQ,GAAKA,EAO/C,OAJAtR,oBAAU,WACNqR,EAAUxQ,QAAQoO,eAAe,CAACV,MAAO,SAAUY,OAAQ,YAC5D,IAEKjS,EAAAjF,EAAAC,cAAA,OAAKG,UAAWoH,IACpBvC,EAAAjF,EAAAC,cAAA,WACK2B,EAAKgB,cAAgBhB,EAAKhC,SAASsJ,MAAMoQ,GAAM/O,IAAI,SAAAyO,GAAQ,OAAI/T,EAAAjF,EAAAC,cAACsZ,GAAD,CAC5D7Q,IAAKsQ,EAASrZ,GACdkK,MAAOA,EAAQ,EACfjI,KAAMoX,EACNpC,UAAWA,EACX/U,OAAQD,EAAME,SAAS,OAE/BmD,EAAAjF,EAAAC,cAAA,OAAKmI,IAAKgR,GACNnU,EAAAjF,EAAAC,cAAC8Y,GAAD,CAAMlP,MAAO,EAAGjI,KAAMA,EAAMgV,UAAWA,EAAW/U,OAAQ7C,OAE9DiG,EAAAjF,EAAAC,cAAA,WACK2B,EAAKgB,cAAgBhB,EAAKhC,SAASsJ,MAAM,EAAGoQ,GAAM/O,IAAI,SAAAyO,GAAQ,OAAI/T,EAAAjF,EAAAC,cAACsZ,GAAD,CAC/D7Q,IAAKsQ,EAASrZ,GACdkK,MAAOA,EAAQ,EACfjI,KAAMoX,EACNpC,UAAWA,EACX/U,OAAQD,EACRE,SAAS,SAQnB0F,GAAUnH,YAAHmZ,eC1CPC,GAAa,SAACC,EAAKC,EAAQC,EAAQC,EAAMC,GAC3CJ,EAAIK,OAAOJ,EAAQC,GACnBF,EAAIM,cAAcL,EAAQG,EAAM,GAAMD,EAAO,GAAMF,EAAQG,EAAMD,EAAMC,IAuB9DG,GAAiB,SAACP,EAAK/U,EAAOxB,EAASoH,GAChDmP,EAAIQ,YACJR,EAAIS,UAAY,IAChBT,EAAIU,YAAczV,EAAMO,KAvBX,SAAXmV,EAAYX,EAAK9X,EAAM2I,GAAQ,IACtBxH,EAAuBnB,EAA3BjC,GAAeC,EAAYgC,EAAZhC,SACtB,GAAIA,EAASuG,OAAS,EAAG,KAAAmU,EAC6B/P,EAAIgQ,IAAIxX,GADrCyX,EAAAta,OAAA+O,EAAA,EAAA/O,CAAAoa,EAAA,GACdG,EADcD,EAAA,GACCE,EADDF,EAAA,GACiBG,EADjBH,EAAA,GAGrB5a,EAASyW,QAAQ,SAAA7L,GACb,IAAMoQ,EAAarQ,EAAIgQ,IAAI/P,EAAM7K,IACjC,GAAIib,EAAY,KAAAC,EAAA3a,OAAA+O,EAAA,EAAA/O,CAC8C0a,EAD9C,GACLE,EADKD,EAAA,GACSE,EADTF,EAAA,GACwBG,EADxBH,EAAA,GAAAA,EAAA,KAEMpa,IACdgZ,GAAWC,EAAKe,EAAeE,EAAUI,EAAeC,GAExDvB,GAAWC,EAAKgB,EAAgBC,EAAUG,EAAcE,GAE5DX,EAASX,EAAKlP,EAAOD,OAUjC8P,CAASX,EAAKvW,EAASoH,GACvBmP,EAAIuB,SACJvB,EAAIwB,aAGKC,GAAiB,SAACzB,EAAK/U,EAAOyW,EAAUC,EAAeC,EAAcC,GAG9E7B,EAAIQ,YACJR,EAAIU,YAAczV,EAAMO,KACxBwU,EAAIS,UAAY,IAChBT,EAAI8B,YAAY,CAAC,EAAG,IACpB,IAAIC,EAEAC,EADAf,GAAYU,EAAcM,IAAMN,EAAcO,QAAU,EAExDZ,GAAWM,EAAaK,IAAML,EAAaM,QAAU,EACrDL,GACAE,EAAWJ,EAAcQ,KACzBH,EAAUJ,EAAaQ,MACvBpC,EAAIqC,WAAWL,EAbQ,GAasBV,EAAUgB,GAbhC,GACD,MActBP,EAAWJ,EAAcS,MACzBJ,EAAUJ,EAAaO,KACvBnC,EAAIqC,WAAWL,EAASV,EAAUgB,GAjBX,GACD,KAkB1BvC,GAAWC,EAAK+B,EAAUd,EAAUe,EAASV,GAC7CtB,EAAIuB,SACJvB,EAAIwB,aCtDFe,GAAe,SAAAC,GACjB,IAAML,EAAOK,EAAIC,WACbL,EAAQD,EAAOK,EAAIE,YACnBT,EAAMO,EAAIG,UAEd,MAAO,CAAER,OAAMC,QAAOH,MAAKC,OADdD,EAAMO,EAAII,eAIZC,GAAA,SAACpZ,EAASqZ,EAAaC,EAAW9X,EAAOuN,EAAY9B,EAAKsM,GAAS,IAG1Ezb,EAAS8B,EAAWC,EAAWC,EAC/BrD,EAAU+c,EAAsBC,EAAuBC,EACvDxB,EAAeyB,EACfC,EAAgBC,EAAcC,EAAgBC,EAC9CC,EANIhb,EAAa+P,EAAb/P,SA8BFib,EAAwB,SAACnP,GAE3B8O,EAAiBN,EAAUY,WAC3BL,EAAgBP,EAAUa,UAAY,IAG1C,MAAO,CAEH,CACInc,KAAM,YACNoc,SAAU,SAAA9U,GAGN,GAlCRxH,EAAU,GACV8B,EAAY,GACZC,EAAY,GACZC,GAAa,EAEbrD,EAAW,GACX+c,EAAuB,GACvBC,EAAwB,GACxBC,EAA2B,GAE3BxB,OAAgBpQ,EAChB6R,GAAiB,EAEjBC,EAAiBN,EAAUY,WAC3BL,EAAgBP,EAAUa,UAAY,GACtCL,EAAkBR,EAAUL,YAC5Bc,EAAmBT,EAAUH,aAE7Ba,GAAe,EAePV,EAAUvQ,iBAAiB,SAAUkR,GACjC3U,EAAM2D,SAAW3D,EAAM2D,OAAOoR,QAAQC,MAAQhd,KAAmBgI,EAAM2D,OAAOoR,QAAQC,MAAQhd,KAAmB,CACjHQ,EAAUwH,EAAM2D,OAAOzM,GACvBoD,EAAY0F,EAAM2D,OAAOoR,QAAQ3b,OACjC,IAAMA,EAAS6b,YAASva,EAASJ,GACjC+Z,EAAiBjb,IAAWsB,EAC5BkY,EAAgBY,GAAajU,SAASwH,eAAezM,IACrDnD,EAAS,GAAKiC,EAAOjC,SAAS2K,IAAI,SAAAC,GAAK,OAAIA,EAAM7K,KACjD,IAAIge,EAAkB,GAEtB,GADAA,EAAgB,GAAK/d,EAAS,GAAG2K,IAAI,SAAAtJ,GAAO,OAAIgb,GAAajU,SAASwH,eAAevO,MACjF6b,GAAkB3Z,EAAQvD,SAASuG,OAAS,EAAG,CAC/C,IAAMmT,EAAO/N,KAAKqH,MAAMzP,EAAQvD,SAASuG,OAAS,GAClDvG,EAAW,CAACA,EAAS,GAAGsJ,MAAM,EAAGoQ,GAAO1Z,EAAS,GAAGsJ,MAAMoQ,IAC1DqE,EAAkB,CAACA,EAAgB,GAAGzU,MAAM,EAAGoQ,GAAOqE,EAAgB,GAAGzU,MAAMoQ,IAEnFqD,EAAuBgB,EAAgBpT,IAAI,SAAAqT,GAAI,OAAIrS,KAAKsS,IAALC,MAAAvS,KAAIrL,OAAA6d,GAAA,EAAA7d,CAAQ0d,EAAKrT,IAAI,SAAAyT,GAAM,OAAIA,EAAOnC,WACzFe,EAAwBe,EAAgBpT,IAAI,SAAAqT,GAAI,OAAIrS,KAAK0S,IAALH,MAAAvS,KAAIrL,OAAA6d,GAAA,EAAA7d,CAAQ0d,EAAKrT,IAAI,SAAAyT,GAAM,OAAIA,EAAOlC,YAC1Fe,EAA2Bc,EAAgBpT,IAAI,SAAAqT,GAAI,OAAIA,EAAKrT,IAAI,SAAAyT,GAAM,MAAI,CAACA,EAAOrC,IAAKqC,EAAOpC,UAASsC,OAAO,SAACC,EAAUC,GAAX,OAAmBD,EAASlW,OAAOmW,IAAM,SAInK,CACIjd,KAAM,OACNoc,SAAU,SAAA9U,GACN,IAAMiR,EAAM8C,EAAY6B,WAAW,MACnC3E,EAAI4E,UAAU,EAAG,EAAG9B,EAAY+B,MAAO/B,EAAYgC,QAMnD,IALA,IAAMnF,EAAQzZ,EAASuG,OACjBsY,GAAQxB,EAAgBP,EAAKjW,EAAE,IAC/BiY,GAAQxB,EAAiBR,EAAKhW,EAAE,IAChCiY,GAAWlW,EAAMhC,EAAIsW,GAAgB3M,EAAKqO,EAC5CG,GAAWnW,EAAM/B,EAAIsW,GAAe5M,EAAKsO,EACpCG,EAAI,EAAGA,EAAIxF,EAAOwF,IACvB,IAAK1B,GAAgBwB,EAAUhC,EAAqBkC,IAAMF,EAAU/B,EAAsBiC,GAAI,CAC1F,IAAIvD,EAAe,CAAEO,KAAMc,EAAqBkC,GAAI/C,MAAOc,EAAsBiC,IAC3EtD,EAA6B,IAANsD,IAAa/B,GAAmB9U,SAASwH,eAAevO,GAASuc,QAAQC,MAAQhd,IACxGqe,EAAajC,EAAyBgC,GAAG1Y,OAAS,EACxD,GAAIyY,EAAU/B,EAAyBgC,GAAG,GAAK,KAAOD,EAAU/B,EAAyBgC,GAAG,GAMxF,OALAvD,EAAaK,IAAMkB,EAAyBgC,GAAG,GAAK,GACpDvD,EAAaM,OAASiB,EAAyBgC,GAAG,GAClD1D,GAAezB,EAAK/U,EAAO1D,EAASoa,EAAeC,EAAcC,GACjEvY,EAAYpD,EAASif,GAAG,QACxB5b,GAAa,GAGjB,IAAK,IAAI8b,EAAI,EAAGA,EAAID,EAAa,EAAGC,GAAK,EACrC,GAAIH,EAAU/B,EAAyBgC,GAAGE,EAAI,IAAMH,EAAU/B,EAAyBgC,GAAGE,GAMtF,OALAzD,EAAaK,IAAMkB,EAAyBgC,GAAGE,EAAI,GACnDzD,EAAaM,OAASiB,EAAyBgC,GAAGE,GAClD5D,GAAezB,EAAK/U,EAAO1D,EAASoa,EAAeC,EAAcC,GACjEvY,EAAYpD,EAASif,GAAGE,EAAI,QAC5B9b,GAAa,GAIrB,GAAI2b,EAAU/B,EAAyBgC,GAAGC,IAAeF,EAAU/B,EAAyBgC,GAAGC,GAAc,IAMzG,OALAxD,EAAaK,IAAMkB,EAAyBgC,GAAGC,GAC/CxD,EAAaM,OAASiB,EAAyBgC,GAAGC,GAAc,GAChE3D,GAAezB,EAAK/U,EAAO1D,EAASoa,EAAeC,EAAcC,GACjEvY,EAAYpD,EAASif,EAAI,IAAMjf,EAASif,EAAI,GAAG,QAC/C5b,GAAa,MAOjC,CACI9B,KAAM,WACNoc,SAAU,SAAA9U,GACNA,EAAMkJ,mBAGd,CACIxQ,KAAM,YACNoc,SAAU,SAAA9U,GACFA,EAAM2D,QAAU3D,EAAM2D,OAAOoR,QAAQC,MAAQhd,MAC7CgI,EAAM2D,OAAO4S,WAAWC,UAAUnI,IAAI,UACtC9T,EAAYyF,EAAM2D,OAAO4S,WAAWrf,GACpCsD,GAAa,EACbka,GAAe,KAI3B,CACIhc,KAAM,YACNoc,SAAU,SAAA9U,GACFA,EAAM2D,QAAU3D,EAAM2D,OAAOoR,QAAQC,MAAQhd,MAC7CgI,EAAM2D,OAAO4S,WAAWC,UAAUC,OAAO,UACzClc,EAAY,GACZC,GAAa,EACbka,GAAe,KAI3B,CACIhc,KAAM,OACNoc,SAAU,SAAA9U,GACNA,EAAM2D,OAAO4S,WAAWC,UAAUC,OAAO,UACvB,KAAdlc,GAAoBA,IAAc/B,GAAW+B,IAAcD,GAC3DZ,EAASlB,EAAS+B,EAAWD,EAAWE,KAIpD,CACI9B,KAAM,UACNoc,SAAU,WACMf,EAAY6B,WAAW,MAC/BC,UAAU,EAAG,EAAG9B,EAAY+B,MAAO/B,EAAYgC,QACnD/B,EAAU0C,oBAAoB,SAAU/B,oIC3JxD,IAuCegC,GAvCI,SAAApa,GAA4C,IAAzCqa,EAAyCra,EAAzCqa,WAAYC,EAA6Bta,EAA7Bsa,cAAenc,EAAc6B,EAAd7B,QACvC0E,EAAOC,mBAD8CgH,EAEnCC,mBAAS,GAF0BC,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GAEpDyQ,EAFoDvQ,EAAA,GAE9CwQ,EAF8CxQ,EAAA,GAInDrK,EAAUV,IAAVU,MAEFuN,EAAc3I,cAEKkW,EAAatb,qBAAWC,KAAzCC,OAAUE,MACX6L,EAAUqP,EAAVrP,KAAK3J,EAAKgZ,EAALhZ,EAAEC,EAAG+Y,EAAH/Y,EAERgZ,EAAqB,WACvBF,EAAQnU,KAAKC,QAwBjB,OArBAvD,oBAAU,WAEN,OADA4X,OAAOzT,iBAAiB,SAAUwT,GAC3B,WACHC,OAAOR,oBAAoB,SAAUO,KAE1C,IAEH3X,oBAAU,WACN,IAAM6X,EAAarD,GAAcpZ,EAAS0E,EAAKe,QAAS0W,EAAc1W,QAASjE,EAAOuN,EAAY9B,EAAK,CAAC3J,IAAEC,MAE1G,OADAkZ,EAAWvJ,QAAQ,SAAA5N,GAAK,OAAIT,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAoByL,iBAAiBzD,EAAMtH,KAAMsH,EAAM8U,YACvG,WACHqC,EAAWvJ,QAAQ,SAAA5N,GAAK,OAAIT,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAoB0e,oBAAoB1W,EAAMtH,KAAMsH,EAAM8U,cAEtH,CAACpa,EAASwB,EAAMyL,EAAK3J,EAAEC,IAE1BqB,oBAAU,WACN,IAAMmU,EAAMrU,EAAKe,QACjBsT,EAAIqC,MAAQc,EAAWzW,QAAQwT,YAC/BF,EAAIsC,OAASa,EAAWzW,QAAQ0T,cACjC,CAACnZ,EAASoc,EAAME,EAAOrP,OAElBnL,EAAAjF,EAAAC,cAAA,UAAQmI,IAAKP,EAAMzH,UAAWoH,MAMpCA,GAAUnH,YAAHyf,mIC5Cb,IA8BeC,GA9BI,SAAA/a,GAAsC,IAApCqa,EAAoCra,EAApCqa,WAAYlc,EAAwB6B,EAAxB7B,QAASyT,EAAe5R,EAAf4R,UAChC/O,EAAOC,mBADwCgH,EAE7BC,mBAAS,GAFoBC,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GAE9CyQ,EAF8CvQ,EAAA,GAExCwQ,EAFwCxQ,EAAA,GAI9CrK,EAASV,IAATU,MACc8a,EAAStb,qBAAWC,KAAlCC,OAAQE,MAETmb,EAAqB,SAACzR,GACxBuR,EAAQnU,KAAKC,QAmBjB,OAhBAvD,oBAAU,WAEN,OADA4X,OAAOzT,iBAAiB,SAAUwT,GAC3B,WACHC,OAAOR,oBAAoB,SAAUO,KAE1C,IAEH3X,oBAAU,WACN,IAAMmU,EAAMrU,EAAKe,QACjBsT,EAAIqC,MAAQc,EAAWzW,QAAQwT,YAC/BF,EAAIsC,OAASa,EAAWzW,QAAQ0T,aAChC,IAAM/R,EAAM,IAAIyV,IAAIC,MAAMC,KAAKtJ,GAAWrM,IAAI,SAAAnC,GAAG,MAAI,CAACA,EAAIQ,QAAQjJ,GAAI,CAAEyI,EAAIQ,QAAQuT,WAAc/T,EAAIQ,QAAQuT,WAAa/T,EAAIQ,QAAQwT,YAAehU,EAAIQ,QAAQyT,UAAY,GAAMjU,EAAIQ,QAAQ0T,aAAelU,EAAIQ,QAAQ4U,QAAQC,SAC7N/D,EAAMwC,EAAImC,WAAW,MAC3BpE,GAAeP,EAAK/U,EAAOxB,EAASoH,IACrC,CAACpH,EAASwB,EAAO4a,EAAME,EAAOrP,OAEzBnL,EAAAjF,EAAAC,cAAA,UAAQmI,IAAKP,EAAMzH,UAAWoH,MAMpCA,GAAUnH,YAAH8f,8ICvBb,IAAMvJ,GAAY,IAAIwJ,IA0EPC,GAxEC,SAAArb,GAAuB,IAApBsa,EAAoBta,EAApBsa,cACTzX,EAAOC,mBADsBtC,EAEuGrB,qBAAWC,KAA3HgV,EAFS5T,EAE3BrC,QAAWoB,MAAyCoB,EAFzBH,EAEIG,WAAcpB,MAA0C+b,EAF5D9a,EAEuCI,QAAWlB,SAAwC+a,EAF1Fja,EAEyEnB,OAAUE,MAEhH4N,EAAc5M,IACd2M,EAAc3I,cACdgX,EAAWja,IACXka,EAAWzZ,IACTkR,EAAoB/F,EAApB+F,gBAR2BnJ,EASXC,mBAAS,GATEC,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GAS5B2R,EAT4BzR,EAAA,GAStB0R,EATsB1R,EAAA,GAW7B2R,EAAe/b,kBAAQ,kBAAMmB,KAAK6a,UAAUxH,IAAY,CAACA,IAEzDyH,EAAe,WACjBH,EAAQrV,KAAKC,QA4CjB,OAzCAvD,oBAAU,WACN,IAAM+Y,EAAgB7O,GAAgBtM,EAAYuM,EAAaC,GAE/D,OADAwN,OAAOzT,iBAAiB,UAAW4U,GAC5B,WACHnB,OAAOR,oBAAoB,UAAW2B,KAE3C,CAACnb,IAEJoC,oBAAU,WAEN,OADA4X,OAAOzT,iBAAiB,QAAS+L,GAC1B,WACH0H,OAAOR,oBAAoB,QAASlH,KAEzC,IAEHlQ,oBAAU,WAEN,OADA4X,OAAOzT,iBAAiB,SAAU2U,GAC3B,WACHlB,OAAOR,oBAAoB,SAAU0B,KAE1C,IAEH9Y,oBAAU,WACN,IAAMsL,EAAciM,EAAc1W,QAAQmY,YAAczB,EAAc1W,QAAQoY,aACxEC,EAAmB9N,GAAmBoN,EAAUd,EAAOrP,MACvD8Q,EAAgB/N,GAAmBqN,EAAUf,EAAOrP,KAAMiD,GAIhE,OAHArL,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsByL,iBAAiB,QAAS+U,GAC3EjZ,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsByL,iBAAiB,YAAaiV,YAASD,EAAe,IACvGlZ,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsByL,iBAAiB,YAAagV,GACxE,WACHlZ,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsB0e,oBAAoB,QAAS8B,GAC9EjZ,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsByL,iBAAiB,YAAaiV,YAASD,EAAe,IACvGlZ,SAAS6X,cAAT,IAAA5X,OAA2BxH,MAAsByL,iBAAiB,YAAagV,KAEpF,CAACT,IAEJ1Y,oBAAU,WACNG,aAAaC,QAAQ,UAAWwY,GAChCL,EAAU1c,aAAW+c,EAAchb,EAAWrE,YAAcqE,EAAWpE,YACxE,CAACof,IAGA1b,EAAAjF,EAAAC,cAAA,OACIG,UAAWoH,GACXY,IAAKP,EACLyF,MAAO,CAAE8C,KAAMqP,EAAOrP,KAAMyL,KAAM4D,EAAOhZ,EAAI,KAAMkV,IAAK8D,EAAO/Y,EAAI,MACnE/G,GAAIc,IACJ6W,WAAW,GACXrS,EAAAjF,EAAAC,cAACmhB,GAAD,CAAU1Y,IAAK0Q,EAAUzZ,GAAIkK,MAAO,EAAGjI,KAAMwX,EAAWxC,UAAWA,KACnE3R,EAAAjF,EAAAC,cAACohB,GAAD,CAAYhC,WAAYxX,EAAMyX,cAAeA,EAAenc,QAASiW,IACrEnU,EAAAjF,EAAAC,cAACqhB,GAAD,CAAYjC,WAAYxX,EAAM1E,QAASiW,EAAWxC,UAAWA,OAQnEpP,GAAUnH,YAAHkhB,MChEEC,OA3Bf,SAAkB1hB,GAAO,IACb2hB,EAAa3hB,EAAb2hB,SADa3S,EAGGC,mBAAS0S,GAHZzS,EAAA9O,OAAA+O,EAAA,EAAA/O,CAAA4O,EAAA,GAGdhM,EAHckM,EAAA,GAGR0S,EAHQ1S,EAAA,GAoBrB,OAfAjH,oBAAU,WACN2Z,EAAQD,IACT,CAACA,IAcAxc,EAAAjF,EAAAC,cAAA,OAAKG,UAAWN,EAAMM,WAAa,IAC/B6E,EAAAjF,EAAAC,cAAA,YAAUqN,MAAOqU,GAAUrQ,SAblB,SAACrD,GACdyT,EAAQzT,EAAE7B,OAAOoF,QAYkCzI,OATxC,WACXsH,QAAQC,IAAI,qBAAOxN,GACnBhD,EAAMiJ,QAAUjJ,EAAMiJ,OAAOjG,IAOsC0O,MAAO1O,MAQ5E6e,GAAW,CACbpD,MAAO,OACPC,OAAQ,OACRoD,OAAQ,2fC5BZ,IA6BeC,GA7BG,WAAM,IAAArc,EAG0CrB,qBAAWC,KAAhDiQ,EAHL7O,EAGb4O,UAAY7P,MAHCud,EAAAtc,EAGcG,WAAYpB,MACvC/C,cAJaugB,EAAAD,EAIE5e,YAJF,IAAA6e,EAIO,GAJPA,EAIUjf,EAJVgf,EAIUhf,KAAKnD,EAJfmiB,EAIeniB,GAE7BuS,EAAY3I,cACZyY,EAAc9N,KAEpB,OAAIG,EAAQJ,OAKRhP,EAAAjF,EAAAC,cAAA,OAAKG,UAAW4Q,GAAM5J,QAAS,SAAA6G,GAAC,OAAEA,EAAEsF,mBAAmB/K,UAAW,SAAAyF,GAAC,OAAEA,EAAEsF,oBAAvE,6CACYzQ,GAAQ,SAEhBmC,EAAAjF,EAAAC,cAAA,KAAGG,UAAU,eAAekN,MAAO2U,GAAO7a,QAAS,kBAAI4a,EAAchO,iBAAgB,MACrF/O,EAAAjF,EAAAC,cAACiiB,GAAD,CACI9hB,UAAW8hB,GACXT,SAAUve,EACV6F,OAAQ,SAACyI,GAAD,OAAU7R,GAAMuS,EAAYiQ,aAAaxiB,EAAG6R,OAXrD,MAsBTR,GAAO3Q,YAAH+hB,MAiBJH,GAAM,CACRzL,SAAS,GACT6L,SAAU,WACVC,OAAO,UACPxG,MAAO,OACPH,IAAK,OAGHuG,GAAS7hB,YAADkiB,kJC1Dd,IASeC,GATF,WACT,IAAM3a,EAAOC,mBAEb,OAAQ7C,EAAAjF,EAAAC,cAAA,QAAMmI,IAAKP,EAAMzH,UAAWoH,GAAS7H,GAAIc,KAC7CwE,EAAAjF,EAAAC,cAACwiB,GAAD,CAASnD,cAAezX,IACxB5C,EAAAjF,EAAAC,cAACyiB,GAAD,QAOFlb,GAAUnH,YAAHsiB,MCMEC,GAdH,WAER,OAEA3d,EAAAjF,EAAAC,cAACmE,EAAA,EAAD,KACIa,EAAAjF,EAAAC,cAAC4iB,EAAD,KACA5d,EAAAjF,EAAAC,cAAC6iB,GAAD,MACA7d,EAAAjF,EAAAC,cAAC8iB,GAAD,MACA9d,EAAAjF,EAAAC,cAAC+iB,GAAD,SCNYC,QACW,cAA7BtD,OAAOuD,SAASC,UAEe,UAA7BxD,OAAOuD,SAASC,UAEhBxD,OAAOuD,SAASC,SAASrZ,MACvB,2DCXNsZ,IAASC,OAAOpe,EAAAjF,EAAAC,cAACqjB,GAAD,MAAStb,SAASwH,eAAe,SD0H3C,kBAAmB8C,WACrBA,UAAUiR,cAAcC,MAAMtV,KAAK,SAAAuV,GACjCA,EAAaC,gDElInB,IA6BMxZ,EAAe,SAAfA,EAAgBN,EAAQO,EAAaC,GACvC,OAAQR,GACJ,IAAK,KAOD,OANAO,EAAY9I,KAAO,GACnB8I,EAAY9I,KAAK1B,GAAKyK,EAAYzK,GAClCwK,EAAY9I,KAAKsiB,QAAUtY,KAAKC,MAChCnB,EAAY9I,KAAKyB,KAAOsH,EAAYtH,KACpCqH,EAAY9I,KAAKiJ,YAAcF,EAAYxH,aAAe,SAAW,WACrEuH,EAAYvK,SAAWwK,EAAYxK,SAAS2K,IAAI,SAAAC,GAAK,OAAIN,EAAaN,EAAQ,GAAIY,KAC3EL,EACX,QACI,SAcGvL,EAAA,WAACuE,EAASyG,GACrB,IAAIga,EACJ,OAAQha,GACJ,IAAK,KACL,IAAK,MACDga,EA7CgB,SAACzgB,EAASyG,GAClC,IAAIia,EAAQ,GAWZ,OAVY,SAANC,EAAOliB,EAAMiI,EAAOD,GACjBhI,IAGLiiB,EAAMnY,KApBW,SAAC9J,EAAMiI,EAAOD,GACnC,OAAQA,GACJ,IAAK,KACD,OAAIC,EAAQ,EACD,IAAIka,OAAOla,EAAQ,GAAK,IAAMjI,EAAKkB,KAEvC,KAAKihB,OAAOla,EAAQ,GAAK,KAAOjI,EAAKkB,KAChD,IAAK,MACD,MAAO,KAAKihB,OAAOla,GAASjI,EAAKkB,KACrC,QACI,QAUOkhB,CAAiBpiB,EAAMiI,EAAOD,IACzChI,EAAKhC,SAASyW,QAAQ,SAAA7L,GAClBsZ,EAAItZ,EAAOX,EAAQ,EAAGD,MAG9Bka,CAAI3gB,EAAS,EAAGyG,GACTia,EAAMI,KAAK,MAiCIC,CAAoB/gB,EAASyG,GAC3C,MACJ,QACIga,EAlBgB,SAACzgB,EAASyG,GAClC,OAAQA,GACJ,IAAK,KACD,IAAMua,EAAa,CAAC1Z,KAAMP,EAAaN,EAAQ,GAAIzG,IACnD,OAAO4C,KAAK6a,UAAUuD,GAC1B,QACI,OAAOpe,KAAK6a,UAAUuD,IAYRC,CAAoBjhB,EAASyG,GAGnD,OAAOga,8OClEEtc,EAAoB,SAAAmB,GAC7BA,EAAM8K,mBAGG8Q,EAAW,SAAXA,EAAWrY,GACpB,GAAIA,aAAiB9L,OAAQ,CACzB,GAAI+f,MAAMqE,QAAQtY,GACd,OAAOA,EAAMzB,IAAI8Z,GAErB,IAAIE,EAAS,GAIb,OAHArkB,OAAOskB,QAAQxY,GAAOqK,QAAQ,SAAArR,GAAkB,IAAAyf,EAAAvkB,OAAAwkB,EAAA,EAAAxkB,CAAA8E,EAAA,GAAhB0D,EAAgB+b,EAAA,GAAXjT,EAAWiT,EAAA,GAC5CF,EAAO7b,GAAO2b,EAAS7S,KAEpB+S,EAEX,OAAOvY,GAGE0R,EAAW,SAAXA,EAAY9b,EAAM+iB,GAC3B,OAAI/iB,EAAKjC,KAAOglB,EACL/iB,EAEJA,EAAKhC,SAAS2K,IAAI,SAAAC,GAAK,OAAIkT,EAASlT,EAAOma,KAAYC,KAAK,SAAAC,GAAI,OAAIA,KAGlEC,EAAsB,SAAtBA,EAAsBljB,GAC/BA,EAAKgB,cAAe,EACpBhB,EAAKhC,SAASyW,QAAQyO,IAGblV,EAAe,SAACF,EAAKqV,GAC9B,IAAMC,EAAOhd,SAAS/H,cAAc,KACpC+kB,EAAKhT,KAAOtC,EACZsV,EAAKC,SAAWF,EAChBC,EAAKhY,SAGImU,EAAS,SAAC+D,EAAKC,GACxB,IAAIC,EAAM,KACV,OAAO,WAAU,IAAAC,EAAAC,KAAAC,EAAAva,UACZoa,GAAOI,aAAaJ,GACvBA,EAAMK,WAAW,WAGfP,EAAKpH,MAAMuH,EAAKra,IAChBma,gJCzCKO,EAAuB3f,KAAKC,MAAMkC,aAAayd,QAAQ,aAAelc,IAEpEmc,EAAA,SAACziB,EAAS0iB,GACrB,OAAQA,EAAO1kB,MACX,KAAKC,IACD,IAAM0kB,EAAczB,YAASlhB,GACzB4iB,EAAarI,YAASoI,EAAaD,EAAOxkB,KAAKJ,SAInD,OAHI8kB,EAAWnmB,SAASuG,OAAS,GAAK4f,IAAeD,GACjD5lB,OAAOC,OAAO4lB,EAAYF,EAAOxkB,KAAKO,MAEnCkkB,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GAG7B,OAFiBua,YAASoI,EAAaD,EAAOxkB,KAAKJ,SACxCrB,SAAS8L,KAAKma,EAAOxkB,KAAKO,MAC9BkkB,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GAC7B,GAAI0iB,EAAOxkB,KAAK0B,UAAW,CACvB,IAAMgjB,EAAarI,YAASoI,EAAaD,EAAOxkB,KAAK0B,WAC/CijB,EAAeD,EAAWnmB,SAASkT,UAAU,SAAAlR,GAAI,OAAIA,EAAKjC,KAAOkmB,EAAOxkB,KAAKJ,UAAW,EAC9F8kB,EAAWnmB,SAASqmB,OAAOD,EAAc,EAAGH,EAAOxkB,KAAKO,MAE5D,OAAOkkB,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GACzBtB,EAAS6b,YAASoI,EAAaD,EAAOxkB,KAAK0B,WAC3CmjB,EAAarkB,EAAOjC,SAASkT,UAAU,SAAAlR,GAAI,OAAIA,EAAKjC,KAAOkmB,EAAOxkB,KAAKJ,UACvEklB,EAAYtkB,EAAOjC,SAASsmB,GAEhC,GADArkB,EAAOjC,SAASqmB,OAAOC,EAAY,GAC/BL,EAAOxkB,KAAK4B,WAAY,CACxB,IAAMmjB,EAAevkB,EAAOjC,SAASkT,UAAU,SAAAlR,GAAI,OAAIA,EAAKjC,KAAOkmB,EAAOxkB,KAAK2B,YAAa,GAAKnB,EAAOjC,SAASuG,OAAS,EAC1HtE,EAAOjC,SAASqmB,OAAOG,EAAe,EAAG,EAAGD,OACzC,CACiBzI,YAASoI,EAAaD,EAAOxkB,KAAK2B,WAC1CpD,SAAS8L,KAAKya,GAE9B,OAAOL,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GACzB4iB,EAAarI,YAASoI,EAAaD,EAAOxkB,KAAKJ,SAEnD,OADAf,OAAOC,OAAO4lB,EAAYF,EAAOxkB,KAAKO,MAC/BkkB,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GAC7B,GAAI0iB,EAAOxkB,KAAK0B,UAAW,CACvB,IAAMgjB,EAAarI,YAASoI,EAAaD,EAAOxkB,KAAK0B,WAC/CsjB,EAAeN,EAAWnmB,SAASkT,UAAU,SAAAlR,GAAI,OAAIA,EAAKjC,KAAOkmB,EAAOxkB,KAAKJ,UACnF8kB,EAAWnmB,SAASqmB,OAAOI,EAAc,GAE7C,OAAOP,EAEX,KAAK1kB,IACD,IAAM0kB,EAAczB,YAASlhB,GACvB4iB,EAAarI,YAASoI,EAAaD,EAAOxkB,KAAKJ,SAErD,OADA6jB,YAAoBiB,GACbD,EAEX,KAAK1kB,IACD,OAAOykB,EAAOxkB,KAAK8B,QAEvB,QACI,OAAOA,oBCrENmjB,EAA0B,CACnChlB,WAAY,GACZJ,iBAAiB,EACjBK,SAAU,GACVC,cAAe,IAGJ+kB,EAAA,SAAC5gB,EAAYkgB,GACxB,OAAQA,EAAO1kB,MACX,KAAKC,IAID,OAHIuE,EAAWrE,aAAeukB,EAAOxkB,KAAKC,mBAC/BukB,EAAOxkB,KAAKG,cAEhBtB,OAAAqR,EAAA,EAAArR,CAAA,GAAIyF,EAAekgB,EAAOxkB,MACrC,KAAKD,IACL,KAAKA,IACL,KAAKA,IACD,OAAOlB,OAAAqR,EAAA,EAAArR,CAAA,GAAIyF,EAAekgB,EAAOxkB,MACrC,QACI,OAAOsE,YClBN6gB,EAAuB,CAChCtgB,KAAM,GACNG,KAAM,GACNogB,cAAe,MAGJC,EAAA,SAAC9gB,EAASigB,GACrB,OAAQA,EAAO1kB,MACX,KAAKC,IACD,IAAMulB,EAActC,YAASze,GAc7B,OAbI+gB,EAAYF,gBACRE,EAAYzgB,KAAKC,OAAS,GAAKwgB,EAAYzgB,KAAKygB,EAAYzgB,KAAKC,OAAS,GAAGhD,UAAY0iB,EAAOxkB,KAAK8B,SACrGwjB,EAAYtgB,KAAKugB,QAAQD,EAAYF,eACrCE,EAAYzgB,KAAK2gB,OACVF,EAAYtgB,KAAKF,OAAS,GAAKwgB,EAAYtgB,KAAK,GAAGlD,UAAY0iB,EAAOxkB,KAAK8B,SAClFwjB,EAAYzgB,KAAKwF,KAAKib,EAAYF,eAClCE,EAAYtgB,KAAK8E,UAEjBwb,EAAYzgB,KAAKwF,KAAKib,EAAYF,eAClCE,EAAYtgB,KAAO,KAG3BsgB,EAAYF,cAAgBZ,EAAOxkB,KAC5BslB,EAEX,KAAKvlB,IACD,OAAOolB,EAEX,QACI,OAAO5gB,kBC3BNkhB,SAAsB,CAC/B9iB,MAAOkE,aAAayd,QAAQ,UAAYllB,IACxC+D,YAAauiB,OAAO7e,aAAayd,QAAQ,iBAAmB,EAC5DlhB,WAAY,CACR,CAAES,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,WAC7E,CAAEF,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,WAC7E,CAAEF,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,WAC7E,CAAEF,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,WAC7E,CAAEF,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,WAC7E,CAAEF,KAAM,UAAWC,MAAO,UAAWE,KAAM,UAAWC,GAAI,UAAWF,OAAQ,YAEjFgL,KAAM,EACN3J,EAAE,EACFC,EAAE,IAaSsgB,EAAA,SAAC3iB,EAAQwhB,GACpB,OAAQA,EAAO1kB,MACX,KAAKC,IACL,KAAKA,IACD,OAAOlB,OAAOC,OAAOkkB,YAAShgB,GAASwhB,EAAOxkB,MAClD,KAAKD,IACD,IAAM6lB,EAAY5C,YAAShgB,GAE3B,OADA4iB,EAAU7W,MAjBN,GAkBG6W,EAEX,KAAK7lB,IACD,IAAM6lB,EAAY5C,YAAShgB,GAG3B,OAFA4iB,EAAU7W,MAtBN,GAGeyN,EAoBe,IApBvBqJ,EAoBKD,GApBDve,EAoBW,SAlBrBmV,IACTqJ,EAAIxe,GAAKmV,GAkBEoJ,EAEX,KAAK7lB,IACD,IAAM6lB,EAAY5C,YAAShgB,GAE3B,OADA4iB,EAAU7W,KAAO,EACV6W,EAEX,KAAK7lB,IACD,IAAM6lB,EAAY5C,YAAShgB,GAG3B,OAFA4iB,EAAUxgB,GAAGof,EAAOxkB,KAAKoF,EAAEwgB,EAAU7W,KACrC6W,EAAUvgB,GAAGmf,EAAOxkB,KAAKqF,EAAEugB,EAAU7W,KAC9B6W,EAEX,KAAK7lB,IACD,IAAM6lB,EAAY5C,YAAShgB,GAG3B,OAFA4iB,EAAUxgB,EAAE,EACZwgB,EAAUvgB,EAAE,EACLugB,EAEX,KAAK7lB,IACD,IAAM6lB,EAAY5C,YAAShgB,GAG3B,OAFA4iB,EAAUxgB,EAAE,EACZwgB,EAAUxgB,EAAE,EACLwgB,EAEX,QACI,OAAO5iB,EA/CG,IAAC6iB,EAAIxe,EAAImV,WCpBlBsJ,EAAyB,CAClClT,QAAO,EACPmT,OAAO,IAGIhT,EAAA,SAACiT,EAAOxB,GACnB,OAAQA,EAAO1kB,MACX,KAAKC,IACD,IAAMkmB,EAAWjD,YAASgD,GAE1B,OADAC,EAASrT,OAAO4R,EAAOxkB,KAAK4S,OACrBqT,EACX,QACI,OAAOD,oCCTnB,IAAMjjB,EAAUmjB,IAAMC,cAAc,IAqCrBC,IAnCS,SAAA3nB,GAAS,IAAA4nB,EACDC,qBAAWC,EAAgBlC,GAD1BmC,EAAA3nB,OAAA+O,EAAA,EAAA/O,CAAAwnB,EAAA,GACtBI,EADsBD,EAAA,GACdpiB,EADcoiB,EAAA,GAAAE,EAEDJ,qBAAWK,EAAmB1B,GAF7B2B,EAAA/nB,OAAA+O,EAAA,EAAA/O,CAAA6nB,EAAA,GAEtBG,EAFsBD,EAAA,GAEdviB,EAFcuiB,EAAA,GAAAE,EAGDR,qBAAWS,EAAgB5B,GAH1B6B,EAAAnoB,OAAA+O,EAAA,EAAA/O,CAAAioB,EAAA,GAGtBG,EAHsBD,EAAA,GAGd/H,EAHc+H,EAAA,GAAAE,EAIDZ,qBAAWa,EAAe1B,GAJzB2B,EAAAvoB,OAAA+O,EAAA,EAAA/O,CAAAqoB,EAAA,GAItB9I,EAJsBgJ,EAAA,GAIdliB,EAJckiB,EAAA,GAAAC,EAKCf,qBAAWgB,EAAkBxB,GAL9ByB,EAAA1oB,OAAA+O,EAAA,EAAA/O,CAAAwoB,EAAA,GAMvBG,EAAW,CACb1lB,QAAS,CACLoB,MAAOujB,EACPpjB,SAAUe,GAEdE,WAAY,CACRpB,MAAO2jB,EACPxjB,SAAUgB,GAEdE,QAAS,CACLrB,MAAO+jB,EACP5jB,SAAU4b,GAEdjc,OAAQ,CACJE,MAAOkb,EACP/a,SAAU6B,GAEd6N,UAAW,CACP7P,MAxBqBqkB,EAAA,GAyBrBlkB,SAzBqBkkB,EAAA,KA6B7B,OAAQ3jB,EAAAjF,EAAAC,cAACmE,EAAQ0kB,SAAT,CAAkBtX,MAAOqX,GAC5B/oB,EAAMF,gECvCflB,EAAAC,EAAAC,EAAA,sBAAAmqB,IAAArqB,EAAAC,EAAAC,EAAA,sBAAAoqB,IAAAtqB,EAAAC,EAAAC,EAAA,sBAAAqqB,IAAAvqB,EAAAC,EAAAC,EAAA,sBAAAsqB,IAAAxqB,EAAAC,EAAAC,EAAA,sBAAAuqB,IAAAzqB,EAAAC,EAAAC,EAAA,sBAAAwqB,IAAA1qB,EAAAC,EAAAC,EAAA,sBAAAyqB,IAAA3qB,EAAAC,EAAAC,EAAA,sBAAA0qB,IAAO,IAAMP,EAAkB,yBAClBC,EAAY,mBACZC,EAAc,qBACdC,EAAY,mBACZC,EAAc,qBACdC,EAAc,qBACdC,EAAa,oBACbC,EAAc,+FCP3B,IAAAC,EAAA7qB,EAAA,GAAA8qB,EAAA9qB,EAAA,GAAA+qB,EAAA/qB,EAAA,IAAAgrB,EAAAhrB,EAAA,IAAAirB,EAAAjrB,EAAA,IAAAkrB,EAAAlrB,EAAA,IAAAmrB,EAAAnrB,EAAAorB,EAAAF,GAAAG,EAAArrB,EAAA,IAAAsrB,EAAAtrB,EAAAorB,EAAAC,GA6GexgB,IAtGI,WAAM,IAAA/D,EACuFrB,qBAAWC,KAA5FqB,EADND,EACdrC,QAAUuB,SAA6CgB,EADzCF,EACkBG,WAAajB,SAA0C4b,EADzE9a,EACqDI,QAAUlB,SACpF,MAAO,CACH1C,eAAgB,SAACf,EAAS0B,GACtB8C,EAAUwkB,IAA6BhpB,EAAS0B,KAEpDV,SAAU,SAAAhB,GACN,IAAM4B,EAAcuI,IAAI,GAAKC,KAAKC,MAAQC,KAAKC,UAC/C/F,EAAUwkB,IAA6BhpB,GAAS,IAChDwE,EAAUwkB,IAAuBhpB,EAAS4B,IAC1C6C,EAAUwkB,IAAyBrnB,IACnC,IAAMsnB,EAAW,CACblpB,UACA4B,eAEFkN,IAAMC,KAAK,+BAAgCma,GAAUjc,KAAK,kBAAMpB,MAAK,0CACpEmD,MAAM,SAAAC,GACLpD,MAAMoD,MAIdhO,WAAY,SAACjB,EAAS8B,GAClB,IAAMF,EAAcuI,IAAI,GAAKC,KAAKC,MAAQC,KAAKC,UAC/C/F,EAAUwkB,IAAyBhpB,EAAS8B,EAAWF,IACvD6C,EAAUwkB,IAAyBrnB,IACnC,IAAMsnB,EAAW,CACblpB,UACA8B,YACAF,eAEFkN,IAAMC,KAAK,+BAAgCma,GAAUjc,KAAK,kBAAMpB,MAAK,0CACpEmD,MAAM,SAAAC,GACLpD,MAAMoD,MAGd/N,SAAU,SAAClB,EAAS+B,EAAWD,EAAWE,GACtCwC,EAAUwkB,IAAuBhpB,EAAS+B,EAAWD,EAAWE,IAChEyC,EAAUwkB,IAA2BjpB,IACrC,IAAMkpB,EAAW,CACblpB,UACA+B,YACAD,YACAE,cAEF8M,IAAMC,KAAK,6BAA8Bma,IAE/C/X,SAAU,SAAAnR,GACNyE,EAAUwkB,IAAyBjpB,IACnC,IAAMkpB,EAAW,CACblpB,WAGF8O,IAAMC,KAAK,6BAA8Bma,IAE/C/nB,WAAY,SAACnB,EAAS6B,GAClB2C,EAAUwkB,IAAyBhpB,EAAS6B,IAC5C,IAAMqnB,EAAW,CACblpB,UACD6B,QAGDiN,IAAMC,KAAK,mCAAoCma,IAErDhI,aAAa,SAAClhB,EAAQiC,GAClBuC,EAAUwkB,IAAyBhpB,EAASiC,IAC5C,IAAMinB,EAAW,CACblpB,UACAiC,QAGF6M,IAAMC,KAAK,qCAAsCma,IAEvD9X,WAAY,SAACpR,EAASC,GAClBwE,EAAUwkB,IAA2BjpB,EAASC,KAGlDoB,WAAY,SAACrB,EAAS8B,GAClB0C,EAAUwkB,IAAyBhpB,EAAS8B,IAC5C2C,EAAUwkB,IAA2BnnB,IACrC,IAAMonB,EAAW,CACblpB,UACA8B,aAEFgN,IAAMC,KAAK,+BAAgCma,IAEjDlS,gBAAiB,WACbvS,EAAUwkB,QAEd1nB,WAAY,SAACW,EAASinB,GACdA,IACA9J,EAAUzc,eACV6B,EAAUwkB,IAA2B/mB,EAAQxD,MAEjD8F,EAAUwkB,IAAyB9mB,KAEvCZ,UAAW,SAAAtB,GACPwE,EAAUwkB,IAAwBhpB,IAClCyE,EAAUwkB,IAA2BjpB,uCCxGjDvC,EAAAC,EAAAC,EAAA,sBAAAyrB,IAAA3rB,EAAAC,EAAAC,EAAA,sBAAA0rB,IAAA5rB,EAAAC,EAAAC,EAAA,sBAAA2rB,IAAA7rB,EAAAC,EAAAC,EAAA,sBAAA4rB,IAAA9rB,EAAAC,EAAAC,EAAA,sBAAA6rB,IAAA/rB,EAAAC,EAAAC,EAAA,sBAAA8rB,IAAAhsB,EAAAC,EAAAC,EAAA,sBAAA+rB,IAAAjsB,EAAAC,EAAAC,EAAA,sBAAAgsB,IAAO,IAAMP,EAAY,kBACZC,EAAY,kBAGZC,EAAU,gBACVC,EAAW,iBACXC,EAAY,mBAEZC,EAAS,gBACTC,EAAY,mBACZC,EAAmB","file":"static/js/main.5786c88d.chunk.js","sourcesContent":["// Node Type\nexport const LEFT_NODE = 'nodeLeft';\nexport const RIGHT_NODE = 'nodeRight';\nexport const DROP_AREA = 'dropArea';\n\n// DOM 操作相关\nexport const ROOT_PARENT = {id: '', children: []};\nexport const ROOT_NODE_ID = 'rmind_root_node';\nexport const MINDMAP_ID = 'rmind_mindmap_wrapper';\nexport const MINDMAP_MAIN = 'rmind_main'\n\n// 缺省文本\nexport const NEW_NODE_TEXT = '新建节点';\nexport const DEFAULT_TITLE = '未命名导图';\n\n// CSS 主题变量名\nexport const THEME_MAIN = '--theme-main';\nexport const THEME_LIGHT = '--theme-light';\nexport const THEME_DARK = '--theme-dark';\nexport const THEME_EX = '--theme-ex';\nexport const THEME_ASSIST = '--theme-assist';","import React from 'react';\nimport {css} from 'emotion';\nimport * as refer from '../../../statics/refer';\n\nexport const ButtonSet = props => (<div {...props} className={css`\ndisplay: flex;\njustify-content: flex-end;\nmargin-top: 20px;\n\nbutton {\nmargin-left: 20px;\npadding: 10px 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\noutline: none;\n}\n\nbutton:active {\ntransform: scale(0.95);\n}\n`} />);\n\nexport const MainButton = props => (<button {...props} className={css` /* button& 用于提高 CSS 权重 */\nbutton& {\ncolor: #ffffff;\nbackground-color: var(${refer.THEME_DARK});\nborder: 1px solid var(${refer.THEME_MAIN});\n}\n`} />);\n\nexport const Highlight = props => (<p {...props} className={css`\nmargin-top: 0;\ncolor: var(${refer.THEME_ASSIST});\nfont-weight: 700;\n`} />);\n\nexport const Annotation = props => (<p {...props} className={css`\ncolor: #888888;\nfont-size: 90%;\n`} />);\n\nexport const Shortcut = props => (<a {...props} className={css`\ntext-decoration: underline;\ncursor: pointer;\n`} />);","import * as actionTypes from './actionTypes';\n\nexport const setSelect = (node_id, select_by_click) => ({\n    type: actionTypes.SET_SELECT,\n    data: {\n        cur_select: node_id,\n        select_by_click: select_by_click || false,\n        cur_edit: '',\n        cur_node_info: {}\n    }\n});\n\nexport const setEdit = node_id => ({\n    type: actionTypes.SET_EDIT,\n    data: {\n        cur_select: '',\n        cur_edit: node_id,\n        cur_node_info: {}\n    }\n});\n\nexport const clearAll = () => ({\n    type: actionTypes.CLEAR_ALL,\n    data: {\n        cur_select: '',\n        select_by_click: false,\n        cur_edit: '',\n        cur_node_info: {}\n    }\n});\n\nexport const getNodeInfo = (node, parent, on_left) => ({\n    type: actionTypes.GET_NODE_INFO,\n    data: {\n        cur_node_info: {\n            ...node,\n            parent,\n            on_left\n        }\n    }\n});\n","import * as actionTypes from './actionTypes';\nimport {NEW_NODE_TEXT} from '../../../statics/refer';\n\nexport const toggleChildren = (node_id, bool) => ({\n    type: actionTypes.TOGGLE_CHILDREN,\n    data: {\n        node_id,\n        node: {\n            showChildren: bool\n        }\n    }\n});\n\nexport const addChild = (node_id, new_node_id) => ({\n    type: actionTypes.ADD_CHILD,\n    data: {\n        node_id,\n        node: {\n            id: new_node_id,\n            text: NEW_NODE_TEXT,\n            showChildren: true,\n            children: []\n        }\n    }\n});\n\nexport const addSibling = (node_id, parent_id, new_node_id) => ({\n    type: actionTypes.ADD_SIBLING,\n    data: {\n        node_id,\n        parent_id,\n        node: {\n            id: new_node_id,\n            text: NEW_NODE_TEXT,\n            showChildren: true,\n            children: []\n        }\n    }\n});\n\nexport const moveNode = (node_id, target_id, parent_id, is_sibling) => ({\n    type: actionTypes.MOVE_NODE,\n    data: {\n        node_id,\n        target_id,\n        parent_id,\n        is_sibling\n    }\n});\n\nexport const changeText = (node_id, text) => ({\n    type: actionTypes.CHANGE_TEXT,\n    data: {\n        node_id,\n        node: {\n            text\n        }\n    }\n});\n\nexport const changeInfo = (node_id, info) => ({\n    type: actionTypes.CHANGE_TEXT,\n    data: {\n        node_id,\n        node: {\n            info\n        }\n    }\n});\n\nexport const deleteNode = (node_id, parent_id) => ({\n    type: actionTypes.DELETE_NODE,\n    data: {\n        node_id,\n        parent_id\n    }\n});\n\nexport const expandAll = node_id => ({\n    type: actionTypes.EXPAND_ALL,\n    data: {\n        node_id\n    }\n});\n\nexport const setMindmap = mindmap => ({\n    type: actionTypes.SET_MINDMAP,\n    data: {\n        mindmap\n    }\n});\n","export const SET_SELECT = 'nodeStatus/setSelect';\nexport const SET_EDIT = 'nodeStatus/setEdit';\nexport const GET_NODE_INFO = 'nodeStatus/getNodeInfo';\nexport const CLEAR_ALL = 'nodeStatus/clearAll';","export const SET_HISTORY = 'history/setHistory';\nexport const CLEAR_HISTORY = 'history/clearHistory';","import {ROOT_NODE_ID} from './refer';\n\nexport default {\n    id: ROOT_NODE_ID,\n    text: \"主题\",\n    showChildren: true,\n    children: [\n        {\n            id: \"Sub1\",\n            text: \"分支1\",\n            showChildren: true,\n            children: []\n        },\n        {\n            id: \"Sub2\",\n            text: \"分支2\",\n            showChildren: true,\n            children: []\n        },\n        {\n            id: \"Sub3\",\n            text: \"分支3\",\n            showChildren: true,\n            children: []\n        }\n    ]\n}","export const TOGGLE_PANEL_SHOW = 'editPanel/togglePanelShow';","import * as actionTypes from './actionTypes';\n\nexport const setHistory = (mindmap, cur_node) => ({\n    type: actionTypes.SET_HISTORY,\n    data: mindmap ? ({mindmap, cur_node}) : null\n});\n\nexport const clearHistory = () => ({type: actionTypes.CLEAR_HISTORY});","import * as actionTypes from './actionTypes';\n\nexport const setTitle = title => ({\n    type: actionTypes.SET_TITLE,\n    data: {\n        title\n    }\n});\n\nexport const setTheme = theme_index => ({\n    type: actionTypes.SET_THEME,\n    data: {\n        theme_index\n    }\n});\n\n\nexport const zoomIn = (x,y) => ({\n    type: actionTypes.ZOOM_IN,\n    data: {\n        x,y\n    }\n});\n\nexport const zoomOut = (x,y) => ({\n    type: actionTypes.ZOOM_OUT,\n    data: {\n        x,y\n    }\n});\n\nexport const zoomReset = zoomRate => ({\n    type: actionTypes.ZOOM_RESET,\n    data: {\n        zoomRate\n    }\n});\n\nexport const moveReset = () => ({\n    type: actionTypes.MOVE_RESET,\n    data: {\n    }\n});\n\nexport const moveXY = (x,y) => ({\n    type: actionTypes.MOVE_XY,\n    data: {\n        x,y\n    }\n});\n\nexport const moveXYWhenZoom = (x,y) => ({\n    type: actionTypes.MOVE_XY,\n    data: {\n        x,y\n    }\n});\n\n\n","import {useContext, useMemo} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\nexport default () => {\n    const {global: {state: {theme_index, theme_list}, dispatch}} = useContext(context);\n    const theme = useMemo(() => theme_list[theme_index], [theme_index]);\n    const setTheme = index => {\n        dispatch(globalAction.setTheme(index));\n    };\n\n    return {\n        theme,\n        theme_index,\n        theme_list,\n        setTheme\n    }\n}","import React from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../customHooks/useTheme';\nimport * as refer from '../../statics/refer';\n\nconst ThemeProvider = ({children}) => {\n    const {theme} = useTheme();\n\n    return (<div className={css`\n    ${refer.THEME_MAIN}: ${theme.main};\n    ${refer.THEME_LIGHT}: ${theme.light};\n    ${refer.THEME_ASSIST}: ${theme.assist};\n    ${refer.THEME_DARK}: ${theme.dark};\n    ${refer.THEME_EX}: ${theme.ex};\n    `}>\n        {children}\n    </div>);\n};\n\nexport default ThemeProvider;","import {useContext} from 'react';\nimport {context} from '../context';\nimport {setMindmap} from '../context/reducer/mindmap/actionCreator.js';\nimport {setSelect} from '../context/reducer/nodeStatus/actionCreator.js';\n\nexport default () => {\n    const {mindmap: {dispatch: mDispatch}, nodeStatus: {dispatch: nDispatch}, history: {state: history}} = useContext(context);\n\n    const applySnapshot = snapshot => {\n        if (snapshot) {\n            const {mindmap, cur_node} = snapshot;\n            mDispatch(setMindmap(JSON.parse(mindmap)));\n            nDispatch(setSelect(cur_node));\n        }\n    };\n\n    return {\n        undoHistory: () => {\n            applySnapshot(history.undo[history.undo.length - 1]);\n        },\n        redoHistory: () => {\n            applySnapshot(history.redo[0]);\n        }\n    }\n}\n\n","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\n\nconst useZoom = () => {\n    const {global: {dispatch: gDispatch}} = useContext(context);\n    return {\n        zoomIn: (x,y) => {\n            gDispatch(globalAction.zoomIn(x,y))          \n        },\n        zoomOut: (x,y) => {\n            gDispatch(globalAction.zoomOut(x,y))\n        },\n        zoomReset: () => {\n            gDispatch(globalAction.zoomReset())\n        },\n    }\n};\n\nexport default useZoom;","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as globalAction from '../context/reducer/global/actionCreator';\n\n\nconst useMove = () => {\n    const {global: {dispatch: gDispatch}} = useContext(context);\n    return {        \n        moveXY: (x,y) => {\n            gDispatch(globalAction.moveXY(x,y))\n        },\n        moveReset: () => {\n            gDispatch(globalAction.moveReset())\n        },\n    }\n};\n\nexport default useMove;","import React from 'react';\nimport {css, cx} from 'emotion';\nimport '../../statics/zwicon.css';\nimport * as refer from '../../statics/refer';\nimport {handlePropagation} from '../../methods/assistFunctions'; // 用于禁用按钮点击。如果使用 button 的 disable 属性实现，会由于点击事件冒泡导致 Toolbar 被隐藏\n\nconst ToolButton = ({icon, onClick, children, disabled}) => {\n    return (<button onClick={disabled ? handlePropagation : onClick} className={cx(wrapper, {[disabled_style]: disabled})}>\n            <i className={'zwicon-' + icon} />\n            <span>{children}</span>\n        </button>);\n};\n\nexport default ToolButton;\n\n// CSS\nconst wrapper = css`\nmargin: 0 0.12em;\npadding: 0 0.24em;\n/* margin 用于增加间隔，padding 用于增大可点击区域 */\nbackground-color: transparent;\nborder: none;\noutline: none;\ncursor: pointer;\n\ni {\ndisplay: block;\nmargin-bottom: 0.12em;\nfont-size: 100%;\n}\nspan {\ndisplay: block;\nfont-size: 25%;\n}\n\n&:active {\ntransform: scale(0.95);\n}\n\n&:hover {\ncolor: var(${refer.THEME_ASSIST});\n}\n`;\n\nconst disabled_style = css`\n&, &:hover {\ncolor: #cccccc;\n}\n\ncursor: not-allowed;\n`;","import React, {useEffect, useContext, useRef} from 'react';\nimport {css} from 'emotion';\nimport {context} from '../../context';\nimport {setTitle} from '../../context/reducer/global/actionCreator';\nimport * as refer from '../../statics/refer';\n\nconst MindmapTitle = () => {\n    const self = useRef();\n    const {global: {state: {title}, dispatch}} = useContext(context);\n\n    useEffect(() => {\n        document.title = `RMind - ${title}`;\n        localStorage.setItem('title', title);\n    }, [title]);\n\n    const handleKeydown = event => {\n        switch (event.key.toUpperCase()) {\n            case 'ESCAPE':\n                self.current.textContent = title;\n            case 'ENTER':\n                self.current.blur();\n                break;\n            default:\n                break;\n        }\n    };\n\n    const handleBlur = () => {\n        let new_title = self.current.textContent.trim();\n        if (new_title === '') {\n            new_title = title;\n        }\n        if (new_title.length > 30) {\n            new_title = new_title.slice(0, 30);\n        }\n        self.current.textContent = new_title; // contentEditable 组件内容不会被自动更新\n        dispatch(setTitle(new_title));\n    };\n\n    return (<span ref={self} className={wrapper} contentEditable=\"true\" suppressContentEditableWarning=\"true\"\n                  spellCheck=\"false\"\n                  onKeyDown={handleKeydown} onBlur={handleBlur}>{title}</span>);\n};\n\nexport default MindmapTitle;\n\n// CSS\nconst wrapper = css`\nalign-self: center;\npadding: 0 10px; /* 两侧 padding 用于增大组件点击区域，避免将光标定位至首尾处时意外 blur */\ncolor: var(${refer.THEME_DARK});\nfont-size: 20px;\nfont-weight: 700;\nborder-bottom: 2px solid transparent;\noutline: none;\ntransition: 0.2s;\n\n&:read-write {\ncursor: edit;\n}\n\n&:focus {\nborder-bottom: 2px solid var(${refer.THEME_ASSIST});\n}\n`;","import React, {useContext} from 'react';\nimport {context} from '../../../context';\nimport {setTitle} from '../../../context/reducer/global/actionCreator';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport defaultMindmap from '../../../statics/defaultMindmap';\nimport * as refer from '../../../statics/refer';\nimport {ButtonSet, MainButton, Shortcut, Highlight, Annotation} from '../common/styledComponents';\n\nconst New = ({handleClosePopup, handleDownload}) => {\n    const {global:{dispatch}} = useContext(context);\n    const {setMindmap} = useMindmap();\n\n    const handleNewFile = () => {\n        setMindmap(defaultMindmap, true);\n        dispatch(setTitle(refer.DEFAULT_TITLE));\n        handleClosePopup();\n    };\n\n    return (<div>\n        <Highlight>新建导图后，当前思维导图的数据将丢失。</Highlight>\n        <Annotation>要保存当前数据，请将思维导图<Shortcut onClick={handleDownload}>下载至本地</Shortcut>。</Annotation>\n        <ButtonSet>\n            <MainButton onClick={handleNewFile}>新建导图</MainButton>\n            <button onClick={handleClosePopup}>取消</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default New;","import md5 from 'md5';\nimport * as refer from '../statics/refer';\n\nconst getLayerAndText = (line, format) => {\n    let layer, text;\n    switch (format) {\n        case 'MD': {\n            if (line.match(/^#{1,6} /)) {\n                layer = line.match(/^#{1,6} /)[0].length - 2;\n                text = line.replace(/^#{1,6} /, '');\n            } else if (line.match(/^\\s*[-*] /)) {\n                layer = line.match(/^\\s*[-*] /)[0].length + 4;\n                text = line.replace(/^\\s*[-*] /, '');\n            }\n            return {layer, text};\n        }\n        case 'TXT': {\n            layer = line.match(/^\\s*/)[0].length;\n            text = line.replace(/^\\s*/, '');\n            return {layer, text};\n        }\n        default:\n            return {layer, text};\n    }\n};\n\nconst buildNodeFromText = (data_array, format, cur_layer, cur_text = '') => {\n    if (data_array.length === 0 && cur_layer === -1) {\n        return;\n    }\n    if (cur_layer === -1) {\n        const root_data = getLayerAndText(data_array.shift(), format);\n        cur_layer = root_data.layer || 0; // 一定的鲁棒性\n        cur_text = root_data.text || '未知数据';\n    }\n    const cur_node = {\n        id: cur_layer === 0 ? refer.ROOT_NODE_ID : md5('' + Date.now() + Math.random() + cur_text),\n        text: cur_text,\n        showChildren: true,\n        children: []\n    };\n    while (data_array.length > 0) {\n        const {layer, text} = getLayerAndText(data_array[0], format);\n        if (layer <= cur_layer) {\n            break;\n        }\n        data_array.shift();\n        if (layer) { // 排除掉无法匹配的情况\n            cur_node.children.push(buildNodeFromText(data_array, format, layer, text));\n        }\n    }\n    return cur_node;\n};\n\nconst copyNodeData = (format, target_node, source_node, is_root_node) => {\n    switch (format) {\n        case 'KM':\n            target_node.id = is_root_node ? refer.ROOT_NODE_ID : source_node.data.id;\n            target_node.text = source_node.data.text;\n            target_node.showChildren = source_node.data.expandState !== 'collapse';\n            target_node.children = source_node.children.map(child => copyNodeData(format, {}, child));\n            return target_node;\n        default:\n            return;\n    }\n};\n\nconst buildNodeFromJSON = (json, format) => {\n    switch (format) {\n        case 'RMF':\n            return JSON.parse(json);\n        case 'KM': {\n            let km_mindmap = JSON.parse(json);\n            return copyNodeData(format, {}, km_mindmap.root, true);\n        }\n        default:\n            return;\n    }\n};\n\nexport default (import_data, format) => {\n    let mindmap;\n    switch (format) {\n        case 'MD':\n        case 'TXT':\n            const data_array = import_data.split('\\n').filter(line => line);\n            mindmap = buildNodeFromText(data_array, format, -1);\n            break;\n        default:\n            mindmap = buildNodeFromJSON(import_data, format);\n            break;\n    }\n    return mindmap;\n}","import React, {useContext} from 'react';\nimport {css} from 'emotion';\nimport {context} from '../../../context';\nimport {setTitle} from '../../../context/reducer/global/actionCreator';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport {ROOT_NODE_ID} from '../../../statics/refer';\nimport mindmapParser from '../../../methods/mindmapParser';\nimport {ButtonSet, MainButton, Shortcut, Highlight, Annotation} from '../common/styledComponents';\n\nconst Open = ({handleClosePopup, handleDownload}) => {\n    const {global: {dispatch}} = useContext(context);\n    const {setMindmap} = useMindmap();\n\n    const handleOpenFile = () => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = '.rmf,.km,.txt,.md';\n        input.addEventListener('change', event => {\n            const file = event.target.files[0],\n                file_name = file.name;\n            let dot_index = file_name.length - 1;\n            while (dot_index > 0 && file_name[dot_index] !== '.') {\n                dot_index--;\n            }\n            const format = file_name.slice(dot_index + 1).toUpperCase(),\n                title = file_name.slice(0, dot_index);\n            const file_reader = new FileReader();\n            file_reader.onload = event => {\n                const str = event.target.result;\n                const mindmap = mindmapParser(str, format);\n                if (mindmap && mindmap.id === ROOT_NODE_ID) {\n                    setMindmap(mindmap, true);\n                    dispatch(setTitle(title));\n                    handleClosePopup();\n                } else {\n                    alert('不是有效的思维导图文件');\n                }\n            };\n            file_reader.readAsText(file);\n        });\n        input.click();\n    };\n\n    return (<div>\n        <Highlight>打开其他文件后，当前思维导图的数据将丢失。</Highlight>\n        <Annotation>要保存当前数据，请将思维导图<Shortcut onClick={handleDownload}>下载至本地</Shortcut>。</Annotation>\n        <p className={sub_title}>支持打开格式：</p>\n        <ul className={list_wrapper}>\n            <li>RMind（.rmf）</li>\n            <li>百度脑图（.km）</li>\n            <li>Markdown（.md）</li>\n            <li>文本文件（.txt）</li>\n        </ul>\n        <ButtonSet>\n            <MainButton onClick={handleOpenFile}>打开文件</MainButton>\n            <button onClick={handleClosePopup}>取消</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default Open;\n\n// CSS\nconst sub_title = css`\nmargin: 20px 0 5px;\npadding-bottom: 8px;\nborder-bottom: 1px solid #dddddd;\n`;\n\nconst list_wrapper = css`\nmargin: 0;\npadding: 0;\nfont-size: 90%;\nlist-style: circle inside;\n\nli {\nline-height: 2em;\n}\n`;","import React from 'react';\nimport {css, cx} from 'emotion';\n\nconst ThemeListItem = ({theme, index, is_current, setTheme}) => {\n    const handleSetTheme = () => {\n        setTheme(index);\n    };\n\n    return (<li className={cx(wrapper, {[current_style]: is_current})} onClick={handleSetTheme}>\n        <div style={{backgroundColor: theme.ex}} />\n        <div style={{backgroundColor: theme.dark}} />\n        <div style={{backgroundColor: theme.main}} />\n        <div style={{backgroundColor: theme.light}} />\n    </li>);\n};\n\nexport default ThemeListItem;\n\n// CSS\n\nconst wrapper = css`\ndisplay: flex;\nbox-sizing: border-box;\nwidth: 47%;\nheight: 25px;\nmargin: 8px 0;\nborder-radius: 18px;\ncursor: pointer;\noverflow: hidden;\n\ndiv {\nflex: 1;\nz-index: -1;\n}\n`;\n\nconst current_style = css`\nbox-shadow: 0 0 0 4px #ffffff, 0 0 0 6px #000000; /* 两层阴影实现框选效果，也可用 inset 阴影 + border-color 做 */\n`;\n","import React, {useEffect} from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../../../customHooks/useTheme';\nimport {ButtonSet, Highlight} from '../../common/styledComponents';\nimport ThemeListItem from './ThemeListItem';\n\nconst Theme = ({handleClosePopup}) => {\n    const {theme_index, theme_list, setTheme} = useTheme();\n\n    useEffect(() => {\n        localStorage.setItem('theme_index', theme_index);\n    }, [theme_index]);\n\n    return (<div>\n        <Highlight>请选择主题：</Highlight>\n        <ul className={list_wrapper}>\n            {theme_list.map((theme, index) => <ThemeListItem key={theme.main} theme={theme} index={index}\n                                                             is_current={theme_index === index} setTheme={setTheme} />)}\n        </ul>\n        <ButtonSet>\n            <button onClick={handleClosePopup}>完成</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default Theme;\n\n// CSS\nconst list_wrapper = css`\ndisplay: flex;\njustify-content: space-between;\nflex-wrap: wrap;\npadding: 0;\nlist-style: none;\n`;","import React, {Suspense, lazy} from 'react';\nimport {css} from 'emotion';\nimport * as popupType from './common/popupType';\nimport {handlePropagation} from '../../methods/assistFunctions';\nimport New from './subComponents/New';\nimport Open from './subComponents/Open';\nimport Theme from './subComponents/Theme';\n\nconst getContentComponent = type => {\n    switch (type) {\n        case popupType.NEW:\n            return New;\n        case popupType.OPEN:\n            return Open;\n        case popupType.EXPORT:\n            return lazy(() => import('./subComponents/Export'));\n        case popupType.THEME:\n            return Theme;\n        default:\n            return;\n    }\n};\n\nconst Popup = ({type, handleClosePopup, handleDownload}) => {\n    const Content = getContentComponent(type);\n    return (<div className={wrapper} onClick={handlePropagation}>\n        <div className={content_wrapper}>\n            <i className={'zwicon-close-circle ' + close_button} onClick={handleClosePopup} />\n            <Suspense fallback={<></>}>\n                <Content handleClosePopup={handleClosePopup} handleDownload={handleDownload} />\n            </Suspense>\n        </div>\n        <div className={overlay} onClick={handleClosePopup} />\n    </div>);\n};\n\nexport default Popup;\n\n// CSS\nconst wrapper = css`\nposition: fixed;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n`;\n\nconst content_wrapper = css`\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\ntop:30%;\nleft:0;\nright:0;\nwidth: 400px;\nmargin: auto;\npadding: 40px 40px 20px;\nfont-size: 1rem;\nbackground-color: #ffffff;\nborder-radius: 20px;\nz-index: 1;\n`;\n\nconst close_button = css`\nposition: absolute;\ntop: 10px;\nright: 10px;\nfont-size: 25px;\nfont-weight: 700;\n\n&:active {\ntransform: scale(0.95)\n}\n`;\n\nconst overlay = css`\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\nbackground: #000000;\nopacity: 0.2;\n`;\n","export const NONE = 'none';\nexport const NEW = 'new';\nexport const OPEN = 'open';\nexport const EXPORT = 'export';\nexport const THEME = 'theme';","import React, { useState, useContext } from 'react';\nimport { css } from 'emotion';\nimport { context } from '../../context';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useHistory from '../../customHooks/useHistory';\nimport useZoom from '../../customHooks/useZoom';\nimport useMove from '../../customHooks/useMove';\nimport * as refer from '../../statics/refer';\nimport * as popupType from '../../components/Popup/common/popupType';\nimport { handlePropagation, downloadFile } from '../../methods/assistFunctions'; // 防止 Mindmap 中的选中状态由于冒泡被清除\nimport ToolButton from '../../components/ToolButton';\nimport MindmapTitle from '../../components/MindmapTitle';\nimport Popup from '../../components/Popup';\nimport html2canvas from 'html2canvas';\nimport mindmapExporter from '../../methods/mindmapExporter';\nimport axios from 'axios';\n\nconst Nav = () => {\n    const [popup, setPopup] = useState(popupType.NONE);\n    const { mindmap: { state: mindmap }, history: { state: history }, global: { state: { title } } } = useContext(context);\n    const { expandAll } = useMindmap();\n    const { zoomIn, zoomOut, zoomReset } = useZoom();\n    const { moveXY, moveReset } = useMove()\n    const { undoHistory, redoHistory } = useHistory();\n\n    const handleClosePopup = () => {\n        setPopup(popupType.NONE);\n    };\n\n    const handleNewFile = () => {\n        setPopup(popupType.NEW);\n    };\n\n    const handleDownload = () => {\n        \n        \n        html2canvas(document.getElementById(refer.MINDMAP_ID)).then(canvas => {\n            let url = canvas.toDataURL('image/png');\n            downloadFile(url, `${title}.png`);\n            const data = {content:mindmapExporter(mindmap, \"KM\")}\n            alert(data)\n            axios.post(\"http://localhost:4000/save\", data).then(() => alert(`Mindmap saved`))\n              .catch(err => {\n                alert(err)})\n        });\n    };\n\n    const handleOpenFile = () => {\n        setPopup(popupType.OPEN);\n    };\n\n    const handleExport = () => {\n        setPopup(popupType.EXPORT);\n    };\n\n    const handleTheme = () => {\n        setPopup(popupType.THEME);\n    };\n\n    const handleUndo = () => {\n        undoHistory();\n    };\n\n    const handleRedo = () => {\n        redoHistory();\n    };\n\n    const handleExpand = () => {\n        expandAll(refer.ROOT_NODE_ID);\n    };\n\n    const handleZoom = (zoom) => {\n        console.log('缩放', zoom ? zoom : '还原')\n        switch (zoom) {\n            case 'in':\n                zoomIn()\n                break;\n            case 'out':\n                zoomOut()\n                break;\n            default:\n                zoomReset()\n        }\n    }\n\n    const handleMove = (move) => {\n        console.log('移动', move ? move : '还原')\n        switch (move) {\n            case 'up':\n                moveXY(0,-5)\n                break;\n            case 'down':\n                moveXY(0,5)\n                break;\n            case 'left':\n                moveXY(-5,0)\n                break;\n            case 'right':\n                moveXY(5,0)\n                break;\n            default:\n                moveReset()\n        }\n    }\n\n    return (<nav className={wrapper}>\n        <section className={section} onClick={handlePropagation}>\n            <ToolButton icon={'add-item-alt'} onClick={handleNewFile}>新建</ToolButton>\n            <ToolButton icon={'folder-open'} onClick={handleOpenFile}>打开</ToolButton>\n            <ToolButton icon={'file-download'} onClick={handleDownload}>下载至本地</ToolButton>\n            <ToolButton icon={'duplicate'} onClick={handleExport}>导出</ToolButton>\n            <ToolButton icon={'palette'} onClick={handleTheme}>主题</ToolButton>\n            <ToolButton icon={'plus-circle'} onClick={() => handleZoom('in')}>放大</ToolButton>\n            <ToolButton icon={'minus-circle'} onClick={() => handleZoom('out')}>缩小</ToolButton>\n            <ToolButton icon={'rotate-left'} onClick={() => handleZoom()}>还原</ToolButton>\n        </section>\n        <section className={section}>\n            <MindmapTitle />\n        </section>\n        <section className={section} onClick={handlePropagation}>\n            <ToolButton icon={'rotate-left'} onClick={() => handleMove()}>还原</ToolButton>\n            <ToolButton icon={'arrow-left'} onClick={() => handleMove('left')}>左</ToolButton>\n            <ToolButton icon={'arrow-up'} onClick={() => handleMove('up')}>上</ToolButton>\n            <ToolButton icon={'arrow-down'} onClick={() => handleMove('down')}>下</ToolButton>\n            <ToolButton icon={'arrow-right'} onClick={() => handleMove('right')}>右</ToolButton>\n            <ToolButton icon={'undo'} disabled={history.undo.length === 0} onClick={handleUndo}>撤销</ToolButton>\n            <ToolButton icon={'redo'} disabled={history.redo.length === 0} onClick={handleRedo}>重做</ToolButton>\n            <ToolButton icon={'scale'} onClick={handleExpand}>展开所有节点</ToolButton>\n        </section>\n        {popup !== popupType.NONE &&\n            <Popup type={popup} handleClosePopup={handleClosePopup} handleDownload={handleDownload} />}\n    </nav>);\n};\n\nexport default Nav;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\njustify-content: space-between;\nposition: fixed;\ntop:0;\nleft:0;\nright:0;\nheight: 56px;\npadding: 0 50px;\nfont-size: 25px;\nbackground-color: #ffffff;\nbox-shadow: 0 0px 2px #aaaaaa;\nz-index: 10;\n`;\n\nconst section = css`\ndisplay: flex;\n`;","import React, {useState,useEffect}from 'react'\r\nimport './style.css'\r\n\r\n\r\n\r\nconst Register=()=>{\r\n  const [formData, setFormData] = useState({\r\n    show:true,\r\n    name:'',\r\n    email:'',\r\n    password:'',\r\n    password2:''\r\n  })\r\n     // Update the document title using the browser API    document.title = `You clicked ${count} times`;  });\r\n  const {show,name,email,password,password2}=formData\r\n  const onClick = () => {\r\n    setFormData({...formData,show:false})\r\n  }\r\n  const onChange=e=> setFormData({...formData,[e.target.name]:e.target.value})\r\n  const onSubmit=e=> {\r\n    e.preventDefault();\r\n    if(password!==password2)\r\n    alert('Passwords do not match')\r\n    else \r\n   alert(formData)\r\n  }\r\n\r\n    return (\r\n      <div id=\"fullscreen-container\"style={{ display: show ? \"block\" : \"none\" }}>\r\n        <div className=\"form-popup\">\r\n          <button className=\"close\" onClick={onClick} > </button>\r\n          <h1 className=\"large text-primary\">Sign Up</h1>\r\n          <p className=\"lead\"><i className=\"fas fa-user\"></i> Create Your Account</p>\r\n          <form className=\"form\" onSubmit={e => onSubmit(e)}>\r\n            <div className=\"form-group\">\r\n              <input autoFocus type=\"text\" placeholder=\"Name\" name=\"name\" value={name} onChange={e => onChange(e)} required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input autoFocus type=\"email\" placeholder=\"Email Address\" value={email} name=\"email\" onChange={e => onChange(e)} required />\r\n              <br />\r\n              <small className=\"form-text\"\r\n              >This site uses Gravatar so if you want a profile image, use a\r\n                Gravatar email</small\r\n              >\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input\r\n                autoFocus\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={e => onChange(e)}\r\n                minLength=\"6\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input\r\n                autoFocus\r\n                type=\"password\"\r\n                placeholder=\"Confirm Password\"\r\n                name=\"password2\"\r\n                value={password2}\r\n                onChange={e => onChange(e)}\r\n                minLength=\"6\"\r\n              />\r\n            </div>\r\n            <input type=\"submit\" className=\"btn btn-primary\" value=\"Register\" />\r\n          </form>\r\n          <p className=\"my-1\">\r\n            Already have an account? <a href=\"login.html\">Sign In</a>\r\n           <p> Without an account you can only create one mindmap locally,which will be lost\r\n           if cookies are cleared.</p>\r\n          </p>\r\n        </div>\r\n      </div>)\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  \r\n}\r\nexport default Register\r\n","import * as refer from '../statics/refer';\n\nexport default (nodeStatus, mindmapHook, historyHook) => {\n    const {addChild, addSibling, editNode, deleteNode, toggleChildren, selectNode} = mindmapHook;\n\n    const handleKeyEventWithNode = event => {\n        switch (event.key.toUpperCase()) {\n            case 'TAB':\n                addChild(nodeStatus.cur_select);\n                break;\n            case 'ENTER':\n                event.preventDefault(); // 防止 enter 的点击行为\n                addSibling(nodeStatus.cur_select, nodeStatus.cur_node_info.parent.id);\n                break;\n            case 'F2':\n                editNode(nodeStatus.cur_select);\n                break;\n            case 'BACKSPACE':\n            case 'DELETE':\n                deleteNode(nodeStatus.cur_select, nodeStatus.cur_node_info.parent.id);\n                break;\n            case ' ':\n                event.preventDefault(); // 默认行为会导致画面移动，因此 prevent，下同\n                toggleChildren(nodeStatus.cur_select, !nodeStatus.cur_node_info.showChildren); // Boolean('false') === true\n                break;\n            case 'ARROWLEFT':\n                event.preventDefault();\n                if (nodeStatus.cur_node_info.parent === refer.ROOT_PARENT) {\n                    if (nodeStatus.cur_node_info.children.length > 3) {\n                        selectNode(nodeStatus.cur_node_info.children[Math.trunc(nodeStatus.cur_node_info.children.length / 2)].id);\n                    }\n                } else {\n                    if (!nodeStatus.cur_node_info.on_left) {\n                        selectNode(nodeStatus.cur_node_info.parent.id);\n                    } else if (nodeStatus.cur_node_info.children.length > 0) {\n                        selectNode(nodeStatus.cur_node_info.children[0].id);\n                    }\n                }\n                break;\n            case 'ARROWRIGHT':\n                event.preventDefault();\n                if (nodeStatus.cur_node_info.on_left) {\n                    selectNode(nodeStatus.cur_node_info.parent.id);\n                } else if (nodeStatus.cur_node_info.children.length > 0) {\n                    selectNode(nodeStatus.cur_node_info.children[0].id);\n                }\n                break;\n            case 'ARROWUP': {\n                event.preventDefault();\n                const cur_index = nodeStatus.cur_node_info.parent.children.findIndex(child => child.id === nodeStatus.cur_node_info.id);\n                if (cur_index > 0) {\n                    selectNode(nodeStatus.cur_node_info.parent.children[cur_index - 1].id);\n                }\n                break;\n            }\n            case 'ARROWDOWN': {\n                event.preventDefault();\n                const cur_index = nodeStatus.cur_node_info.parent.children.findIndex(child => child.id === nodeStatus.cur_node_info.id),\n                    last_index = nodeStatus.cur_node_info.parent.children.length - 1;\n                if (cur_index < last_index) {\n                    selectNode(nodeStatus.cur_node_info.parent.children[cur_index + 1].id);\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    return event => {\n        if (nodeStatus.cur_edit === '') {\n            const is_on_mac = navigator.platform.toUpperCase().startsWith('MAC');\n            const combine_key_pressed = is_on_mac ? event.metaKey : event.ctrlKey;\n            if (combine_key_pressed && event.key.toUpperCase() === 'Z') {\n                if (event.shiftKey) {\n                    historyHook.redoHistory();\n                } else {\n                    historyHook.undoHistory();\n                }\n            }\n        }\n        if (nodeStatus.cur_select !== '') {\n            try {\n                handleKeyEventWithNode(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n            } catch (e) {\n                alert('当前的节点信息存在问题，请重新选择节点');\n            }\n        }\n    };\n};","const mousemoveInfo = {\n    startX: 0,\n    startY: 0,\n}\n\nexport default (propHook, zoomRate,normalizeXY) => {\n    const { zoomIn, zoomOut, moveXY } = propHook;\n    const getWheelDelta = (e) => {\n        if (e.wheelDelta) {\n            return e.wheelDelta\n        } else {\n            return -e.wheelDelta * 40\n        }\n    }\n\n    const handleWhellEventWithkey = e => {\n\n        if (e.ctrlKey === true && e.wheelDelta) {\n            e.preventDefault()\n            e.stopPropagation()\n            getWheelDelta(e) > 0 ? zoomIn(e.clientX,e.clientY) : zoomOut(e.clientX,e.clientY)\n            return;\n        }\n\n        if (e.buttons === 1 && e.type === 'mousedown') {\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n            return\n        }\n\n        if (e.altKey && e.buttons === 1) {\n            e.stopPropagation()\n            const { startX, startY } = mousemoveInfo;\n            const movedX = (e.clientX - startX);\n            const movedY = (e.clientY - startY);\n            moveXY(movedX / 10 / normalizeXY, movedY / 10)\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n        }\n    };\n\n    return event => {\n        try {\n            handleWhellEventWithkey(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n        } catch (e) {\n            alert('移动或缩放功能异常',e);\n        }\n    };\n};","import * as actionTypes from './actionTypes';\n\nexport const toggelPanelShow = (isShow) => ({\n    type: actionTypes.TOGGLE_PANEL_SHOW,\n    data: {\n        isShow,\n    }\n});\n\n\n// export const openPanel = theme_index => ({\n//     type: actionTypes.OPEN_PANEL,    \n// });","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as editPanelAction from '../context/reducer/editPanel/actionCreator';\n\n\nconst useEditPanel = () => {\n    const {editPanel: {state:epState,dispatch: epDispatch}} = useContext(context);\n    return {\n        toggelPanelShow: (bool) => {\n            if(epState.isShow===bool){\n                return ;    \n            }\n            epDispatch(editPanelAction.toggelPanelShow(bool));\n        },\n        savePanel: (bool) => {\n            epDispatch(editPanelAction.toggelPanelShow(bool));\n        },\n    }\n};\n\nexport default useEditPanel;","import React from 'react';\nimport {css} from 'emotion';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport useEditPanel from '../../../customHooks/useEditPanel';\nimport {handlePropagation} from '../../../methods/assistFunctions';\nimport ToolButton from '../../ToolButton';\n\nconst Toolbar = ({layer, node, parent}) => {\n    const mindmapHook = useMindmap();\n    const editPanelHook=useEditPanel();\n\n    const handleAddChild = () => {\n        mindmapHook.addChild(node.id);\n        \n    };\n\n    const handleAddSibling = () => {\n        mindmapHook.addSibling(node.id, parent.id);\n       \n    };\n\n    const handleDeleteNode = () => {\n        mindmapHook.deleteNode(node.id, parent.id);\n       \n    };\n\n    const handleEditNode = () => {\n        mindmapHook.editNode(node.id);\n    };\n\n    const handleToggleChildren = () => {\n        mindmapHook.toggleChildren(node.id, !node.showChildren);\n    };\n\n    const handleAddInfo=()=>{\n        mindmapHook.selectNode(node.id);\n        editPanelHook.toggelPanelShow(true);\n    }\n\n    return (<div className={wrapper} onClick={handlePropagation}>\n        <ToolButton icon={'git-commit'} onClick={handleAddChild}>添加子节点</ToolButton>\n        <ToolButton icon={'git-fork'} onClick={handleAddSibling} disabled={layer < 1}>添加兄弟节点</ToolButton>\n        <ToolButton icon={'delete'} onClick={handleDeleteNode} disabled={layer < 1}>删除</ToolButton>\n        <ToolButton icon={'edit-pencil'} onClick={handleEditNode}>编辑</ToolButton>\n        <ToolButton icon={'edit-pencil'} onClick={handleAddInfo}>添加备注</ToolButton>\n        <ToolButton icon={'split-v'} onClick={handleToggleChildren} disabled={layer < 1 || node.children.length === 0}>显隐子节点</ToolButton>\n    </div>);\n};\n\nexport default Toolbar;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nposition: absolute;\nbottom: calc(100% + 5px);\nleft:0;\nbackground-color: #ffffff;\nwidth: max-content;\nheight: 50px;\npadding: 0 8px;\nfont-size: 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\nbox-shadow: 5px 5px 10px #aaaaaa;\n`;","import React, {useEffect, useRef} from 'react';\nimport {css} from 'emotion';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport {handlePropagation} from '../../../methods/assistFunctions';\n\nconst InputDiv = ({node_id, children}) => {\n    const self = useRef();\n    const {changeText, selectNode} = useMindmap();\n\n    const handleKeydown = event => {\n        switch (event.key.toUpperCase()) {\n            case 'ESCAPE':\n                self.current.textContent = children;\n            case 'ENTER':\n                self.current.blur();\n                break;\n            default:\n                break;\n        }\n    };\n\n    const handleBlur = () => {\n        changeText(node_id, self.current.textContent);\n        selectNode(node_id);\n    };\n\n    useEffect(() => {\n        self.current.focus();\n        const selection = document.getSelection();\n        selection.selectAllChildren(self.current);\n    }, []);\n\n    return (<div className={wrapper} ref={self} contentEditable=\"true\" suppressContentEditableWarning=\"true\"\n                 onClick={handlePropagation} onKeyDown={handleKeydown} onBlur={handleBlur}>{children}</div>);\n};\n\nexport default InputDiv;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nwidth: fit-content;\nmin-width: 1em;\nmax-width: 10em;\nheight: fit-content;\nmargin: auto;\npadding: 10px;\ncolor: #333333;\nbackground-color: #ffffff;\nbox-shadow: 0 0 20px #aaaaaa;\nborder-radius: 5px;\noutline: none;\nz-index: 3;\nuser-select: text;\n`;","import React, { useState, useEffect } from 'react';\nimport marked from 'marked';\nimport './index.css'\n\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/github.css';\n\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    },\n    pedantic: false,\n    gfm: false,\n    breaks: false,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false,\n    xhtml: false\n});\n\nfunction MdPreview(props) {\n    const { mdtext='' } = props;\n\n    //   const [example, setExample] = useState('initialValue');\n    //   useEffect(() => {\n    //     // 使用浏览器的 API 更新页面标题\n    //     // document.title = `You clicked count times`;\n    //   });\n    useEffect(() => {        \n        document.querySelectorAll('pre code').forEach((block) => {\n          hljs.highlightBlock(block);\n        });      \n      },[mdtext]);\n\n    return (\n        <div className=\"MdPreview\">\n            <i className=\"zwicon-note\" style={{ fontSize: 20 }}></i>\n\n            <div className=\"MdPreview-Content\" dangerouslySetInnerHTML={{ __html: marked(mdtext) }} />\n        </div>\n    )\n}\n\nexport default MdPreview;","import React, {useEffect, useRef, useContext} from 'react';\nimport {css, cx} from 'emotion';\nimport {context} from '../../context';\nimport useMindmap from \"../../customHooks/useMindmap\";\nimport {getNodeInfo} from '../../context/reducer/nodeStatus/actionCreator';\nimport * as refer from '../../statics/refer';\nimport {handlePropagation} from '../../methods/assistFunctions';\nimport Toolbar from './subComponents/Toolbar';\nimport InputDiv from './subComponents/InputDiv';\nimport MdPreview from '../mdPreview';\n\nconst Node = ({layer, node, parent, node_refs, on_left}) => {\n    const self = useRef();\n    const {nodeStatus: {state: nodeStatus, dispatch: nDispatch}, editPanel: {state:epState}} = useContext(context);\n    const mindmapHook = useMindmap();\n\n\n    const handleSelectNode = () => {\n        mindmapHook.selectNode(node.id, true);\n    };\n\n    const handleEditNode = () => {\n        mindmapHook.editNode(node.id);\n    };\n\n    const handleToggleChildren = () => {\n        mindmapHook.toggleChildren(node.id, !node.showChildren);\n        mindmapHook.clearNodeStatus(); // 避免出现当前选择的节点被隐藏后仍然可以操作的情况\n    };\n\n    useEffect(() => {\n        node_refs.add(self);\n        return () => {\n            node_refs.delete(self);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (nodeStatus.cur_select === node.id) {\n            self.current.scrollIntoView({behavior: 'smooth', block: 'center', inline: 'center'});\n            nDispatch(getNodeInfo(node, parent, on_left));\n        }\n    }, [nodeStatus.cur_select, node]);    \n\n    // 为避免事件冒泡导致干扰，点击事件放在了 dropArea div，最外层 Node div 用于阻止冒泡\n    return (<div\n        className={cx(common_style, specific_style[layer < 3 ? layer : 3], {[seleted_style]: nodeStatus.cur_select === node.id})}\n        draggable={layer > 0 && nodeStatus.cur_edit !== node.id}\n        data-tag={on_left ? refer.LEFT_NODE : refer.RIGHT_NODE}\n        data-parent={parent.id}\n        data-show-children={node.showChildren}\n        id={node.id}\n        ref={self}\n        onClick={handlePropagation}>\n        {nodeStatus.cur_edit === node.id &&\n        <InputDiv node_id={node.id}>{node.text}</InputDiv>}\n        <div className={drop_area} data-tag={refer.DROP_AREA} onClick={handleSelectNode} onDoubleClick={handleEditNode} />\n        <p>{node.text} {node.info && <MdPreview mdtext={node.info}/>}</p>\n        {(layer > 0 && node.children.length > 0) &&\n        <button className={cx(toggle_button, (on_left ? button_left : button_right))} onClick={handleToggleChildren}>{node.showChildren ? '-' : '+'}</button>}\n        {(nodeStatus.cur_select === node.id && nodeStatus.select_by_click) && !epState.isShow &&\n        <Toolbar layer={layer} node={node} parent={parent} />}\n    </div>);\n};\n\nexport default Node;\n\n// CSS\nconst style_selected_border = `\nbox-shadow: 0 0 0 3px #ffffff, 0 0 0 6px var(${refer.THEME_EX}); /* 双层阴影实现选中框 */\n`;\n\nconst common_style = css`\nposition: relative;\nmin-width: 10px;\nmax-width: 200px;\nmargin: 20px 40px;\npadding: 15px;\nbackground-color: #ffffff;\nborder: 1px solid var(${refer.THEME_MAIN});\nborder-radius: 15px;\ncursor: pointer;\n\np {\nmin-height: 18px; /* 当 p 中没有内容时撑起元素 */\nmargin: 0;\nline-height: 1.5em;\noverflow-wrap: break-word;\n}\n\n&:hover {\n${style_selected_border}\n}\n\n&.ondrag {\nbackground-color: var(${refer.THEME_EX});\np {\ncolor: #ffffff;\n}\n}\n`;\n\nconst specific_style = [ // div&用于提高 CSS 权重\n    css`\ndiv& {\npadding: 15px 20px;\ncolor: #ffffff;\nfont-size: 120%;\nfont-weight: 700;\nbackground-color: var(${refer.THEME_DARK});\nborder:2px solid var(${refer.THEME_EX});\n}\n    `,\n    css`\ndiv& {\nbackground-color: var(${refer.THEME_LIGHT});\n}\n    `,\n    css`\ndiv& {\npadding: 10px 15px;\n}\n    `,\n    css`\ndiv& {\npadding: 0 15px;\nborder: none;\np {\nfont-size: 90%;\n}\n}\n    `\n];\n\nconst seleted_style = css`\nz-index: 1; /* 提高 Node 高度，防止被遮挡 */\n${style_selected_border}\n`;\n\n// 兼有防止文字被选中的功能\nconst drop_area = css`\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n`;\n\nconst toggle_button = css`\nposition: absolute;\ntop:0;\nbottom: 0;\nwidth: 20px;\nheight: 20px;\nmargin: auto 0;\npadding: 0;\ntext-align: center;\nbackground-color: #ffffff;\nborder: 1px solid #cccccc;\nborder-radius: 50%;\noutline: none;\n`;\n\nconst button_left = css`\nleft: -15px;\n`;\n\nconst button_right = css`\nright: -15px;\n`;","import React from 'react';\nimport {css, cx} from 'emotion';\nimport Node from '../Node';\n\nconst SubNode = ({layer, node, node_refs, parent, on_left}) => {\n    return (<div className={cx(wrapper, {[left_style]: on_left})}>\n        <Node layer={layer} node={node} node_refs={node_refs} parent={parent} on_left={on_left} />\n        <div>\n            {node.showChildren && node.children.map(sub_node => <SubNode key={sub_node.id} layer={layer + 1}\n                                                                         node={sub_node} node_refs={node_refs}\n                                                                         parent={node} on_left={on_left} />)}\n        </div>\n    </div>);\n};\n\nexport default SubNode;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nalign-items: center;\n`;\n\nconst left_style = css`\nflex-direction: row-reverse;\n`;","import React, {useEffect, useRef} from 'react';\nimport {css} from 'emotion';\nimport {ROOT_PARENT} from '../../statics/refer';\nimport Node from '../Node';\nimport SubNode from '../SubNode';\n\nconst RootNode = ({layer, node, node_refs}) => {\n    const root_node = useRef();\n\n    const total = node.children.length,\n        half = total > 3 ? Math.trunc(total / 2) : total;\n\n    // 载入时使根节点居中。暂时没发现除了多包一层 div 之外更好的解决方法\n    useEffect(() => {\n        root_node.current.scrollIntoView({block: 'center', inline: 'center'});\n    }, []);\n\n    return (<div className={wrapper}>\n        <div>\n            {node.showChildren && node.children.slice(half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node} on_left={true} />)}\n        </div>\n        <div ref={root_node}>\n            <Node layer={0} node={node} node_refs={node_refs} parent={ROOT_PARENT} />\n        </div>\n        <div>\n            {node.showChildren && node.children.slice(0, half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node}\n                on_left={false} />)}\n        </div>\n    </div>);\n};\n\nexport default RootNode;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nalign-items: center;\nwidth: max-content; /* max-content 才能保证正确读取布局 */\n`;","import * as refer from '../statics/refer';\n\nconst drawBezier = (ctx, from_x, from_y, to_x, to_y) => {\n    ctx.moveTo(from_x, from_y);\n    ctx.bezierCurveTo(from_x, to_y, 0.9 * to_x + 0.1 * from_x, to_y, to_x, to_y);\n};\n\nconst drawLine = (ctx, node, map) => {\n    const {id: parent_id, children} = node;\n    if (children.length > 0) {\n        const [parent_x_left, parent_x_right, parent_y] = map.get(parent_id);\n\n        children.forEach(child => {\n            const child_data = map.get(child.id);\n            if (child_data) {\n                const [child_x_left, child_x_right, child_y, child_tag] = child_data;\n                if (child_tag === refer.LEFT_NODE) {\n                    drawBezier(ctx, parent_x_left, parent_y, child_x_right, child_y);\n                } else {\n                    drawBezier(ctx, parent_x_right, parent_y, child_x_left, child_y);\n                }\n                drawLine(ctx, child, map);\n            }\n        })\n    }\n};\n\nexport const drawLineCanvas = (ctx, theme, mindmap, map) => {\n    ctx.beginPath();\n    ctx.lineWidth = '2';\n    ctx.strokeStyle = theme.main;\n    drawLine(ctx, mindmap, map);\n    ctx.stroke();\n    ctx.closePath();\n};\n\nexport const drawDragCanvas = (ctx, theme, child_id, parent_offset, child_offset, child_left_of_parent) => {\n    const virtual_rect_width = 50,\n        virtual_rect_height = 20;\n    ctx.beginPath();\n    ctx.strokeStyle = theme.main;\n    ctx.lineWidth = '2';\n    ctx.setLineDash([5, 5]);\n    let parent_x,\n        parent_y = (parent_offset.top + parent_offset.bottom) / 2,\n        child_x,\n        child_y = (child_offset.top + child_offset.bottom) / 2;\n    if (child_left_of_parent) {\n        parent_x = parent_offset.left;\n        child_x = child_offset.right;\n        ctx.strokeRect(child_x - virtual_rect_width, child_y - virtual_rect_height / 2, virtual_rect_width, virtual_rect_height);\n    } else {\n        parent_x = parent_offset.right;\n        child_x = child_offset.left;\n        ctx.strokeRect(child_x, child_y - virtual_rect_height / 2, virtual_rect_width, virtual_rect_height);\n    }\n    drawBezier(ctx, parent_x, parent_y, child_x, child_y);\n    ctx.stroke();\n    ctx.closePath();\n};","import * as refer from '../statics/refer';\nimport { findNode } from './assistFunctions';\nimport { drawDragCanvas } from './drawCanvas';\n\nconst getDomOffset = dom => {\n    const left = dom.offsetLeft,\n        right = left + dom.offsetWidth,\n        top = dom.offsetTop,\n        bottom = top + dom.offsetHeight;\n    return { left, right, top, bottom };\n};\n\nexport default (mindmap, drag_canvas, container, theme, mindmapHook,zoom,drag) => {\n    const { moveNode } = mindmapHook;\n\n    let node_id, parent_id, target_id, is_sibling,\n        children, children_offset_left, children_offset_right, children_offset_vertical,\n        parent_offset, parent_is_root,\n        container_left, container_top,container_width,container_height,\n        in_drop_area;\n\n    const resetVariables = () => {\n        node_id = '';\n        parent_id = '';\n        target_id = '';\n        is_sibling = false;\n\n        children = [];\n        children_offset_left = [];\n        children_offset_right = [];\n        children_offset_vertical = [];\n\n        parent_offset = undefined;\n        parent_is_root = false;\n\n        container_left = container.scrollLeft;\n        container_top = container.scrollTop - 56;\n        container_width = container.offsetWidth;\n        container_height = container.offsetHeight;\n\n        in_drop_area = false;\n    };\n\n    const handleContainerScroll = (e) => {\n        \n        container_left = container.scrollLeft;\n        container_top = container.scrollTop - 56; // 56 是 container（Main 组件）顶部 margin 值        \n    };\n\n    return [\n        \n        {\n            type: 'dragstart',\n            listener: event => {\n                resetVariables();\n                container.addEventListener('scroll', handleContainerScroll);\n                if (event.target && (event.target.dataset.tag === refer.LEFT_NODE || event.target.dataset.tag === refer.RIGHT_NODE)) {\n                    node_id = event.target.id;\n                    parent_id = event.target.dataset.parent;\n                    const parent = findNode(mindmap, parent_id);\n                    parent_is_root = parent === mindmap;\n                    parent_offset = getDomOffset(document.getElementById(parent_id));\n                    children[0] = parent.children.map(child => child.id);\n                    let children_offset = [];\n                    children_offset[0] = children[0].map(node_id => getDomOffset(document.getElementById(node_id)));\n                    if (parent_is_root && mindmap.children.length > 3) {\n                        const half = Math.trunc(mindmap.children.length / 2);\n                        children = [children[0].slice(0, half), children[0].slice(half)];\n                        children_offset = [children_offset[0].slice(0, half), children_offset[0].slice(half)];\n                    }\n                    children_offset_left = children_offset.map(each => Math.min(...each.map(offset => offset.left)));\n                    children_offset_right = children_offset.map(each => Math.max(...each.map(offset => offset.right)));\n                    children_offset_vertical = children_offset.map(each => each.map(offset => [offset.top, offset.bottom]).reduce((flat_arr, cur) => flat_arr.concat(cur), []));\n                }\n            }\n        },\n        {\n            type: 'drag',\n            listener: event => {\n                const ctx = drag_canvas.getContext('2d');\n                ctx.clearRect(0, 0, drag_canvas.width, drag_canvas.height);\n                const total = children.length;\n                const moveX=-(container_width*drag.x/100)\n                const moveY=-(container_height*drag.y/100)\n                const mouse_x = (event.x + container_left)/zoom+moveX,\n                    mouse_y = (event.y + container_top)/zoom+moveY;\n                for (let i = 0; i < total; i++) {\n                    if (!in_drop_area && mouse_x > children_offset_left[i] && mouse_x < children_offset_right[i]) {\n                        let child_offset = { left: children_offset_left[i], right: children_offset_right[i] };\n                        const child_left_of_parent = i === 1 || (!parent_is_root && (document.getElementById(node_id).dataset.tag === refer.LEFT_NODE)); // i = 1，即出现双侧拖拽时，左侧发生的拖拽 child_left_of_parent 必然为 true\n                        const last_index = children_offset_vertical[i].length - 1;\n                        if (mouse_y > children_offset_vertical[i][0] - 200 && mouse_y < children_offset_vertical[i][0]) { // 优化体验，实际是显示的 2 倍\n                            child_offset.top = children_offset_vertical[i][0] - 50;\n                            child_offset.bottom = children_offset_vertical[i][0];\n                            drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                            target_id = children[i][0];\n                            is_sibling = true;\n                            return;\n                        }\n                        for (let j = 2; j < last_index + 1; j += 2) {\n                            if (mouse_y > children_offset_vertical[i][j - 1] && mouse_y < children_offset_vertical[i][j]) {\n                                child_offset.top = children_offset_vertical[i][j - 1];\n                                child_offset.bottom = children_offset_vertical[i][j];\n                                drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                                target_id = children[i][j / 2];\n                                is_sibling = true;\n                                return;\n                            }\n                        }\n                        if (mouse_y > children_offset_vertical[i][last_index] && mouse_y < children_offset_vertical[i][last_index] + 200) {\n                            child_offset.top = children_offset_vertical[i][last_index];\n                            child_offset.bottom = children_offset_vertical[i][last_index] + 50;\n                            drawDragCanvas(ctx, theme, node_id, parent_offset, child_offset, child_left_of_parent);\n                            target_id = children[i + 1] && children[i + 1][0];\n                            is_sibling = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        },\n        {\n            type: 'dragover',\n            listener: event => {\n                event.preventDefault();\n            }\n        },\n        {\n            type: 'dragenter',\n            listener: event => {\n                if (event.target && event.target.dataset.tag === refer.DROP_AREA) {\n                    event.target.parentNode.classList.add('ondrag');\n                    target_id = event.target.parentNode.id;\n                    is_sibling = false;\n                    in_drop_area = true;\n                }\n            }\n        },\n        {\n            type: 'dragleave',\n            listener: event => {\n                if (event.target && event.target.dataset.tag === refer.DROP_AREA) {\n                    event.target.parentNode.classList.remove('ondrag');\n                    target_id = '';\n                    is_sibling = false;\n                    in_drop_area = false;\n                }\n            }\n        },\n        {\n            type: 'drop',\n            listener: event => {\n                event.target.parentNode.classList.remove('ondrag');\n                if (target_id !== '' && target_id !== node_id && target_id !== parent_id) {\n                    moveNode(node_id, target_id, parent_id, is_sibling);\n                }\n            }\n        },\n        {\n            type: 'dragend',\n            listener: () => {\n                const ctx = drag_canvas.getContext('2d');\n                ctx.clearRect(0, 0, drag_canvas.width, drag_canvas.height);\n                container.removeEventListener('scroll', handleContainerScroll);\n            }\n        }\n    ];\n}","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport { css } from 'emotion';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useTheme from '../../customHooks/useTheme';\nimport getDragEvents from '../../methods/getDragEvents';\nimport { context } from '../../context'\nimport * as refer from '../../statics/refer';\n\nconst DragCanvas = ({ parent_ref, container_ref, mindmap }) => {\n    const self = useRef();\n    const [flag, setFlag] = useState(0);\n\n    const { theme } = useTheme();\n\n    const mindmapHook = useMindmap();\n\n    const { global: { state: gState } } = useContext(context);\n    const {zoom,x,y}=gState\n\n    const handleWindowResize = () => {\n        setFlag(Date.now());\n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleWindowResize);\n        return () => {\n            window.removeEventListener('resize', handleWindowResize);\n        }\n    }, []);\n\n    useEffect(() => {\n        const handleDrag = getDragEvents(mindmap, self.current, container_ref.current, theme, mindmapHook,zoom,{x,y});\n        handleDrag.forEach(event => document.querySelector(`#${refer.MINDMAP_ID}`).addEventListener(event.type, event.listener));\n        return () => {\n            handleDrag.forEach(event => document.querySelector(`#${refer.MINDMAP_ID}`).removeEventListener(event.type, event.listener));\n        }\n    }, [mindmap, theme,zoom,x,y]);\n\n    useEffect(() => {\n        const dom = self.current;\n        dom.width = parent_ref.current.offsetWidth;\n        dom.height = parent_ref.current.offsetHeight;\n    }, [mindmap, flag, gState.zoom]);\n\n    return (<canvas ref={self} className={wrapper} />);\n};\n\nexport default DragCanvas;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -1;\n`;","import React, {useState, useEffect, useRef, useContext} from 'react';\nimport {css} from 'emotion';\nimport useTheme from '../../customHooks/useTheme';\nimport {context} from '../../context'\nimport {drawLineCanvas} from '../../methods/drawCanvas';\n\nconst LineCanvas = ({parent_ref, mindmap, node_refs}) => {\n    const self = useRef();\n    const [flag, setFlag] = useState(0);\n\n    const {theme} = useTheme();\n    const {global:{state:gState}}=useContext(context);\n\n    const handleWindowResize = (e) => {\n        setFlag(Date.now());        \n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleWindowResize);\n        return () => {\n            window.removeEventListener('resize', handleWindowResize);\n        }\n    }, []);\n\n    useEffect(() => {\n        const dom = self.current;\n        dom.width = parent_ref.current.offsetWidth;\n        dom.height = parent_ref.current.offsetHeight; // 重新设置 canvas 大小，也兼具清除画板的作用\n        const map = new Map(Array.from(node_refs).map(ref => [ref.current.id, [(ref.current.offsetLeft), (ref.current.offsetLeft + ref.current.offsetWidth), (ref.current.offsetTop + 0.5 * ref.current.offsetHeight), ref.current.dataset.tag]]));\n        const ctx = dom.getContext('2d');\n        drawLineCanvas(ctx, theme, mindmap, map);\n    }, [mindmap, theme, flag, gState.zoom]);\n\n    return (<canvas ref={self} className={wrapper} />);\n};\n\nexport default LineCanvas;\n\n// CSS\nconst wrapper = css`\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -2;\n`;","import React, { useEffect, useContext, useRef, useMemo, useState } from 'react';\nimport { css } from 'emotion';\nimport * as refer from '../../statics/refer';\nimport { context } from '../../context/';\nimport { setHistory } from '../../context/reducer/history/actionCreator';\nimport useMindmap from '../../customHooks/useMindmap';\nimport useHistory from '../../customHooks/useHistory';\nimport getKeydownEvent from '../../methods/getKeydownEvent';\nimport getMouseWheelEvent from '../../methods/getMouseWheelEvent';\nimport RootNode from '../../components/RootNode';\nimport DragCanvas from '../../components/DragCanvas';\nimport LineCanvas from '../../components/LineCanvas';\nimport useZoom from '../../customHooks/useZoom';\nimport useMove from '../../customHooks/useMove';\nimport { debounce } from '../../methods/assistFunctions';\n\nconst node_refs = new Set();\n\nconst Mindmap = ({ container_ref }) => {\n    const self = useRef();\n    const { mindmap: { state: root_node }, nodeStatus: { state: nodeStatus }, history: { dispatch: hDispatch }, global: { state: gState } } = useContext(context);\n\n    const historyHook = useHistory();\n    const mindmapHook = useMindmap();\n    const zoomHook = useZoom();\n    const moveHook = useMove()\n    const { clearNodeStatus } = mindmapHook;\n    const [FLAG, setFLAG] = useState(0)\n\n    const mindmap_json = useMemo(() => JSON.stringify(root_node), [root_node]); // 如果 root_node 没有 JSON.stringify，使用按键操作时有时会连续两次触发 useEffect，目前没查出来为什么。利用 useMemo 避免重复触发\n\n    const handleResize = () => {\n        setFLAG(Date.now())\n    }\n\n    useEffect(() => {\n        const handleKeydown = getKeydownEvent(nodeStatus, mindmapHook, historyHook);\n        window.addEventListener('keydown', handleKeydown);\n        return () => {\n            window.removeEventListener('keydown', handleKeydown);\n        }\n    }, [nodeStatus]);\n\n    useEffect(() => {\n        window.addEventListener('click', clearNodeStatus);\n        return () => {\n            window.removeEventListener('click', clearNodeStatus);\n        }\n    }, []);\n\n    useEffect(() => {\n        window.addEventListener('resize', handleResize);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        }\n    }, [])\n\n    useEffect(() => {\n        const normalizeXY = container_ref.current.clientWidth / container_ref.current.clientHeight\n        const handleMouseWheel = getMouseWheelEvent(zoomHook, gState.zoom)\n        const handleMapMove = getMouseWheelEvent(moveHook, gState.zoom, normalizeXY)\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('wheel', handleMouseWheel);\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousemove', debounce(handleMapMove, 4));\n        document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousedown', handleMapMove)\n        return () => {\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).removeEventListener('wheel', handleMouseWheel);\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousemove', debounce(handleMapMove, 4));\n            document.querySelector(`#${refer.MINDMAP_MAIN}`).addEventListener('mousedown', handleMapMove);\n        }\n    }, [FLAG]);\n\n    useEffect(() => {\n        localStorage.setItem('mindmap', mindmap_json);\n        hDispatch(setHistory(mindmap_json, nodeStatus.cur_select || nodeStatus.cur_edit));\n    }, [mindmap_json]);\n\n    return (\n        <div\n            className={wrapper}\n            ref={self}\n            style={{ zoom: gState.zoom, left: gState.x + 'vw', top: gState.y + 'vh' }}\n            id={refer.MINDMAP_ID}\n            draggable={false}>\n            <RootNode key={root_node.id} layer={0} node={root_node} node_refs={node_refs} />\n            <DragCanvas parent_ref={self} container_ref={container_ref} mindmap={root_node} />\n            <LineCanvas parent_ref={self} mindmap={root_node} node_refs={node_refs} />\n        </div>\n    );\n};\n\nexport default Mindmap;\n\n// CSS\nconst wrapper = css`\nposition: relative;\nwidth: fit-content;\npadding: 30vh 30vw;\n`;","import React, { useState, useEffect } from 'react';\n\nfunction MdEditor(props) {\n    const { propText } = props;\n\n    const [text, setText] = useState(propText);\n\n    useEffect(() => {\n        setText(propText)\n    }, [propText]);\n    \n    const onChange = (e) => {\n        setText(e.target.value)\n    }\n\n    const onBlur = () => {\n        console.log('备注：', text)\n        props.onBlur && props.onBlur(text)\n    }\n\n\n\n    return (\n        <div className={props.className || ''}>\n            <textarea style={textarea} onChange={onChange} onBlur={onBlur} value={text} />\n        </div>\n    )\n}\n\nexport default MdEditor;\n\n\nconst textarea = {\n    width: '100%',\n    height: '100%',\n    resize: 'none'\n}","import React, {useContext, useEffect} from 'react';\nimport {css} from 'emotion';\nimport useEditPanel from '../../customHooks/useEditPanel';\nimport useMindmap from '../../customHooks/useMindmap';\nimport {context} from '../../context'\nimport MdEditor from '../../components/mdEditor';\n\nconst EditPanel = () => {\n    // const self = useRef();\n    \n    const {editPanel: {state:epState},nodeStatus:{state:nState}} =useContext(context)\n    const {cur_node_info:{info='',text,id}}=nState\n    \n    const mindmapHook=useMindmap()\n    const editPanleHook=useEditPanel();\n    \n    if(!epState.isShow){\n        return null;\n    }\n    \n    return (        \n        <div className={show} onClick={e=>e.stopPropagation()} onKeyDown={e=>e.stopPropagation()}>\n            当前编辑节点：{text || '无'}        \n\n            <i className=\"zwicon-close\" style={close} onClick={()=>editPanleHook.toggelPanelShow(false)}></i>                        \n            <MdEditor \n                className={mdEditor} \n                propText={info}\n                onBlur={(value)=> id && mindmapHook.editNodeInfo(id,value)}\n            />                       \n            {/* <Button type=\"primary\" onClick={()=>mindmapHook.editNodeInfo(id,inputVal)}>保存</Button>\n            <Button type=\"primary\" onClick={()=>editPanleHook.toggelPanelShow(false)}>关闭</Button> */}            \n        </div>\n    );\n};\n\nexport default EditPanel;\n\n// CSS\nconst show = css`\nheight: 500px;\nwidth: 300px;\ntop: 20px;\nright: 40px;\nmargin: 56px 0 0;\noverflow: auto;\nposition: fixed;\n//z-index: 10;\nborder: 2px solid #eeee;\nborder-radius: 10px;\nbackground: #fff;\nbackground:rgba(255,255,255,1);\nbox-shadow:0px 2px 12px 0px rgba(0,0,0,0.16);\npadding:20px 10px;\n`;\n\nconst close={    \n    fontSize:20,\n    position: 'absolute',\n    cursor:'pointer',\n    right: '10px',\n    top: '5px',\n}\n\nconst mdEditor=css`\n    margin-top:20px;\n    width:295px;\n    height:460px;\n`","import React, { useRef } from 'react';\nimport { css } from 'emotion';\nimport Mindmap from '../Mindmap';\nimport EditPanel from '../EditPanel';\nimport * as refer from '../../statics/refer';\n\nconst Main = () => {\n    const self = useRef();\n\n    return (<main ref={self} className={wrapper} id={refer.MINDMAP_MAIN}>\n        <Mindmap container_ref={self} />\n        <EditPanel />\n    </main>);\n};\n\nexport default Main;\n\n// CSS\nconst wrapper = css`\nheight: calc(100vh - 56px);\nmargin: 56px 0 0;\noverflow: hidden;\n`;","import React from 'react';\nimport Provider from './context/';\nimport ThemeProvider from './features/ThemeProvider'\nimport Nav from './features/Nav';\nimport Register from './features/Register';\nimport Main from './features/Main'\nimport { BrowserRouter as Router,Route,Switch,withRouter } from 'react-router-dom';\nimport ReactDOM from 'react-dom'\n\n\nconst App = () => {\n    \n    return (\n    \n    <Provider>\n        <ThemeProvider>\n        <Nav/>\n        <Main/>\n        <Register/> \n        </ThemeProvider>\n    </Provider>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'normalize.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\nconst exportNodeToText = (node, layer, format) => {\n    switch (format) {\n        case 'MD':\n            if (layer < 6) {\n                return '#'.repeat(layer + 1) + ' ' + node.text;\n            }\n            return '\\t'.repeat(layer - 6) + '- ' + node.text;\n        case 'TXT':\n            return '\\t'.repeat(layer) + node.text;\n        default:\n            return;\n    }\n};\n\nconst exportMindmapToText = (mindmap, format) => {\n    let lines = [];\n    const dfs = (node, layer, format) => {\n        if (!node) {\n            return;\n        }\n        lines.push(exportNodeToText(node, layer, format));\n        node.children.forEach(child => {\n            dfs(child, layer + 1, format)\n        });\n    };\n    dfs(mindmap, 0, format);\n    return lines.join('\\n');\n};\n\nconst copyNodeData = (format, target_node, source_node) => {\n    switch (format) {\n        case 'KM':\n            target_node.data = {};\n            target_node.data.id = source_node.id;\n            target_node.data.created = Date.now();\n            target_node.data.text = source_node.text;\n            target_node.data.expandState = source_node.showChildren ? 'expand' : 'collapse';\n            target_node.children = source_node.children.map(child => copyNodeData(format, {}, child));\n            return target_node;\n        default:\n            return;\n    }\n};\n\nconst exportMindmapToJSON = (mindmap, format) => {\n    switch (format) {\n        case 'KM':\n            const km_mindmap = {root: copyNodeData(format, {}, mindmap)};\n            return JSON.stringify(km_mindmap);\n        default:\n            return JSON.stringify(km_mindmap);\n    }\n};\n\nexport default (mindmap, format) => {\n    let export_data;\n    switch (format) {\n        case 'MD':\n        case 'TXT':\n            export_data = exportMindmapToText(mindmap, format);\n            break;\n        default:\n            export_data = exportMindmapToJSON(mindmap, format);\n            break;\n    }\n    return export_data;\n}\n","export const handlePropagation = event => {\n    event.stopPropagation();\n};\n\nexport const deepCopy = input => { // 简单的递归深拷贝，只考虑 context 中 state 的复制，因此没有处理 function 等\n    if (input instanceof Object) {\n        if (Array.isArray(input)) {\n            return input.map(deepCopy);\n        }\n        let output = {};\n        Object.entries(input).forEach(([key, value]) => {\n            output[key] = deepCopy(value);\n        });\n        return output;\n    }\n    return input;\n};\n\nexport const findNode = (node, search_id) => {\n    if (node.id === search_id) {\n        return node;\n    }\n    return node.children.map(child => findNode(child, search_id)).find(item => item);\n};\n\nexport const setShowChildrenTrue = node => {\n    node.showChildren = true;\n    node.children.forEach(setShowChildrenTrue);\n};\n\nexport const downloadFile = (url, filename) => {\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    link.click();\n};\n\nexport const debounce=(func,wait)=>{\n    let timer=null;\n    return function(){\n      if(timer) clearTimeout(timer);\n      timer=setTimeout(()=>{\n        // 绑定this的目的是，使得func的this指针保持普通,调用时候的指向\n        // argument也为调用debounce过后的func传入的参数\n        func.apply(this,arguments);\n      },wait)\n    }\n  \n  }","import * as actionTypes from './actionTypes';\nimport defaultMindmap from '../../../statics/defaultMindmap';\nimport {findNode, deepCopy, setShowChildrenTrue} from '../../../methods/assistFunctions';\n\nexport const defaultValue_mindmap = JSON.parse(localStorage.getItem('mindmap')) || defaultMindmap;\n\nexport default (mindmap, action) => {\n    switch (action.type) {\n        case actionTypes.TOGGLE_CHILDREN: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            if (node_found.children.length > 0 && node_found !== new_mindmap) {\n                Object.assign(node_found, action.data.node);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.ADD_CHILD: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            node_found.children.push(action.data.node);\n            return new_mindmap;\n        }\n        case actionTypes.ADD_SIBLING: {\n            const new_mindmap = deepCopy(mindmap);\n            if (action.data.parent_id) {\n                const node_found = findNode(new_mindmap, action.data.parent_id);\n                const insert_index = node_found.children.findIndex(node => node.id === action.data.node_id) + 1;\n                node_found.children.splice(insert_index, 0, action.data.node);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.MOVE_NODE: {\n            const new_mindmap = deepCopy(mindmap),\n                parent = findNode(new_mindmap, action.data.parent_id),\n                node_index = parent.children.findIndex(node => node.id === action.data.node_id),\n                node_copy = parent.children[node_index];\n            parent.children.splice(node_index, 1);\n            if (action.data.is_sibling) {\n                const target_index = parent.children.findIndex(node => node.id === action.data.target_id) + 1 || parent.children.length + 1;\n                parent.children.splice(target_index - 1, 0, node_copy);\n            } else {\n                const target_node = findNode(new_mindmap, action.data.target_id);\n                target_node.children.push(node_copy);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.CHANGE_TEXT: {\n            const new_mindmap = deepCopy(mindmap),\n                node_found = findNode(new_mindmap, action.data.node_id);\n            Object.assign(node_found, action.data.node);\n            return new_mindmap;\n        }\n        case actionTypes.DELETE_NODE: {\n            const new_mindmap = deepCopy(mindmap);\n            if (action.data.parent_id) {\n                const node_found = findNode(new_mindmap, action.data.parent_id);\n                const delete_index = node_found.children.findIndex(node => node.id === action.data.node_id);\n                node_found.children.splice(delete_index, 1);\n            }\n            return new_mindmap;\n        }\n        case actionTypes.EXPAND_ALL: {\n            const new_mindmap = deepCopy(mindmap);\n            const node_found = findNode(new_mindmap, action.data.node_id);\n            setShowChildrenTrue(node_found);\n            return new_mindmap;\n        }\n        case actionTypes.SET_MINDMAP: {\n            return action.data.mindmap;\n        }\n        default:\n            return mindmap;\n    }\n};","import * as actionTypes from './actionTypes';\n\nexport const defaultValue_nodeStatus = {\n    cur_select: '',\n    select_by_click: false,\n    cur_edit: '',\n    cur_node_info: {}\n};\n\nexport default (nodeStatus, action) => {\n    switch (action.type) {\n        case actionTypes.SET_SELECT:\n            if (nodeStatus.cur_select === action.data.cur_select) { // 避免 cur_select 未变更时 info 被清空\n                delete action.data.cur_node_info;\n            }\n            return {...nodeStatus, ...action.data};\n        case actionTypes.SET_EDIT:\n        case actionTypes.CLEAR_ALL:\n        case actionTypes.GET_NODE_INFO:\n            return {...nodeStatus, ...action.data};\n        default:\n            return nodeStatus;\n    }\n};","import * as actionTypes from './actionTypes';\nimport {deepCopy} from '../../../methods/assistFunctions';\n\nexport const defaultValue_history = {\n    undo: [],\n    redo: [],\n    last_snapshot: null\n};\n\nexport default (history, action) => {\n    switch (action.type) {\n        case actionTypes.SET_HISTORY: {\n            const new_history = deepCopy(history);\n            if (new_history.last_snapshot) {\n                if (new_history.undo.length > 0 && new_history.undo[new_history.undo.length - 1].mindmap === action.data.mindmap) {\n                    new_history.redo.unshift(new_history.last_snapshot);\n                    new_history.undo.pop();\n                } else if (new_history.redo.length > 0 && new_history.redo[0].mindmap === action.data.mindmap) {\n                    new_history.undo.push(new_history.last_snapshot);\n                    new_history.redo.shift();\n                } else {\n                    new_history.undo.push(new_history.last_snapshot);\n                    new_history.redo = [];\n                }\n            }\n            new_history.last_snapshot = action.data;\n            return new_history;\n        }\n        case actionTypes.CLEAR_HISTORY: {\n            return defaultValue_history;\n        }\n        default:\n            return history;\n    }\n};","import * as actionTypes from './actionTypes';\nimport * as refer from '../../../statics/refer';\nimport { deepCopy } from '../../../methods/assistFunctions';\nimport { debug } from 'util';\n\nexport const defaultValue_global = {\n    title: localStorage.getItem('title') || refer.DEFAULT_TITLE,\n    theme_index: Number(localStorage.getItem('theme_index')) || 0,\n    theme_list: [\n        { main: \"#eda938\", light: \"#f4cc87\", dark: \"#e79021\", ex: \"#ce7529\", assist: \"#1980da\" },\n        { main: \"#ff4c26\", light: \"#ffcabc\", dark: \"#e83f1d\", ex: \"#c12a0f\", assist: \"#0e95ac\" },\n        { main: \"#50b843\", light: \"#c3e5bd\", dark: \"#28ab17\", ex: \"#038b00\", assist: \"#790595\" },\n        { main: \"#2d99d7\", light: \"#e2f5ff\", dark: \"#2786c3\", ex: \"#2375af\", assist: \"#ca6c27\" },\n        { main: \"#b347d2\", light: \"#e4c0ef\", dark: \"#a623c9\", ex: \"#9621c3\", assist: \"#009000\" },\n        { main: \"#555555\", light: \"#e9e9e9\", dark: \"#434343\", ex: \"#262626\", assist: \"#860314\" }\n    ],\n    zoom: 1,\n    x:0,\n    y:0,\n};\n\nconst ZOOM_STEP=0.1;\nconst MOVE_STEP=0.1;\n\nconst preventMinValue=(obj,key,min)=>{\n    \n    if(obj[key]<=min){\n        obj[key]=min\n    }\n}\n\nexport default (global, action) => {\n    switch (action.type) {\n        case actionTypes.SET_TITLE:\n        case actionTypes.SET_THEME:\n            return Object.assign(deepCopy(global), action.data);\n        case actionTypes.ZOOM_IN: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom += ZOOM_STEP;\n            return newGlobal;\n        }\n        case actionTypes.ZOOM_OUT: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom -= ZOOM_STEP;\n            preventMinValue(newGlobal,'zoom', 0.3)\n            return newGlobal;\n        }\n        case actionTypes.ZOOM_RESET: {\n            const newGlobal = deepCopy(global)\n            newGlobal.zoom = 1;\n            return newGlobal;\n        }        \n        case actionTypes.MOVE_XY: {\n            const newGlobal = deepCopy(global)\n            newGlobal.x+=action.data.x/newGlobal.zoom;\n            newGlobal.y+=action.data.y/newGlobal.zoom;\n            return newGlobal;\n        }        \n        case actionTypes.MOVE_RESET: {\n            const newGlobal = deepCopy(global)\n            newGlobal.x=0;\n            newGlobal.y=0;\n            return newGlobal;\n        }\n        case actionTypes.MOVE_XY_WHEN_ZOOM:{\n            const newGlobal = deepCopy(global)\n            newGlobal.x=0;\n            newGlobal.x=0;\n            return newGlobal;\n        }\n        default:\n            return global;\n    }\n};","import * as actionTypes from './actionTypes';\n// import defaultMindmap from '../../../statics/defaultMindmap';\nimport {deepCopy} from '../../../methods/assistFunctions';\n\nexport const defaultValue_editPanel = {\n    isShow:false,\n    nodeId:''\n};\n\nexport default (panel, action) => {\n    switch (action.type) {        \n        case actionTypes.TOGGLE_PANEL_SHOW: \n            const newPanel = deepCopy(panel);\n            newPanel.isShow=action.data.isShow\n            return newPanel        \n        default:\n            return panel;\n    }\n};","import React, {useReducer} from 'react';\nimport mindmapReducer, {defaultValue_mindmap} from './reducer/mindmap/';\nimport nodeStatusReducer, {defaultValue_nodeStatus} from './reducer/nodeStatus';\nimport historyReducer, {defaultValue_history} from './reducer/history';\nimport globalReducer, {defaultValue_global} from './reducer/global';\nimport editPanelReducer,{defaultValue_editPanel} from './reducer/editPanel';\n\nconst context = React.createContext({});\n\nconst WrappedProvider = props => {\n    const [mState, mDispatch] = useReducer(mindmapReducer, defaultValue_mindmap);\n    const [nState, nDispatch] = useReducer(nodeStatusReducer, defaultValue_nodeStatus);\n    const [hState, hDispatch] = useReducer(historyReducer, defaultValue_history);\n    const [gState, gDispatch] = useReducer(globalReducer, defaultValue_global);\n    const [epState, epDispatch] = useReducer(editPanelReducer, defaultValue_editPanel);\n    const combined = {\n        mindmap: {\n            state: mState,\n            dispatch: mDispatch\n        },\n        nodeStatus: {\n            state: nState,\n            dispatch: nDispatch\n        },\n        history: {\n            state: hState,\n            dispatch: hDispatch\n        },\n        global: {\n            state: gState,\n            dispatch: gDispatch\n        },\n        editPanel: {\n            state: epState,\n            dispatch: epDispatch\n        }\n    };\n\n    return (<context.Provider value={combined}>\n        {props.children}\n    </context.Provider>)\n};\n\nexport {context};\nexport default WrappedProvider;","export const TOGGLE_CHILDREN = 'mindmap/toggleChildren';\nexport const ADD_CHILD = 'mindmap/addChild';\nexport const ADD_SIBLING = 'mindmap/addSibling';\nexport const MOVE_NODE = 'mindmap/moveNode';\nexport const CHANGE_TEXT = 'mindmap/changeText';\nexport const DELETE_NODE = 'mindmap/deleteNode';\nexport const EXPAND_ALL = 'mindmap/expandAll';\nexport const SET_MINDMAP = 'mindmap/setMindmap';","import {useContext} from 'react';\nimport {context} from '../context';\nimport * as mindmapAction from '../context/reducer/mindmap/actionCreator';\nimport * as nodeStatusAction from '../context/reducer/nodeStatus/actionCreator.js';\nimport {clearHistory} from '../context/reducer/history/actionCreator';\nimport md5 from 'md5';\nimport axios from 'axios';\nconst useMindmap = () => {\n    const {mindmap: {dispatch: mDispatch}, nodeStatus: {dispatch: nDispatch}, history: {dispatch: hDispatch}} = useContext(context);\n    return {\n        toggleChildren: (node_id, bool) => {\n            mDispatch(mindmapAction.toggleChildren(node_id, bool));\n        },\n        addChild: node_id => {\n            const new_node_id = md5('' + Date.now() + Math.random());\n            mDispatch(mindmapAction.toggleChildren(node_id, true));\n            mDispatch(mindmapAction.addChild(node_id, new_node_id));\n            nDispatch(nodeStatusAction.setEdit(new_node_id));\n            const new_node = {\n                node_id,\n                new_node_id,\n              };\n              axios.post(\"http://localhost:4000/create\", new_node).then(() => alert(`Node Created{$node_id}{$new_node_id}`))\n              .catch(err => {\n                alert(err);\n              });\n              \n        },\n        addSibling: (node_id, parent_id) => {\n            const new_node_id = md5('' + Date.now() + Math.random());\n            mDispatch(mindmapAction.addSibling(node_id, parent_id, new_node_id));\n            nDispatch(nodeStatusAction.setEdit(new_node_id));\n            const new_node = {\n                node_id,\n                parent_id,\n                new_node_id,\n              };\n              axios.post(\"http://localhost:4000/create\", new_node).then(() => alert(`Node Created{$node_id}{$new_node_id}`))\n              .catch(err => {\n                alert(err);\n              });\n        },\n        moveNode: (node_id, target_id, parent_id, is_sibling) => {\n            mDispatch(mindmapAction.moveNode(node_id, target_id, parent_id, is_sibling));\n            nDispatch(nodeStatusAction.setSelect(node_id));\n            const new_node = {\n                node_id,\n                target_id,\n                parent_id,\n                is_sibling,\n              };\n              axios.post('http://localhost:4000/move', new_node);\n        },\n        editNode: node_id => {\n            nDispatch(nodeStatusAction.setEdit(node_id));\n            const new_node = {\n                node_id\n              };\n             \n              axios.post('http://localhost:4000/edit', new_node);\n        },\n        changeText: (node_id, text) => {\n            mDispatch(mindmapAction.changeText(node_id, text));\n            const new_node = {\n                node_id,\n               text,\n              };\n            \n              axios.post('http://localhost:4000/changeText', new_node);\n        },\n        editNodeInfo:(node_id,info)=>{\n            mDispatch(mindmapAction.changeInfo(node_id, info));\n            const new_node = {\n                node_id,\n                info,\n              };\n             \n              axios.post('http://localhost:4000/editNodeInfo', new_node);                      \n          },\n        selectNode: (node_id, select_by_click) => {\n            nDispatch(nodeStatusAction.setSelect(node_id, select_by_click));\n           \n        },\n        deleteNode: (node_id, parent_id) => {\n            mDispatch(mindmapAction.deleteNode(node_id, parent_id));\n            nDispatch(nodeStatusAction.setSelect(parent_id));\n            const new_node = {\n                node_id,\n                parent_id,\n              };\n              axios.post('http://localhost:4000/delete', new_node);\n        },\n        clearNodeStatus: () => {\n            nDispatch(nodeStatusAction.clearAll());\n        },\n        setMindmap: (mindmap, is_new_map) => {\n            if (is_new_map) {\n                hDispatch(clearHistory());\n                nDispatch(nodeStatusAction.setSelect(mindmap.id));\n            }\n            mDispatch(mindmapAction.setMindmap(mindmap));\n        },\n        expandAll: node_id => {\n            mDispatch(mindmapAction.expandAll(node_id));\n            nDispatch(nodeStatusAction.setSelect(node_id));\n        }\n    }\n};\n\nexport default useMindmap;","export const SET_TITLE = 'global/setTitle';\nexport const SET_THEME = 'global/setTheme';\nexport const ADD_THEME = 'global/addTheme'; /// 主题增删改，将来实现\n\nexport const ZOOM_IN = 'global/zoomIn';\nexport const ZOOM_OUT = 'global/zoomOut';\nexport const ZOOM_RESET= 'global/zoomReset';\n\nexport const MOVE_XY= 'global/moveXY';\nexport const MOVE_RESET= 'global/moveReset';\nexport const MOVE_XY_WHEN_ZOOM= 'global/moveXYWhenZoom';\n"],"sourceRoot":""}