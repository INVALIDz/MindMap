(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"g",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"i",function(){return o}),n.d(t,"h",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"n",function(){return f}),n.d(t,"m",function(){return m}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return h}),n.d(t,"j",function(){return b});var r="nodeLeft",a="nodeRight",c="dropArea",o={id:"",children:[]},i="rmind_root_node",u="rmind_mindmap_wrapper",d="rmind_main",l="\u65b0\u5efa\u8282\u70b9",s="\u672a\u547d\u540d\u5bfc\u56fe",f="--theme-main",m="--theme-light",p="--theme-dark",h="--theme-ex",b="--theme-assist"},10:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n(16),o=n(13),i=n(29),u=n(26),d=n.n(u),l=n(20),s=n.n(l);t.a=function(){var e=Object(r.useContext)(a.a),t=e.mindmap.dispatch,n=e.nodeStatus.dispatch,u=e.history.dispatch;return{toggleChildren:function(e,n){t(c.i(e,n))},addChild:function(e){var r=d()(""+Date.now()+Math.random());t(c.i(e,!0)),t(c.a(e,r)),n(o.c(r));var a={node_id:e,new_node_id:r};s.a.post("http://localhost:4000/create",a).then(function(){return alert("Node Created{$node_id}{$new_node_id}")}).catch(function(e){alert(e)})},addSibling:function(e,r){var a=d()(""+Date.now()+Math.random());t(c.b(e,r,a)),n(o.c(a));var i={node_id:e,parent_id:r,new_node_id:a};s.a.post("http://localhost:4000/create",i).then(function(){return alert("Node Created{$node_id}{$new_node_id}")}).catch(function(e){alert(e)})},moveNode:function(e,r,a,i){t(c.g(e,r,a,i)),n(o.d(e));var u={node_id:e,target_id:r,parent_id:a,is_sibling:i};s.a.post("http://localhost:4000/move",u)},editNode:function(e){n(o.c(e));var t={node_id:e};s.a.post("http://localhost:4000/edit",t)},changeText:function(e,n){t(c.d(e,n));var r={node_id:e,text:n};s.a.post("http://localhost:4000/changeText",r)},editNodeInfo:function(e,n){t(c.c(e,n));var r={node_id:e,info:n};s.a.post("http://localhost:4000/editNodeInfo",r)},selectNode:function(e,t){n(o.d(e,t))},deleteNode:function(e,r){t(c.e(e,r)),n(o.d(r));var a={node_id:e,parent_id:r};s.a.post("http://localhost:4000/delete",a)},clearNodeStatus:function(){n(o.a())},setMindmap:function(e,r){r&&(u(Object(i.a)()),n(o.d(e.id))),t(c.h(e))},expandAll:function(e){t(c.f(e)),n(o.d(e))}}}},11:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return l});var r="global/setTitle",a="global/setTheme",c="global/zoomIn",o="global/zoomOut",i="global/zoomReset",u="global/moveXY",d="global/moveReset",l="global/moveXYWhenZoom"},12:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"e",function(){return v});var r=n(3),a=n(0),c=n.n(a),o=n(2),i=n(1);function u(){var e=Object(r.a)(["\ntext-decoration: underline;\ncursor: pointer;\n"]);return u=function(){return e},e}function d(){var e=Object(r.a)(["\ncolor: #888888;\nfont-size: 90%;\n"]);return d=function(){return e},e}function l(){var e=Object(r.a)(["\nmargin-top: 0;\ncolor: var(",");\nfont-weight: 700;\n"]);return l=function(){return e},e}function s(){var e=Object(r.a)([" /* button& \u7528\u4e8e\u63d0\u9ad8 CSS \u6743\u91cd */\nbutton& {\ncolor: #ffffff;\nbackground-color: var(",");\nborder: 1px solid var(",");\n}\n"]);return s=function(){return e},e}function f(){var e=Object(r.a)(["\ndisplay: flex;\njustify-content: flex-end;\nmargin-top: 20px;\n\nbutton {\nmargin-left: 20px;\npadding: 10px 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\noutline: none;\n}\n\nbutton:active {\ntransform: scale(0.95);\n}\n"]);return f=function(){return e},e}var m=function(e){return c.a.createElement("div",Object.assign({},e,{className:Object(o.a)(f())}))},p=function(e){return c.a.createElement("button",Object.assign({},e,{className:Object(o.a)(s(),i.k,i.n)}))},h=function(e){return c.a.createElement("p",Object.assign({},e,{className:Object(o.a)(l(),i.j)}))},b=function(e){return c.a.createElement("p",Object.assign({},e,{className:Object(o.a)(d())}))},v=function(e){return c.a.createElement("a",Object.assign({},e,{className:Object(o.a)(u())}))}},13:function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u});var r=n(22),a=n(19),c=function(e,t){return{type:a.d,data:{cur_select:e,select_by_click:t||!1,cur_edit:"",cur_node_info:{}}}},o=function(e){return{type:a.c,data:{cur_select:"",cur_edit:e,cur_node_info:{}}}},i=function(){return{type:a.a,data:{cur_select:"",select_by_click:!1,cur_edit:"",cur_node_info:{}}}},u=function(e,t,n){return{type:a.b,data:{cur_node_info:Object(r.a)({},e,{parent:t,on_left:n})}}}},16:function(e,t,n){"use strict";n.d(t,"i",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"g",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return f}),n.d(t,"h",function(){return m});var r=n(9),a=n(1),c=function(e,t){return{type:r.h,data:{node_id:e,node:{showChildren:t}}}},o=function(e,t){return{type:r.a,data:{node_id:e,node:{id:t,text:a.f,showChildren:!0,children:[]}}}},i=function(e,t,n){return{type:r.b,data:{node_id:e,parent_id:t,node:{id:n,text:a.f,showChildren:!0,children:[]}}}},u=function(e,t,n,a){return{type:r.f,data:{node_id:e,target_id:t,parent_id:n,is_sibling:a}}},d=function(e,t){return{type:r.c,data:{node_id:e,node:{text:t}}}},l=function(e,t){return{type:r.c,data:{node_id:e,node:{info:t}}}},s=function(e,t){return{type:r.d,data:{node_id:e,parent_id:t}}},f=function(e){return{type:r.e,data:{node_id:e}}},m=function(e){return{type:r.g,data:{mindmap:e}}}},19:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return o});var r="nodeStatus/setSelect",a="nodeStatus/setEdit",c="nodeStatus/getNodeInfo",o="nodeStatus/clearAll"},24:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r="history/setHistory",a="history/clearHistory"},27:function(e,t,n){"use strict";var r=n(1);t.a={id:r.h,text:"\u4e3b\u9898",showChildren:!0,children:[{id:"Sub1",text:"\u5206\u652f1",showChildren:!0,children:[]},{id:"Sub2",text:"\u5206\u652f2",showChildren:!0,children:[]},{id:"Sub3",text:"\u5206\u652f3",showChildren:!0,children:[]}]}},278:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(33),o=n.n(c),i=(n(60),n(61),n(5)),u=n(3),d=n(2),l=n(11),s=function(e){return{type:l.e,data:{title:e}}},f=function(){var e=Object(r.useContext)(i.a).global,t=e.state,n=t.theme_index,a=t.theme_list,c=e.dispatch;return{theme:Object(r.useMemo)(function(){return a[n]},[n]),theme_index:n,theme_list:a,setTheme:function(e){var t;c((t=e,{type:l.d,data:{theme_index:t}}))}}},m=n(1);function p(){var e=Object(u.a)(["\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    "]);return p=function(){return e},e}var h=function(e){var t=e.children,n=f().theme;return a.a.createElement("div",{className:Object(d.a)(p(),m.n,n.main,m.m,n.light,m.j,n.assist,m.k,n.dark,m.l,n.ex)},t)},b=n(6),v=n(10),g=n(16),O=n(13),x=function(){var e=Object(r.useContext)(i.a),t=e.mindmap.dispatch,n=e.nodeStatus.dispatch,a=e.history.state,c=function(e){if(e){var r=e.mindmap,a=e.cur_node;t(Object(g.h)(JSON.parse(r))),n(Object(O.d)(a))}};return{undoHistory:function(){c(a.undo[a.undo.length-1])},redoHistory:function(){c(a.redo[0])}}},j=function(){var e=Object(r.useContext)(i.a).global.dispatch;return{zoomIn:function(t,n){e(function(e,t){return{type:l.f,data:{x:e,y:t}}}(t,n))},zoomOut:function(t,n){e(function(e,t){return{type:l.g,data:{x:e,y:t}}}(t,n))},zoomReset:function(){var t;e({type:l.h,data:{zoomRate:t}})}}},E=function(){var e=Object(r.useContext)(i.a).global.dispatch;return{moveXY:function(t,n){e(function(e,t){return{type:l.b,data:{x:e,y:t}}}(t,n))},moveReset:function(){e({type:l.a,data:{}})}}},_=n(4),w=n(17);n(84);function y(){var e=Object(u.a)(["\n&, &:hover {\ncolor: #cccccc;\n}\n\ncursor: not-allowed;\n"]);return y=function(){return e},e}function k(){var e=Object(u.a)(["\nmargin: 0 0.12em;\npadding: 0 0.24em;\n/* margin \u7528\u4e8e\u589e\u52a0\u95f4\u9694\uff0cpadding \u7528\u4e8e\u589e\u5927\u53ef\u70b9\u51fb\u533a\u57df */\nbackground-color: transparent;\nborder: none;\noutline: none;\ncursor: pointer;\n\ni {\ndisplay: block;\nmargin-bottom: 0.12em;\nfont-size: 100%;\n}\nspan {\ndisplay: block;\nfont-size: 25%;\n}\n\n&:active {\ntransform: scale(0.95);\n}\n\n&:hover {\ncolor: var(",");\n}\n"]);return k=function(){return e},e}var C=function(e){var t=e.icon,n=e.onClick,r=e.children,c=e.disabled;return a.a.createElement("button",{onClick:c?_.e:n,className:Object(d.b)(N,Object(w.a)({},S,c))},a.a.createElement("i",{className:"zwicon-"+t}),a.a.createElement("span",null,r))},N=Object(d.a)(k(),m.j),S=Object(d.a)(y());function z(){var e=Object(u.a)(["\nalign-self: center;\npadding: 0 10px; /* \u4e24\u4fa7 padding \u7528\u4e8e\u589e\u5927\u7ec4\u4ef6\u70b9\u51fb\u533a\u57df\uff0c\u907f\u514d\u5c06\u5149\u6807\u5b9a\u4f4d\u81f3\u9996\u5c3e\u5904\u65f6\u610f\u5916 blur */\ncolor: var(",");\nfont-size: 20px;\nfont-weight: 700;\nborder-bottom: 2px solid transparent;\noutline: none;\ntransition: 0.2s;\n\n&:read-write {\ncursor: edit;\n}\n\n&:focus {\nborder-bottom: 2px solid var(",");\n}\n"]);return z=function(){return e},e}var R=function(){var e=Object(r.useRef)(),t=Object(r.useContext)(i.a).global,n=t.state.title,c=t.dispatch;Object(r.useEffect)(function(){document.title="RMind - ".concat(n),localStorage.setItem("title",n)},[n]);return a.a.createElement("span",{ref:e,className:L,contentEditable:"true",suppressContentEditableWarning:"true",spellCheck:"false",onKeyDown:function(t){switch(t.key.toUpperCase()){case"ESCAPE":e.current.textContent=n;case"ENTER":e.current.blur()}},onBlur:function(){var t=e.current.textContent.trim();""===t&&(t=n),t.length>30&&(t=t.slice(0,30)),e.current.textContent=t,c(s(t))}},n)},L=Object(d.a)(z(),m.k,m.j),T=n(27),D=n(12),M=function(e){var t=e.handleClosePopup,n=e.handleDownload,c=Object(r.useContext)(i.a).global.dispatch,o=Object(v.a)().setMindmap;return a.a.createElement("div",null,a.a.createElement(D.c,null,"\u65b0\u5efa\u5bfc\u56fe\u540e\uff0c\u5f53\u524d\u601d\u7ef4\u5bfc\u56fe\u7684\u6570\u636e\u5c06\u4e22\u5931\u3002"),a.a.createElement(D.a,null,"\u8981\u4fdd\u5b58\u5f53\u524d\u6570\u636e\uff0c\u8bf7\u5c06\u601d\u7ef4\u5bfc\u56fe",a.a.createElement(D.e,{onClick:n},"\u4e0b\u8f7d\u81f3\u672c\u5730"),"\u3002"),a.a.createElement(D.b,null,a.a.createElement(D.d,{onClick:function(){o(T.a,!0),c(s(m.a)),t()}},"\u65b0\u5efa\u5bfc\u56fe"),a.a.createElement("button",{onClick:t},"\u53d6\u6d88")))},P=n(26),I=n.n(P),A=function(e,t){var n,r;switch(t){case"MD":return e.match(/^#{1,6} /)?(n=e.match(/^#{1,6} /)[0].length-2,r=e.replace(/^#{1,6} /,"")):e.match(/^\s*[-*] /)&&(n=e.match(/^\s*[-*] /)[0].length+4,r=e.replace(/^\s*[-*] /,"")),{layer:n,text:r};case"TXT":return{layer:n=e.match(/^\s*/)[0].length,text:r=e.replace(/^\s*/,"")};default:return{layer:n,text:r}}},W=function(e,t){switch(t){case"RMF":return JSON.parse(e);case"KM":return function e(t,n,r,a){switch(t){case"KM":return n.id=a?m.h:r.data.id,n.text=r.data.text,n.showChildren="collapse"!==r.data.expandState,n.children=r.children.map(function(n){return e(t,{},n)}),n;default:return}}(t,{},JSON.parse(e).root,!0);default:return}},X=function(e,t){var n;switch(t){case"MD":case"TXT":n=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(0!==t.length||-1!==r){if(-1===r){var c=A(t.shift(),n);r=c.layer||0,a=c.text||"\u672a\u77e5\u6570\u636e"}for(var o={id:0===r?m.h:I()(""+Date.now()+Math.random()+a),text:a,showChildren:!0,children:[]};t.length>0;){var i=A(t[0],n),u=i.layer,d=i.text;if(u<=r)break;t.shift(),u&&o.children.push(e(t,n,u,d))}return o}}(e.split("\n").filter(function(e){return e}),t,-1);break;default:n=W(e,t)}return n};function B(){var e=Object(u.a)(["\nmargin: 0;\npadding: 0;\nfont-size: 90%;\nlist-style: circle inside;\n\nli {\nline-height: 2em;\n}\n"]);return B=function(){return e},e}function H(){var e=Object(u.a)(["\nmargin: 20px 0 5px;\npadding-bottom: 8px;\nborder-bottom: 1px solid #dddddd;\n"]);return H=function(){return e},e}var Y=function(e){var t=e.handleClosePopup,n=e.handleDownload,c=Object(r.useContext)(i.a).global.dispatch,o=Object(v.a)().setMindmap;return a.a.createElement("div",null,a.a.createElement(D.c,null,"\u6253\u5f00\u5176\u4ed6\u6587\u4ef6\u540e\uff0c\u5f53\u524d\u601d\u7ef4\u5bfc\u56fe\u7684\u6570\u636e\u5c06\u4e22\u5931\u3002"),a.a.createElement(D.a,null,"\u8981\u4fdd\u5b58\u5f53\u524d\u6570\u636e\uff0c\u8bf7\u5c06\u601d\u7ef4\u5bfc\u56fe",a.a.createElement(D.e,{onClick:n},"\u4e0b\u8f7d\u81f3\u672c\u5730"),"\u3002"),a.a.createElement("p",{className:K},"\u652f\u6301\u6253\u5f00\u683c\u5f0f\uff1a"),a.a.createElement("ul",{className:q},a.a.createElement("li",null,"RMind\uff08.rmf\uff09"),a.a.createElement("li",null,"\u767e\u5ea6\u8111\u56fe\uff08.km\uff09"),a.a.createElement("li",null,"Markdown\uff08.md\uff09"),a.a.createElement("li",null,"\u6587\u672c\u6587\u4ef6\uff08.txt\uff09")),a.a.createElement(D.b,null,a.a.createElement(D.d,{onClick:function(){var e=document.createElement("input");e.type="file",e.accept=".rmf,.km,.txt,.md",e.addEventListener("change",function(e){for(var n=e.target.files[0],r=n.name,a=r.length-1;a>0&&"."!==r[a];)a--;var i=r.slice(a+1).toUpperCase(),u=r.slice(0,a),d=new FileReader;d.onload=function(e){var n=e.target.result,r=X(n,i);r&&r.id===m.h?(o(r,!0),c(s(u)),t()):alert("\u4e0d\u662f\u6709\u6548\u7684\u601d\u7ef4\u5bfc\u56fe\u6587\u4ef6")},d.readAsText(n)}),e.click()}},"\u6253\u5f00\u6587\u4ef6"),a.a.createElement("button",{onClick:t},"\u53d6\u6d88")))},K=Object(d.a)(H()),q=Object(d.a)(B());function F(){var e=Object(u.a)(["\nbox-shadow: 0 0 0 4px #ffffff, 0 0 0 6px #000000; /* \u4e24\u5c42\u9634\u5f71\u5b9e\u73b0\u6846\u9009\u6548\u679c\uff0c\u4e5f\u53ef\u7528 inset \u9634\u5f71 + border-color \u505a */\n"]);return F=function(){return e},e}function J(){var e=Object(u.a)(["\ndisplay: flex;\nbox-sizing: border-box;\nwidth: 47%;\nheight: 25px;\nmargin: 8px 0;\nborder-radius: 18px;\ncursor: pointer;\noverflow: hidden;\n\ndiv {\nflex: 1;\nz-index: -1;\n}\n"]);return J=function(){return e},e}var U=function(e){var t=e.theme,n=e.index,r=e.is_current,c=e.setTheme;return a.a.createElement("li",{className:Object(d.b)($,Object(w.a)({},G,r)),onClick:function(){c(n)}},a.a.createElement("div",{style:{backgroundColor:t.ex}}),a.a.createElement("div",{style:{backgroundColor:t.dark}}),a.a.createElement("div",{style:{backgroundColor:t.main}}),a.a.createElement("div",{style:{backgroundColor:t.light}}))},$=Object(d.a)(J()),G=Object(d.a)(F());function V(){var e=Object(u.a)(["\ndisplay: flex;\njustify-content: space-between;\nflex-wrap: wrap;\npadding: 0;\nlist-style: none;\n"]);return V=function(){return e},e}var Z=function(e){var t=e.handleClosePopup,n=f(),c=n.theme_index,o=n.theme_list,i=n.setTheme;return Object(r.useEffect)(function(){localStorage.setItem("theme_index",c)},[c]),a.a.createElement("div",null,a.a.createElement(D.c,null,"\u8bf7\u9009\u62e9\u4e3b\u9898\uff1a"),a.a.createElement("ul",{className:Q},o.map(function(e,t){return a.a.createElement(U,{key:e.main,theme:e,index:t,is_current:c===t,setTheme:i})})),a.a.createElement(D.b,null,a.a.createElement("button",{onClick:t},"\u5b8c\u6210")))},Q=Object(d.a)(V());function ee(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\nbackground: #000000;\nopacity: 0.2;\n"]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\nposition: absolute;\ntop: 10px;\nright: 10px;\nfont-size: 25px;\nfont-weight: 700;\n\n&:active {\ntransform: scale(0.95)\n}\n"]);return te=function(){return e},e}function ne(){var e=Object(u.a)(["\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\ntop:30%;\nleft:0;\nright:0;\nwidth: 400px;\nmargin: auto;\npadding: 40px 40px 20px;\nfont-size: 1rem;\nbackground-color: #ffffff;\nborder-radius: 20px;\nz-index: 1;\n"]);return ne=function(){return e},e}function re(){var e=Object(u.a)(["\nposition: fixed;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n"]);return re=function(){return e},e}var ae=function(e){var t=e.type,c=e.handleClosePopup,o=e.handleDownload,i=function(e){switch(e){case"new":return M;case"open":return Y;case"export":return Object(r.lazy)(function(){return n.e(3).then(n.bind(null,279))});case"theme":return Z;default:return}}(t);return a.a.createElement("div",{className:ce,onClick:_.e},a.a.createElement("div",{className:oe},a.a.createElement("i",{className:"zwicon-close-circle "+ie,onClick:c}),a.a.createElement(r.Suspense,{fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(i,{handleClosePopup:c,handleDownload:o}))),a.a.createElement("div",{className:ue,onClick:c}))},ce=Object(d.a)(re()),oe=Object(d.a)(ne()),ie=Object(d.a)(te()),ue=Object(d.a)(ee()),de=n(49),le=n.n(de),se=n(50),fe=n(20),me=n.n(fe);function pe(){var e=Object(u.a)(["\ndisplay: flex;\n"]);return pe=function(){return e},e}function he(){var e=Object(u.a)(["\ndisplay: flex;\njustify-content: space-between;\nposition: fixed;\ntop:0;\nleft:0;\nright:0;\nheight: 56px;\npadding: 0 50px;\nfont-size: 25px;\nbackground-color: #ffffff;\nbox-shadow: 0 0px 2px #aaaaaa;\nz-index: 10;\n"]);return he=function(){return e},e}var be=function(){var e=Object(r.useState)("none"),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(r.useContext)(i.a),u=o.mindmap.state,d=o.history.state,l=o.global.state.title,s=Object(v.a)().expandAll,f=j(),p=f.zoomIn,h=f.zoomOut,g=f.zoomReset,O=E(),w=O.moveXY,y=O.moveReset,k=x(),N=k.undoHistory,S=k.redoHistory,z=function(){le()(document.getElementById(m.d)).then(function(e){var t=e.toDataURL("image/png");Object(_.c)(t,"".concat(l,".png"));var n={content:Object(se.a)(u,"KM")};alert(n),me.a.post("http://localhost:4000/save",n).then(function(){return alert("Mindmap saved")}).catch(function(e){alert(e)})})},L=function(e){switch(console.log("\u7f29\u653e",e||"\u8fd8\u539f"),e){case"in":p();break;case"out":h();break;default:g()}},T=function(e){switch(console.log("\u79fb\u52a8",e||"\u8fd8\u539f"),e){case"up":w(0,-5);break;case"down":w(0,5);break;case"left":w(-5,0);break;case"right":w(5,0);break;default:y()}};return a.a.createElement("nav",{className:ve},a.a.createElement("section",{className:ge,onClick:_.e},a.a.createElement(C,{icon:"add-item-alt",onClick:function(){c("new")}},"\u65b0\u5efa"),a.a.createElement(C,{icon:"folder-open",onClick:function(){c("open")}},"\u6253\u5f00"),a.a.createElement(C,{icon:"file-download",onClick:z},"\u4e0b\u8f7d\u81f3\u672c\u5730"),a.a.createElement(C,{icon:"duplicate",onClick:function(){c("export")}},"\u5bfc\u51fa"),a.a.createElement(C,{icon:"palette",onClick:function(){c("theme")}},"\u4e3b\u9898"),a.a.createElement(C,{icon:"plus-circle",onClick:function(){return L("in")}},"\u653e\u5927"),a.a.createElement(C,{icon:"minus-circle",onClick:function(){return L("out")}},"\u7f29\u5c0f"),a.a.createElement(C,{icon:"rotate-left",onClick:function(){return L()}},"\u8fd8\u539f")),a.a.createElement("section",{className:ge},a.a.createElement(R,null)),a.a.createElement("section",{className:ge,onClick:_.e},a.a.createElement(C,{icon:"rotate-left",onClick:function(){return T()}},"\u8fd8\u539f"),a.a.createElement(C,{icon:"arrow-left",onClick:function(){return T("left")}},"\u5de6"),a.a.createElement(C,{icon:"arrow-up",onClick:function(){return T("up")}},"\u4e0a"),a.a.createElement(C,{icon:"arrow-down",onClick:function(){return T("down")}},"\u4e0b"),a.a.createElement(C,{icon:"arrow-right",onClick:function(){return T("right")}},"\u53f3"),a.a.createElement(C,{icon:"undo",disabled:0===d.undo.length,onClick:function(){N()}},"\u64a4\u9500"),a.a.createElement(C,{icon:"redo",disabled:0===d.redo.length,onClick:function(){S()}},"\u91cd\u505a"),a.a.createElement(C,{icon:"scale",onClick:function(){s(m.h)}},"\u5c55\u5f00\u6240\u6709\u8282\u70b9")),"none"!==n&&a.a.createElement(ae,{type:n,handleClosePopup:function(){c("none")},handleDownload:z}))},ve=Object(d.a)(he()),ge=Object(d.a)(pe()),Oe=n(22),xe=(n(85),function(){var e=Object(r.useState)({show:!0,name:"",email:"",password:"",password2:""}),t=Object(b.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)(function(){var e=document.getElementById("fullscreen-container");o||("none"!==e.style.display?e.style.display="none":e.style.display="block")});var o=n.show,i=n.name,u=n.email,d=n.password,l=n.password2,s=function(e){return c(Object(Oe.a)({},n,Object(w.a)({},e.target.name,e.target.value)))};return o?a.a.createElement("div",{id:"fullscreen-container"},a.a.createElement("div",{className:"form-popup"},a.a.createElement("button",{className:"close",onClick:function(){c(Object(Oe.a)({},n,{show:!1}))}},"x"),a.a.createElement("h1",{className:"large text-primary"},"Sign Up"),a.a.createElement("p",{className:"lead"},a.a.createElement("i",{className:"fas fa-user"})," Create Your Account"),a.a.createElement("form",{className:"form",onSubmit:function(e){return function(e){e.preventDefault(),d!==l?alert("Passwords do not match"):alert(n)}(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Name",name:"name",value:i,onChange:function(e){return s(e)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{autoFocus:!0,type:"email",placeholder:"Email Address",value:u,name:"email",onChange:function(e){return s(e)},required:!0}),a.a.createElement("br",null),a.a.createElement("small",{className:"form-text"},"This site uses Gravatar so if you want a profile image, use a Gravatar email")),a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{autoFocus:!0,type:"password",placeholder:"Password",name:"password",value:d,onChange:function(e){return s(e)},minLength:"6"})),a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{autoFocus:!0,type:"password",placeholder:"Confirm Password",name:"password2",value:l,onChange:function(e){return s(e)},minLength:"6"})),a.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"})),a.a.createElement("p",{className:"my-1"},"Already have an account? ",a.a.createElement("a",{href:"login.html"},"Sign In")))):null}),je=n(29),Ee=function(e,t,n){var r=t.addChild,a=t.addSibling,c=t.editNode,o=t.deleteNode,i=t.toggleChildren,u=t.selectNode;return function(t){""===e.cur_edit&&((navigator.platform.toUpperCase().startsWith("MAC")?t.metaKey:t.ctrlKey)&&"Z"===t.key.toUpperCase()&&(t.shiftKey?n.redoHistory():n.undoHistory()));if(""!==e.cur_select)try{!function(t){switch(t.key.toUpperCase()){case"TAB":r(e.cur_select);break;case"ENTER":t.preventDefault(),a(e.cur_select,e.cur_node_info.parent.id);break;case"F2":c(e.cur_select);break;case"BACKSPACE":case"DELETE":o(e.cur_select,e.cur_node_info.parent.id);break;case" ":t.preventDefault(),i(e.cur_select,!e.cur_node_info.showChildren);break;case"ARROWLEFT":t.preventDefault(),e.cur_node_info.parent===m.i?e.cur_node_info.children.length>3&&u(e.cur_node_info.children[Math.trunc(e.cur_node_info.children.length/2)].id):e.cur_node_info.on_left?e.cur_node_info.children.length>0&&u(e.cur_node_info.children[0].id):u(e.cur_node_info.parent.id);break;case"ARROWRIGHT":t.preventDefault(),e.cur_node_info.on_left?u(e.cur_node_info.parent.id):e.cur_node_info.children.length>0&&u(e.cur_node_info.children[0].id);break;case"ARROWUP":t.preventDefault();var n=e.cur_node_info.parent.children.findIndex(function(t){return t.id===e.cur_node_info.id});n>0&&u(e.cur_node_info.parent.children[n-1].id);break;case"ARROWDOWN":t.preventDefault();var d=e.cur_node_info.parent.children.findIndex(function(t){return t.id===e.cur_node_info.id});d<e.cur_node_info.parent.children.length-1&&u(e.cur_node_info.parent.children[d+1].id)}}(t)}catch(d){alert("\u5f53\u524d\u7684\u8282\u70b9\u4fe1\u606f\u5b58\u5728\u95ee\u9898\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u8282\u70b9")}}},_e={startX:0,startY:0},we=function(e,t,n){var r=e.zoomIn,a=e.zoomOut,c=e.moveXY;return function(e){try{!function(e){if(!0===e.ctrlKey&&e.wheelDelta)return e.preventDefault(),e.stopPropagation(),void(function(e){return e.wheelDelta?e.wheelDelta:40*-e.wheelDelta}(e)>0?r(e.clientX,e.clientY):a(e.clientX,e.clientY));if(1===e.buttons&&"mousedown"===e.type)return _e.startX=e.clientX,void(_e.startY=e.clientY);if(e.altKey&&1===e.buttons){e.stopPropagation();var t=_e.startX,o=_e.startY,i=e.clientX-t,u=e.clientY-o;c(i/10/n,u/10),_e.startX=e.clientX,_e.startY=e.clientY}}(e)}catch(t){alert("\u79fb\u52a8\u6216\u7f29\u653e\u529f\u80fd\u5f02\u5e38",t)}}},ye=n(28),ke=function(e){return{type:ye.a,data:{isShow:e}}},Ce=function(){var e=Object(r.useContext)(i.a).editPanel,t=e.state,n=e.dispatch;return{toggelPanelShow:function(e){t.isShow!==e&&n(ke(e))},savePanel:function(e){n(ke(e))}}};function Ne(){var e=Object(u.a)(["\ndisplay: flex;\nposition: absolute;\nbottom: calc(100% + 5px);\nleft:0;\nbackground-color: #ffffff;\nwidth: max-content;\nheight: 50px;\npadding: 0 8px;\nfont-size: 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\nbox-shadow: 5px 5px 10px #aaaaaa;\n"]);return Ne=function(){return e},e}var Se=function(e){var t=e.layer,n=e.node,r=e.parent,c=Object(v.a)(),o=Ce();return a.a.createElement("div",{className:ze,onClick:_.e},a.a.createElement(C,{icon:"git-commit",onClick:function(){c.addChild(n.id)}},"\u6dfb\u52a0\u5b50\u8282\u70b9"),a.a.createElement(C,{icon:"git-fork",onClick:function(){c.addSibling(n.id,r.id)},disabled:t<1},"\u6dfb\u52a0\u5144\u5f1f\u8282\u70b9"),a.a.createElement(C,{icon:"delete",onClick:function(){c.deleteNode(n.id,r.id)},disabled:t<1},"\u5220\u9664"),a.a.createElement(C,{icon:"edit-pencil",onClick:function(){c.editNode(n.id)}},"\u7f16\u8f91"),a.a.createElement(C,{icon:"edit-pencil",onClick:function(){c.selectNode(n.id),o.toggelPanelShow(!0)}},"\u6dfb\u52a0\u5907\u6ce8"),a.a.createElement(C,{icon:"split-v",onClick:function(){c.toggleChildren(n.id,!n.showChildren)},disabled:t<1||0===n.children.length},"\u663e\u9690\u5b50\u8282\u70b9"))},ze=Object(d.a)(Ne());function Re(){var e=Object(u.a)(["\nposition: absolute;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nwidth: fit-content;\nmin-width: 1em;\nmax-width: 10em;\nheight: fit-content;\nmargin: auto;\npadding: 10px;\ncolor: #333333;\nbackground-color: #ffffff;\nbox-shadow: 0 0 20px #aaaaaa;\nborder-radius: 5px;\noutline: none;\nz-index: 3;\nuser-select: text;\n"]);return Re=function(){return e},e}var Le=function(e){var t=e.node_id,n=e.children,c=Object(r.useRef)(),o=Object(v.a)(),i=o.changeText,u=o.selectNode;return Object(r.useEffect)(function(){c.current.focus(),document.getSelection().selectAllChildren(c.current)},[]),a.a.createElement("div",{className:Te,ref:c,contentEditable:"true",suppressContentEditableWarning:"true",onClick:_.e,onKeyDown:function(e){switch(e.key.toUpperCase()){case"ESCAPE":c.current.textContent=n;case"ENTER":c.current.blur()}},onBlur:function(){i(t,c.current.textContent),u(t)}},n)},Te=Object(d.a)(Re()),De=n(30),Me=n.n(De),Pe=(n(86),n(34)),Ie=n.n(Pe);n(273);Me.a.setOptions({renderer:new Me.a.Renderer,highlight:function(e){return Ie.a.highlightAuto(e).value},pedantic:!1,gfm:!1,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var Ae=function(e){var t=e.mdtext,n=void 0===t?"":t;return Object(r.useEffect)(function(){document.querySelectorAll("pre code").forEach(function(e){Ie.a.highlightBlock(e)})},[n]),a.a.createElement("div",{className:"MdPreview"},a.a.createElement("i",{className:"zwicon-note",style:{fontSize:20}}),a.a.createElement("div",{className:"MdPreview-Content",dangerouslySetInnerHTML:{__html:Me()(n)}}))};function We(){var e=Object(u.a)(["\nright: -15px;\n"]);return We=function(){return e},e}function Xe(){var e=Object(u.a)(["\nleft: -15px;\n"]);return Xe=function(){return e},e}function Be(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom: 0;\nwidth: 20px;\nheight: 20px;\nmargin: auto 0;\npadding: 0;\ntext-align: center;\nbackground-color: #ffffff;\nborder: 1px solid #cccccc;\nborder-radius: 50%;\noutline: none;\n"]);return Be=function(){return e},e}function He(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n"]);return He=function(){return e},e}function Ye(){var e=Object(u.a)(["\nz-index: 1; /* \u63d0\u9ad8 Node \u9ad8\u5ea6\uff0c\u9632\u6b62\u88ab\u906e\u6321 */\n","\n"]);return Ye=function(){return e},e}function Ke(){var e=Object(u.a)(["\ndiv& {\npadding: 0 15px;\nborder: none;\np {\nfont-size: 90%;\n}\n}\n    "]);return Ke=function(){return e},e}function qe(){var e=Object(u.a)(["\ndiv& {\npadding: 10px 15px;\n}\n    "]);return qe=function(){return e},e}function Fe(){var e=Object(u.a)(["\ndiv& {\nbackground-color: var(",");\n}\n    "]);return Fe=function(){return e},e}function Je(){var e=Object(u.a)(["\ndiv& {\npadding: 15px 20px;\ncolor: #ffffff;\nfont-size: 120%;\nfont-weight: 700;\nbackground-color: var(",");\nborder:2px solid var(",");\n}\n    "]);return Je=function(){return e},e}function Ue(){var e=Object(u.a)(["\nposition: relative;\nmin-width: 10px;\nmax-width: 200px;\nmargin: 20px 40px;\npadding: 15px;\nbackground-color: #ffffff;\nborder: 1px solid var(",");\nborder-radius: 15px;\ncursor: pointer;\n\np {\nmin-height: 18px; /* \u5f53 p \u4e2d\u6ca1\u6709\u5185\u5bb9\u65f6\u6491\u8d77\u5143\u7d20 */\nmargin: 0;\nline-height: 1.5em;\noverflow-wrap: break-word;\n}\n\n&:hover {\n","\n}\n\n&.ondrag {\nbackground-color: var(",");\np {\ncolor: #ffffff;\n}\n}\n"]);return Ue=function(){return e},e}var $e=function(e){var t=e.layer,n=e.node,c=e.parent,o=e.node_refs,u=e.on_left,l=Object(r.useRef)(),s=Object(r.useContext)(i.a),f=s.nodeStatus,p=f.state,h=f.dispatch,b=s.editPanel.state,g=Object(v.a)();return Object(r.useEffect)(function(){return o.add(l),function(){o.delete(l)}},[]),Object(r.useEffect)(function(){p.cur_select===n.id&&(l.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),h(Object(O.b)(n,c,u)))},[p.cur_select,n]),a.a.createElement("div",{className:Object(d.b)(Ve,Ze[t<3?t:3],Object(w.a)({},Qe,p.cur_select===n.id)),draggable:t>0&&p.cur_edit!==n.id,"data-tag":u?m.c:m.g,"data-parent":c.id,"data-show-children":n.showChildren,id:n.id,ref:l,onClick:_.e},p.cur_edit===n.id&&a.a.createElement(Le,{node_id:n.id},n.text),a.a.createElement("div",{className:et,"data-tag":m.b,onClick:function(){g.selectNode(n.id,!0)},onDoubleClick:function(){g.editNode(n.id)}}),a.a.createElement("p",null,n.text," ",n.info&&a.a.createElement(Ae,{mdtext:n.info})),t>0&&n.children.length>0&&a.a.createElement("button",{className:Object(d.b)(tt,u?nt:rt),onClick:function(){g.toggleChildren(n.id,!n.showChildren),g.clearNodeStatus()}},n.showChildren?"-":"+"),p.cur_select===n.id&&p.select_by_click&&!b.isShow&&a.a.createElement(Se,{layer:t,node:n,parent:c}))},Ge="\nbox-shadow: 0 0 0 3px #ffffff, 0 0 0 6px var(".concat(m.l,"); /* \u53cc\u5c42\u9634\u5f71\u5b9e\u73b0\u9009\u4e2d\u6846 */\n"),Ve=Object(d.a)(Ue(),m.n,Ge,m.l),Ze=[Object(d.a)(Je(),m.k,m.l),Object(d.a)(Fe(),m.m),Object(d.a)(qe()),Object(d.a)(Ke())],Qe=Object(d.a)(Ye(),Ge),et=Object(d.a)(He()),tt=Object(d.a)(Be()),nt=Object(d.a)(Xe()),rt=Object(d.a)(We());function at(){var e=Object(u.a)(["\nflex-direction: row-reverse;\n"]);return at=function(){return e},e}function ct(){var e=Object(u.a)(["\ndisplay: flex;\nalign-items: center;\n"]);return ct=function(){return e},e}var ot=function e(t){var n=t.layer,r=t.node,c=t.node_refs,o=t.parent,i=t.on_left;return a.a.createElement("div",{className:Object(d.b)(it,Object(w.a)({},ut,i))},a.a.createElement($e,{layer:n,node:r,node_refs:c,parent:o,on_left:i}),a.a.createElement("div",null,r.showChildren&&r.children.map(function(t){return a.a.createElement(e,{key:t.id,layer:n+1,node:t,node_refs:c,parent:r,on_left:i})})))},it=Object(d.a)(ct()),ut=Object(d.a)(at());function dt(){var e=Object(u.a)(["\ndisplay: flex;\nalign-items: center;\nwidth: max-content; /* max-content \u624d\u80fd\u4fdd\u8bc1\u6b63\u786e\u8bfb\u53d6\u5e03\u5c40 */\n"]);return dt=function(){return e},e}var lt=function(e){var t=e.layer,n=e.node,c=e.node_refs,o=Object(r.useRef)(),i=n.children.length,u=i>3?Math.trunc(i/2):i;return Object(r.useEffect)(function(){o.current.scrollIntoView({block:"center",inline:"center"})},[]),a.a.createElement("div",{className:st},a.a.createElement("div",null,n.showChildren&&n.children.slice(u).map(function(e){return a.a.createElement(ot,{key:e.id,layer:t+1,node:e,node_refs:c,parent:n,on_left:!0})})),a.a.createElement("div",{ref:o},a.a.createElement($e,{layer:0,node:n,node_refs:c,parent:m.i})),a.a.createElement("div",null,n.showChildren&&n.children.slice(0,u).map(function(e){return a.a.createElement(ot,{key:e.id,layer:t+1,node:e,node_refs:c,parent:n,on_left:!1})})))},st=Object(d.a)(dt()),ft=n(37),mt=function(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t,a,.9*r+.1*t,a,r,a)},pt=function(e,t,n,r){e.beginPath(),e.lineWidth="2",e.strokeStyle=t.main,function e(t,n,r){var a=n.id,c=n.children;if(c.length>0){var o=r.get(a),i=Object(b.a)(o,3),u=i[0],d=i[1],l=i[2];c.forEach(function(n){var a=r.get(n.id);if(a){var c=Object(b.a)(a,4),o=c[0],i=c[1],s=c[2];c[3]===m.c?mt(t,u,l,i,s):mt(t,d,l,o,s),e(t,n,r)}})}}(e,n,r),e.stroke(),e.closePath()},ht=function(e,t,n,r,a,c){e.beginPath(),e.strokeStyle=t.main,e.lineWidth="2",e.setLineDash([5,5]);var o,i,u=(r.top+r.bottom)/2,d=(a.top+a.bottom)/2;c?(o=r.left,i=a.right,e.strokeRect(i-50,d-10,50,20)):(o=r.right,i=a.left,e.strokeRect(i,d-10,50,20)),mt(e,o,u,i,d),e.stroke(),e.closePath()},bt=function(e){var t=e.offsetLeft,n=t+e.offsetWidth,r=e.offsetTop;return{left:t,right:n,top:r,bottom:r+e.offsetHeight}},vt=function(e,t,n,r,a,c,o){var i,u,d,l,s,f,p,h,b,v,g,O,x,j,E,w=a.moveNode,y=function(e){g=n.scrollLeft,O=n.scrollTop-56};return[{type:"dragstart",listener:function(t){if(i="",u="",d="",l=!1,s=[],f=[],p=[],h=[],b=void 0,v=!1,g=n.scrollLeft,O=n.scrollTop-56,x=n.offsetWidth,j=n.offsetHeight,E=!1,n.addEventListener("scroll",y),t.target&&(t.target.dataset.tag===m.c||t.target.dataset.tag===m.g)){i=t.target.id,u=t.target.dataset.parent;var r=Object(_.d)(e,u);v=r===e,b=bt(document.getElementById(u)),s[0]=r.children.map(function(e){return e.id});var a=[];if(a[0]=s[0].map(function(e){return bt(document.getElementById(e))}),v&&e.children.length>3){var c=Math.trunc(e.children.length/2);s=[s[0].slice(0,c),s[0].slice(c)],a=[a[0].slice(0,c),a[0].slice(c)]}f=a.map(function(e){return Math.min.apply(Math,Object(ft.a)(e.map(function(e){return e.left})))}),p=a.map(function(e){return Math.max.apply(Math,Object(ft.a)(e.map(function(e){return e.right})))}),h=a.map(function(e){return e.map(function(e){return[e.top,e.bottom]}).reduce(function(e,t){return e.concat(t)},[])})}}},{type:"drag",listener:function(e){var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);for(var a=s.length,u=-x*o.x/100,_=-j*o.y/100,w=(e.x+g)/c+u,y=(e.y+O)/c+_,k=0;k<a;k++)if(!E&&w>f[k]&&w<p[k]){var C={left:f[k],right:p[k]},N=1===k||!v&&document.getElementById(i).dataset.tag===m.c,S=h[k].length-1;if(y>h[k][0]-200&&y<h[k][0])return C.top=h[k][0]-50,C.bottom=h[k][0],ht(n,r,0,b,C,N),d=s[k][0],void(l=!0);for(var z=2;z<S+1;z+=2)if(y>h[k][z-1]&&y<h[k][z])return C.top=h[k][z-1],C.bottom=h[k][z],ht(n,r,0,b,C,N),d=s[k][z/2],void(l=!0);if(y>h[k][S]&&y<h[k][S]+200)return C.top=h[k][S],C.bottom=h[k][S]+50,ht(n,r,0,b,C,N),d=s[k+1]&&s[k+1][0],void(l=!0)}}},{type:"dragover",listener:function(e){e.preventDefault()}},{type:"dragenter",listener:function(e){e.target&&e.target.dataset.tag===m.b&&(e.target.parentNode.classList.add("ondrag"),d=e.target.parentNode.id,l=!1,E=!0)}},{type:"dragleave",listener:function(e){e.target&&e.target.dataset.tag===m.b&&(e.target.parentNode.classList.remove("ondrag"),d="",l=!1,E=!1)}},{type:"drop",listener:function(e){e.target.parentNode.classList.remove("ondrag"),""!==d&&d!==i&&d!==u&&w(i,d,u,l)}},{type:"dragend",listener:function(){t.getContext("2d").clearRect(0,0,t.width,t.height),n.removeEventListener("scroll",y)}}]};function gt(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -1;\n"]);return gt=function(){return e},e}var Ot=function(e){var t=e.parent_ref,n=e.container_ref,c=e.mindmap,o=Object(r.useRef)(),u=Object(r.useState)(0),d=Object(b.a)(u,2),l=d[0],s=d[1],p=f().theme,h=Object(v.a)(),g=Object(r.useContext)(i.a).global.state,O=g.zoom,x=g.x,j=g.y,E=function(){s(Date.now())};return Object(r.useEffect)(function(){return window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}},[]),Object(r.useEffect)(function(){var e=vt(c,o.current,n.current,p,h,O,{x:x,y:j});return e.forEach(function(e){return document.querySelector("#".concat(m.d)).addEventListener(e.type,e.listener)}),function(){e.forEach(function(e){return document.querySelector("#".concat(m.d)).removeEventListener(e.type,e.listener)})}},[c,p,O,x,j]),Object(r.useEffect)(function(){var e=o.current;e.width=t.current.offsetWidth,e.height=t.current.offsetHeight},[c,l,g.zoom]),a.a.createElement("canvas",{ref:o,className:xt})},xt=Object(d.a)(gt());function jt(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -2;\n"]);return jt=function(){return e},e}var Et=function(e){var t=e.parent_ref,n=e.mindmap,c=e.node_refs,o=Object(r.useRef)(),u=Object(r.useState)(0),d=Object(b.a)(u,2),l=d[0],s=d[1],m=f().theme,p=Object(r.useContext)(i.a).global.state,h=function(e){s(Date.now())};return Object(r.useEffect)(function(){return window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}},[]),Object(r.useEffect)(function(){var e=o.current;e.width=t.current.offsetWidth,e.height=t.current.offsetHeight;var r=new Map(Array.from(c).map(function(e){return[e.current.id,[e.current.offsetLeft,e.current.offsetLeft+e.current.offsetWidth,e.current.offsetTop+.5*e.current.offsetHeight,e.current.dataset.tag]]})),a=e.getContext("2d");pt(a,m,n,r)},[n,m,l,p.zoom]),a.a.createElement("canvas",{ref:o,className:_t})},_t=Object(d.a)(jt());function wt(){var e=Object(u.a)(["\nposition: relative;\nwidth: fit-content;\npadding: 30vh 30vw;\n"]);return wt=function(){return e},e}var yt=new Set,kt=function(e){var t=e.container_ref,n=Object(r.useRef)(),c=Object(r.useContext)(i.a),o=c.mindmap.state,u=c.nodeStatus.state,d=c.history.dispatch,l=c.global.state,s=x(),f=Object(v.a)(),p=j(),h=E(),g=f.clearNodeStatus,O=Object(r.useState)(0),w=Object(b.a)(O,2),y=w[0],k=w[1],C=Object(r.useMemo)(function(){return JSON.stringify(o)},[o]),N=function(){k(Date.now())};return Object(r.useEffect)(function(){var e=Ee(u,f,s);return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[u]),Object(r.useEffect)(function(){return window.addEventListener("click",g),function(){window.removeEventListener("click",g)}},[]),Object(r.useEffect)(function(){return window.addEventListener("resize",N),function(){window.removeEventListener("resize",N)}},[]),Object(r.useEffect)(function(){var e=t.current.clientWidth/t.current.clientHeight,n=we(p,l.zoom),r=we(h,l.zoom,e);return document.querySelector("#".concat(m.e)).addEventListener("wheel",n),document.querySelector("#".concat(m.e)).addEventListener("mousemove",Object(_.a)(r,4)),document.querySelector("#".concat(m.e)).addEventListener("mousedown",r),function(){document.querySelector("#".concat(m.e)).removeEventListener("wheel",n),document.querySelector("#".concat(m.e)).addEventListener("mousemove",Object(_.a)(r,4)),document.querySelector("#".concat(m.e)).addEventListener("mousedown",r)}},[y]),Object(r.useEffect)(function(){localStorage.setItem("mindmap",C),d(Object(je.b)(C,u.cur_select||u.cur_edit))},[C]),a.a.createElement("div",{className:Ct,ref:n,style:{zoom:l.zoom,left:l.x+"vw",top:l.y+"vh"},id:m.d,draggable:!1},a.a.createElement(lt,{key:o.id,layer:0,node:o,node_refs:yt}),a.a.createElement(Ot,{parent_ref:n,container_ref:t,mindmap:o}),a.a.createElement(Et,{parent_ref:n,mindmap:o,node_refs:yt}))},Ct=Object(d.a)(wt());var Nt=function(e){var t=e.propText,n=Object(r.useState)(t),c=Object(b.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)(function(){i(t)},[t]),a.a.createElement("div",{className:e.className||""},a.a.createElement("textarea",{style:St,onChange:function(e){i(e.target.value)},onBlur:function(){console.log("\u5907\u6ce8\uff1a",o),e.onBlur&&e.onBlur(o)},value:o}))},St={width:"100%",height:"100%",resize:"none"};function zt(){var e=Object(u.a)(["\n    margin-top:20px;\n    width:295px;\n    height:460px;\n"]);return zt=function(){return e},e}function Rt(){var e=Object(u.a)(["\nheight: 500px;\nwidth: 300px;\ntop: 20px;\nright: 40px;\nmargin: 56px 0 0;\noverflow: auto;\nposition: fixed;\n//z-index: 10;\nborder: 2px solid #eeee;\nborder-radius: 10px;\nbackground: #fff;\nbackground:rgba(255,255,255,1);\nbox-shadow:0px 2px 12px 0px rgba(0,0,0,0.16);\npadding:20px 10px;\n"]);return Rt=function(){return e},e}var Lt=function(){var e=Object(r.useContext)(i.a),t=e.editPanel.state,n=e.nodeStatus.state.cur_node_info,c=n.info,o=void 0===c?"":c,u=n.text,d=n.id,l=Object(v.a)(),s=Ce();return t.isShow?a.a.createElement("div",{className:Tt,onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}},"\u5f53\u524d\u7f16\u8f91\u8282\u70b9\uff1a",u||"\u65e0",a.a.createElement("i",{className:"zwicon-close",style:Dt,onClick:function(){return s.toggelPanelShow(!1)}}),a.a.createElement(Nt,{className:Mt,propText:o,onBlur:function(e){return d&&l.editNodeInfo(d,e)}})):null},Tt=Object(d.a)(Rt()),Dt={fontSize:20,position:"absolute",cursor:"pointer",right:"10px",top:"5px"},Mt=Object(d.a)(zt());function Pt(){var e=Object(u.a)(["\nheight: calc(100vh - 56px);\nmargin: 56px 0 0;\noverflow: hidden;\n"]);return Pt=function(){return e},e}var It=function(){var e=Object(r.useRef)();return a.a.createElement("main",{ref:e,className:At,id:m.e},a.a.createElement(kt,{container_ref:e}),a.a.createElement(Lt,null))},At=Object(d.a)(Pt()),Wt=n(53),Xt=n(7),Bt=function(){return a.a.createElement(Wt.a,null,a.a.createElement(i.b,null,a.a.createElement(h,null,a.a.createElement(Xt.a,{exact:!0,path:"/",component:Object(Xt.e)(be)}),a.a.createElement(Xt.a,{exact:!0,path:"/",component:Object(Xt.e)(It)}),a.a.createElement(Xt.a,{exact:!0,path:"/",component:Object(Xt.e)(xe)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Bt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="editPanel/togglePanelShow"},29:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(24),a=function(e,t){return{type:r.b,data:e?{mindmap:e,cur_node:t}:null}},c=function(){return{type:r.a}}},4:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return d});var r=n(6),a=function(e){e.stopPropagation()},c=function e(t){if(t instanceof Object){if(Array.isArray(t))return t.map(e);var n={};return Object.entries(t).forEach(function(t){var a=Object(r.a)(t,2),c=a[0],o=a[1];n[c]=e(o)}),n}return t},o=function e(t,n){return t.id===n?t:t.children.map(function(t){return e(t,n)}).find(function(e){return e})},i=function e(t){t.showChildren=!0,t.children.forEach(e)},u=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()},d=function(e,t){var n=null;return function(){var r=this,a=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(r,a)},t)}}},5:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(9),i=n(27),u=n(4),d=JSON.parse(localStorage.getItem("mindmap"))||i.a,l=function(e,t){switch(t.type){case o.h:var n=Object(u.b)(e),r=Object(u.d)(n,t.data.node_id);return r.children.length>0&&r!==n&&Object.assign(r,t.data.node),n;case o.a:var a=Object(u.b)(e);return Object(u.d)(a,t.data.node_id).children.push(t.data.node),a;case o.b:var c=Object(u.b)(e);if(t.data.parent_id){var i=Object(u.d)(c,t.data.parent_id),d=i.children.findIndex(function(e){return e.id===t.data.node_id})+1;i.children.splice(d,0,t.data.node)}return c;case o.f:var l=Object(u.b)(e),s=Object(u.d)(l,t.data.parent_id),f=s.children.findIndex(function(e){return e.id===t.data.node_id}),m=s.children[f];if(s.children.splice(f,1),t.data.is_sibling){var p=s.children.findIndex(function(e){return e.id===t.data.target_id})+1||s.children.length+1;s.children.splice(p-1,0,m)}else{Object(u.d)(l,t.data.target_id).children.push(m)}return l;case o.c:var h=Object(u.b)(e),b=Object(u.d)(h,t.data.node_id);return Object.assign(b,t.data.node),h;case o.d:var v=Object(u.b)(e);if(t.data.parent_id){var g=Object(u.d)(v,t.data.parent_id),O=g.children.findIndex(function(e){return e.id===t.data.node_id});g.children.splice(O,1)}return v;case o.e:var x=Object(u.b)(e),j=Object(u.d)(x,t.data.node_id);return Object(u.f)(j),x;case o.g:return t.data.mindmap;default:return e}},s=n(22),f=n(19),m={cur_select:"",select_by_click:!1,cur_edit:"",cur_node_info:{}},p=function(e,t){switch(t.type){case f.d:return e.cur_select===t.data.cur_select&&delete t.data.cur_node_info,Object(s.a)({},e,t.data);case f.c:case f.a:case f.b:return Object(s.a)({},e,t.data);default:return e}},h=n(24),b={undo:[],redo:[],last_snapshot:null},v=function(e,t){switch(t.type){case h.b:var n=Object(u.b)(e);return n.last_snapshot&&(n.undo.length>0&&n.undo[n.undo.length-1].mindmap===t.data.mindmap?(n.redo.unshift(n.last_snapshot),n.undo.pop()):n.redo.length>0&&n.redo[0].mindmap===t.data.mindmap?(n.undo.push(n.last_snapshot),n.redo.shift()):(n.undo.push(n.last_snapshot),n.redo=[])),n.last_snapshot=t.data,n;case h.a:return b;default:return e}},g=n(11),O=n(1),x=(n(62),{title:localStorage.getItem("title")||O.a,theme_index:Number(localStorage.getItem("theme_index"))||0,theme_list:[{main:"#eda938",light:"#f4cc87",dark:"#e79021",ex:"#ce7529",assist:"#1980da"},{main:"#ff4c26",light:"#ffcabc",dark:"#e83f1d",ex:"#c12a0f",assist:"#0e95ac"},{main:"#50b843",light:"#c3e5bd",dark:"#28ab17",ex:"#038b00",assist:"#790595"},{main:"#2d99d7",light:"#e2f5ff",dark:"#2786c3",ex:"#2375af",assist:"#ca6c27"},{main:"#b347d2",light:"#e4c0ef",dark:"#a623c9",ex:"#9621c3",assist:"#009000"},{main:"#555555",light:"#e9e9e9",dark:"#434343",ex:"#262626",assist:"#860314"}],zoom:1,x:0,y:0}),j=function(e,t){switch(t.type){case g.e:case g.d:return Object.assign(Object(u.b)(e),t.data);case g.f:var n=Object(u.b)(e);return n.zoom+=.1,n;case g.g:var r=Object(u.b)(e);return r.zoom-=.1,s=.3,(d=r)[l="zoom"]<=s&&(d[l]=s),r;case g.h:var a=Object(u.b)(e);return a.zoom=1,a;case g.b:var c=Object(u.b)(e);return c.x+=t.data.x/c.zoom,c.y+=t.data.y/c.zoom,c;case g.a:var o=Object(u.b)(e);return o.x=0,o.y=0,o;case g.c:var i=Object(u.b)(e);return i.x=0,i.x=0,i;default:return e}var d,l,s},E=n(28),_={isShow:!1,nodeId:""},w=function(e,t){switch(t.type){case E.a:var n=Object(u.b)(e);return n.isShow=t.data.isShow,n;default:return e}};n.d(t,"a",function(){return y});var y=c.a.createContext({});t.b=function(e){var t=Object(a.useReducer)(l,d),n=Object(r.a)(t,2),o=n[0],i=n[1],u=Object(a.useReducer)(p,m),s=Object(r.a)(u,2),f=s[0],h=s[1],g=Object(a.useReducer)(v,b),O=Object(r.a)(g,2),E=O[0],k=O[1],C=Object(a.useReducer)(j,x),N=Object(r.a)(C,2),S=N[0],z=N[1],R=Object(a.useReducer)(w,_),L=Object(r.a)(R,2),T={mindmap:{state:o,dispatch:i},nodeStatus:{state:f,dispatch:h},history:{state:E,dispatch:k},global:{state:S,dispatch:z},editPanel:{state:L[0],dispatch:L[1]}};return c.a.createElement(y.Provider,{value:T},e.children)}},50:function(e,t,n){"use strict";var r=function e(t,n,r){switch(t){case"KM":return n.data={},n.data.id=r.id,n.data.created=Date.now(),n.data.text=r.text,n.data.expandState=r.showChildren?"expand":"collapse",n.children=r.children.map(function(n){return e(t,{},n)}),n;default:return}};t.a=function(e,t){var n;switch(t){case"MD":case"TXT":n=function(e,t){var n=[];return function e(t,r,a){t&&(n.push(function(e,t,n){switch(n){case"MD":return t<6?"#".repeat(t+1)+" "+e.text:"\t".repeat(t-6)+"- "+e.text;case"TXT":return"\t".repeat(t)+e.text;default:return}}(t,r,a)),t.children.forEach(function(t){e(t,r+1,a)}))}(e,0,t),n.join("\n")}(e,t);break;default:n=function(e,t){switch(t){case"KM":var n={root:r(t,{},e)};return JSON.stringify(n);default:return JSON.stringify(n)}}(e,t)}return n}},55:function(e,t,n){e.exports=n(278)},60:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},9:function(e,t,n){"use strict";n.d(t,"h",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"g",function(){return l});var r="mindmap/toggleChildren",a="mindmap/addChild",c="mindmap/addSibling",o="mindmap/moveNode",i="mindmap/changeText",u="mindmap/deleteNode",d="mindmap/expandAll",l="mindmap/setMindmap"}},[[55,1,2]]]);
//# sourceMappingURL=main.3a19fc9a.chunk.js.map